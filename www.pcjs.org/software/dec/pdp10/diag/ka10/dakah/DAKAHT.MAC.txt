;DAKAH



	DECVER==2
	MCNVER==0

	XLIST
DEFINE	NAME	(MCNVER,DECVER)<

TITLE	DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) MCNVER,DECVER
>
	LIST
	LALL
	NAME	\MCNVER,\DECVER

;TEST DESIGNED FOR INITIAL DEBUGGING OF PROCESSOR HARDWARE
;AND TO DETECT (SOLID) FAILURES IN THE FIELD.

;COPYRIGHT 1972,1977
;DIGITAL EQUIPMENT CORPORATION
;MARLBORO, MASS. 01752

;JOHN R. KIRCHOFF

	LOC	137
	MCNVER,,DECVER

	NOSYM
SUBTTL	DIAGNOSTIC PARAMETERS

;CONTROL WORDS

EXIOT=4000		;USER PRIV I/O FLAG
USERF=10000		;USER MODE FLAG

DACT=400
ME=774
PIG0=2377
PIH1=40000
PIH2=20000
PIH3=10000
PIH4=4000
PIH5=2000
PIH6=1000
PIH7=400
PIOSET=2000
PIOCLR=1000
PIREQ=4000
ACT=200
PROT=20000
NONEX=10000
UMIOT=4000
;SUBROUTINE DEFINITIONS

SADR1=START
SADR2=START
SADR3=START
SADR4=START
SADR5=START
SADR6=START
SADR7=JRST START
SADR8=JRST START
SADR9=JRST START
SADR10=JRST START
SADR11=JRST START
PAREA1=0
PAREA2=0
PAREA3=0
PAREA4=0
PAREA5=0
PAREA6=0
ITERAT=1
EXCASB==1
PGMEND==1

;MACROS

;STOP -	USED FOR SCOPE LOOP, IF INSTRUCTION FAILS, CHANGE (JUMP .+1)
;	TO A (JUMP .-X) TO CYCLE ON FAILING INSTRUCTION.

DEFINE	STOP	(A)<
	HALT	.+1
	JUMP	.+1
				>

;SFLAG - USED TO CLEAR ALL FLAGS THEN TO SET REQUESTED
;	 FLAG FOR TESTING.

DEFINE	SFLAG	(A)<
	MOVSI	1,A
	JFCL	17,.+1
	JRST	2,.+1(1)
				>

;CHANEL - USED FOR 2 CHANNEL SYSTEM CHECK

DEFINE	CHANEL	(A)<
	SKIPN	PI7SYS#
	JRST	A
				>

;RETURN - USED TO SETUP UUO TRAP

DEFINE	RETURN	(A)<
	MOVE	2,[JSP 2,A]
	MOVEM	2,41
	SETOB	2,40
				>

;CLEAN - USED TO CLEAR THE PROCESSOR EXCEPT CLOCK
;	CLEAR DEVICES AND PI SYSTEM

DEFINE	CLEAN	(A)<
	CONO	634440
	CONO	PI,10000
				>
