(function(){/*
 https://www.pcjs.org/machines/shared/lib/diskapi.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/dumpapi.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/reportapi.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/userapi.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/keys.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/strlib.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/weblib.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/messages.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/device.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/cpu.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/rom.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/ram.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/keyboard.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/pc11.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/rk11.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/rl11.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/rx11.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/computer.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/state.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/embed.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/defines.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/usrlib.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/component.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/defines.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/panel.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/bus.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/memory.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/cpustate.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/cpuops.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/serial.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/disk.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/drive.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/shared/lib/debugger.js (C) 2012-2021 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp11/lib/debugger.js (C) 2012-2021 Jeff Parsons
*/
var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ca(a){if(!(a instanceof Array)){a=ba(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var da="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ea="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ha(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ia=ha(this);function t(a,b){if(b)a:{var c=ia;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ea(c,a,{configurable:!0,writable:!0,value:b})}}var ja;
if("function"==typeof Object.setPrototypeOf)ja=Object.setPrototypeOf;else{var ka;a:{var la={a:!0},ma={};try{ma.__proto__=la;ka=ma.a;break a}catch(a){}ka=!1}ja=ka?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var na=ja;
function u(a,b){a.prototype=da(b.prototype);a.prototype.constructor=a;if(na)na(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Gk=b.prototype}function oa(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b}
t("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});
t("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.i=f;ea(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.i};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
t("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ia[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ea(d.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(aa(this))}})}return a});function qa(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ra(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}t("Array.prototype.keys",function(a){return a?a:function(){return ra(this,function(b){return b})}});t("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});
t("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function sa(a){return a?a:Array.prototype.fill}t("Int8Array.prototype.fill",sa);t("Uint8Array.prototype.fill",sa);t("Uint8ClampedArray.prototype.fill",sa);t("Int16Array.prototype.fill",sa);t("Uint16Array.prototype.fill",sa);t("Int32Array.prototype.fill",sa);
t("Uint32Array.prototype.fill",sa);t("Float32Array.prototype.fill",sa);t("Float64Array.prototype.fill",sa);
var ta={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],10653696:[306,4,17],21411840:[615,4,17],256256:[77,1,26,128],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},ua={yi:0,Be:1,Fi:2,Gi:3,Hi:4,Ii:5,Ji:6,Ki:7,Jd:8,Li:9,Ce:10,Mi:11,Ni:12,De:13,Oi:14,Pi:15,Qi:16,Ri:17,Si:18,Ti:19,Ui:20,Vi:21,Wi:22,Xi:23,Yi:24,Zi:25,$i:26,fj:27," ":32,"!":33,'"':34,"#":35,
$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,Hd:65,ui:66,Ai:67,aj:68,E:69,hj:70,kj:71,wj:72,yj:73,zj:74,Aj:75,Bj:76,Ej:77,Gj:78,Mj:79,Pj:80,Q:81,Rj:82,Uj:83,ck:84,ek:85,gk:86,hk:87,lk:88,mk:89,uf:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,sk:103,tk:104,uk:105,zk:106,k:107,Ak:108,Bk:109,n:110,Ck:111,p:112,q:113,r:114,Dk:115,t:116,
Hk:117,Ik:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Xb:127};function wa(){}
function xa(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));if((b&&10!=b?16==b?null!==a.match(/^-?[0-9a-f]+$/i):8==b?null!==a.match(/^-?[0-7]+$/):2==b&&null!==a.match(/^-?[01]+$/):null!==a.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function ya(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)||"number"!=typeof a?a=null:(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var h=a%b;h+=0<=h&&9>=h?48:55;f=String.fromCharCode(h)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function za(a,b,c){b?36<b&&(b=36):(b=Math.abs(a),b=255>=b?8:262143>=b?18:36);return ya(a,2,b,"",c)}
function x(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return ya(a,8,b,c?"0o":"")}function Aa(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return ya(a,10,b)}function z(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return ya(a,16,b,c?"0x":"")}function Ba(a){return z(a,4,!0)}function Ca(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}
function Da(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase(),"json5"==b&&(b="json"));return b}function Ea(a,b){return-1!==a.indexOf(b,a.length-b.length)}function Fa(a){return a.replace(/[&<>"'$]/g,function(b){return Ga[b]})}function Ha(a,b){return(a+"                                        ").slice(0,b)}
function Ia(){var a=oa.apply(0,arguments);return void 0===a[0]?new Date(Date.now()):"string"===typeof a[0]?new Date(a[0]+" "+(a[1]||"00:00:00 GMT")):void 0===a[1]?new Date(a[0]):new Date(Date.UTC.apply(Date,ca(a)))}
function Ka(a){var b=oa.apply(1,arguments);if(!b||!b.length)return a;var c="",d=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),e=0,f;for(f=0;f<d.length-6;f+=6){c+=d[f];var g=d[f+5],h="ACDFHIMNSTWYbdfjcsoXx%".indexOf(g);if(0>h)c+="%"+d[f+1]+d[f+2]+d[f+3]+d[f+4]+g;else{if(e<b.length){var l=b[e];"%"!=g&&e++}else l=b[b.length-1];var n=d[f+1],m=0<=n.indexOf("#"),q=0<=n.indexOf("0"),r=d[f+2];"*"==r?(r=l,l=e<b.length?b[e++]:b[b.length-1]):r=+r||0;var p=d[f+3];p=p?+p.substr(1):-1;var v=null,
y=0,w="";h=12>h&&"object"!=typeof l?Ia(l):l;switch(g){case "C":l=m?"#":"";c+=isNaN(h.getTime())?void 0:Ka(Ka("%%%sW, %%%sF %%%sD, %%%sY",l),h);continue;case "D":l=m?h.getUTCDate():h.getDate();g="d";break;case "A":case "G":case "H":l=m?h.getUTCHours():h.getHours();"A"==g?(l=12>l?"am":"pm",g="s"):("G"==g&&(l=l?12<l?l-12:l:12),g="d");break;case "F":case "M":l=m?h.getUTCMonth():h.getMonth();"F"==g?(l=La[l],g="s"):(l++,g="d");break;case "N":l=m?h.getUTCMinutes():h.getMinutes();g="d";break;case "S":l=m?
h.getUTCSeconds():h.getSeconds();g="d";break;case "T":l=m?"#":"";c+=isNaN(h.getTime())?void 0:Ka(Ka("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",l),h);continue;case "W":l=Ma[m?h.getUTCDay():h.getDay()];g="s";break;case "Y":l=m?h.getUTCFullYear():h.getFullYear(),0<p&&(l%=Math.pow(10,p),p=-1),g="d"}switch(g){case "b":c+=l?"true":"false";break;case "d":l=Math.trunc(l),0<=p&&(q=!0,r<p&&(r=p),p=-1);case "f":g=l+"";0<=p&&(g=l.toFixed(p));g.length<r&&(q?(0>l&&(r--,g=g.substr(1)),g=("0000000000"+g).slice(-r),
0>l&&(g="-"+g)):g=("          "+g).slice(-r));c+=g;break;case "j":c+=JSON.stringify(l,null,r||void 0);break;case "c":l="string"==typeof l?l[0]:String.fromCharCode(l);case "s":if(void 0!=l)for("string"!=typeof l&&(l=l.toString()),0<=p&&(l=l.substr(0,p));l.length<r;)l=0<=n.indexOf("-")?l+" ":" "+l;c+=l;break;case "o":y=8,m&&(w="0");case "X":v=Na;case "x":g="";y||(y=16);!w&&m&&(w="0x");v||(v=Qa);l=Math.trunc(l);0<=p&&(q=!0,r<p&&(r=p));q&&!r&&(r=Math.abs(l),r=255>=r?2:65535>=r?4:4294967295>=r?8:9,r+=
w.length);r-=w.length;do m=l&y-1,l>>>=16==y?4:3,q||!g||m||l?g=v[m]+g:(w&&(g=w+g,w=""),0<r&&(g=" "+g));while(0<--r||l);c+=w+g;break;case "%":c+="%";break;default:c+="(unimplemented printf type %"+g+")"}}}return c+=d[f]}function Ra(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var Ga={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;",$:"&dollar;"},Sa={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"},Qa="0123456789abcdef",Na="0123456789ABCDEF",Ma="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),La="January February March April May June July August September October November December".split(" ");
function Ta(a,b,c){var d=0,e=a.length,f=0;for(void 0===c&&(c=function(l,n){return l>n?1:l<n?-1:0});d<e;){var g=d+e>>1,h=void 0;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}return f?d:~d}
function Ua(a,b,c,d){function e(){if(4!==l.readyState)return null;try{g=n?l.response:l.responseText}catch(p){}if(null==g||200!=l.status&&(l.status||!g.length||"file:"!=(window?window.location.protocol:"file:")))if(f=l.status||-1,!l.status&&!Va){var r=a.match(/(^https?:\/\/[^/]+)(.*)/);r&&(Va=!0,A("PCjs was unable to perform a cross-origin resource request to '"+r[1]+"'.\n\nIf you're running an ad blocker, try adding '"+Wa()+"' to your whitelist (or find a smarter ad blocker)."))}d&&d(a,g,f);return[g,
f]}b=void 0===b?"text":b;c=void 0===c?!1:c;var f=0,g=null,h=null;if("object"==typeof resources&&(g=resources[a]))return d&&d(a,g,f),[g,f];if(c&&"function"==typeof resources)return resources(a,function(r,p){d&&d(a,r,p)}),h;a=a.replace(/^\/(diskettes|gamedisks|harddisks|decdisks|pcsig[0-9a-z]*-disks|private)\//,"https://$1.pcjs.org/").replace(/^\/discs\/([^/]*)\//,"https://$1.pcjs.org/");var l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),n=!1,m="string"===
typeof l.responseType;c&&(l.onreadystatechange=e);if(b&&"object"==typeof b){m="";for(var q in b)b.hasOwnProperty(q)&&(m&&(m+="&"),m+=q+"="+encodeURIComponent(b[q]));m=m.replace(/%20/g,"+");l.open("POST",a,c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(m)}else l.open("GET",a,c),"arraybuffer"==b&&(m?(n=!0,l.responseType=b):l.overrideMimeType("text/plain; charset=x-user-defined")),l.send();c||(l.readyState=4,h=e());return h}
function Xa(a,b){var c,d={ca:null,ia:null,Aa:null,za:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f;if("<"==b.charAt(0))throw Error(b);if(0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)){0>b.indexOf('"values"')&&(b=b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,""));var g=JSON.parse(b)}else g=eval("("+b+")");d.Aa=g.load;d.za=g.exec;var h=g.width,l=g.values;h&&l&&(8==h?g.bytes=l:16==h?g.words=l:32==h?g.longs=l:g.data=l);if(e=g.bytes)d.ca=e;else if(e=g.words)for(d.ca=Array(2*
e.length),f=c=0;c<e.length;c++)d.ca[f++]=e[c]&255,d.ca[f++]=e[c]>>8&255;else if(e=g.longs)for(d.ca=Array(4*e.length),f=c=0;c<e.length;c++)d.ca[f++]=e[c]&255,d.ca[f++]=e[c]>>8&255,d.ca[f++]=e[c]>>16&255,d.ca[f++]=e[c]>>24&255;else(e=g.data)?d.nk=e:d.ca=g;d.ca&&(d.ca.length?1==d.ca.length&&(A(d.ca[0]),d=null):(A("Empty resource: "+a),d=null));d.ia=g.symbols}catch(n){A("Resource data error ("+a+"): "+n.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=
parseInt(b[c],16);if(isNaN(f)){A("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.ca=e)}return d}function Wa(){return window?window.location.protocol+"//"+window.location.host:"https://www.pcjs.org"}
function Ya(){if(null==Za){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Za=a}return Za}function $a(a){if(window)try{var b=window.localStorage.getItem(a)}catch(c){}return b}function ab(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}
function bb(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&(!!b.match(/(iPod|iPhone|iPad)/)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function gb(){var a,b=hb("mobile");if(b)return"true"==b;if(bb("Mobi")){if(!a)return!0;(b="!"==a[0])&&(a=a.substr(1));return bb(a)!=b}return!1}
function hb(a){if(!ib){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}ib=c}return ib[a]||ib[a.toLowerCase()]}function jb(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function kb(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function lb(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function mb(a){nb.init.push(a)}
function ob(a){A(a+"\n\nIf it happens again, please send the URL to support@pcjs.org. Thanks.")}function pb(a){if(qb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){ob("An unexpected error occurred: "+c.message)}}function rb(a){!qb&&a?(qb=!0,sb&&wb("init"),xb&&wb("show")):qb=a}function wb(a){nb[a]&&pb(nb[a])}var ib=null,nb={init:[],show:[],exit:[]},sb=!1,xb=!1,qb=!0,Va=!1,Za=null;lb("onload",function(){sb=!0;pb(nb.init)});lb("onpageshow",function(){xb=!0;pb(nb.show)});
lb(bb("iOS")?"onpagehide":bb("Opera")?"onunload":"onbeforeunload",function(){pb(nb.exit)});
function B(a,b,c){this.type=a;b||(b={id:"",name:""});this.name=b.name;this.Rd=b.comment;this.sf=b;this.id=this.id=b.id||"";this.exports={};this.J=this.bindings={};a=this.id.indexOf(".");0>a?(this.hb="PCjs",this.Tc=this.id):(this.hb=this.id.substr(0,a),this.Tc=this.id.substr(a+1));this.flags={ready:!1,cb:!1,td:!1,yk:!1,da:!1,Fd:!1,error:!1};this.Ic=null;this.flags.error=!1;this.ja=c||0;this.H=this.i=this.G=this.L=null;yb.push(this)}function zb(a,b,c){Ab[a]&&b&&(Ab[a][b]=c)}
function Bb(){return Date.now()||+new Date}function A(a){window&&window.alert(a)}function Cb(a){var b=!1;window&&(b=window.confirm(a));return b}function Db(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function Eb(a,b){var c=C;b=Fb(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var h=g.getAttribute("class");if(h)for(var l=h.split(" "),n=0;n<l.length;n++)switch(h=l[n],h){case c+"-binding":(h=Mb(g))&&void 0!==h.binding&&a.va(h.type,h.binding,g,h.value),n=l.length}}}}function Nb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<yb.length;b++){var d=yb[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Ob(a){if(void 0!==a){var b;for(b=0;b<yb.length;b++)if(yb[b].id===a)return yb[b]}return null}function Pb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<yb.length;d++)if(c)c==yb[d]&&(c=null);else if(!(a!=yb[d].type||b&&yb[d].id.indexOf(b)))return yb[d]}return null}function Mb(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){A(c.message+" ("+a+")")}return b}
function Fb(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function Qb(a){for(var b=!0,c=Rb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=Sb.indexOf(e)&&(f=function(){return function(){Qb(a)}}());var g=Tb[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var h=Pb(d[1],a);if(h)if(g=Ub[e])b=g(h,d[2],d[3]);else{var l=h.exports;if(l&&(g=l[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){A("Script error: '"+e+"' command "+(g?" failed":" not recognized"));break}}c&&!c.length&&delete Rb[a];
return b}k=B.prototype;k.toString=function(){return this.name?this.name:this.id||this.type};
k.va=function(a,b,c){switch(b){case "clear":return this.J[b]||(this.J[b]=c,c.onclick=function(d){return function(){d.J.print&&(d.J.print.value="")}}(this)),!0;case "print":return this.J[b]||(this.J[b]=c,this.V=function(d){this.B(d,this.type);return!0},c.value="",this.print=function(d){return function(e){Db(d,e)}}(c),this.B=function(d,e){return function(f,g){f||(f="");if(g!=Vb||"..."!=f.slice(-3))g&&(f=g+": "+f),Db(e,f+"\n");else{g=e.value;var h=g.lastIndexOf(f);g=0>h?g+(f+"\n"):g.substr(0,h)+(f+".")+
g.substr(h+f.length);8192<g.length&&(g=g.substr(g.length-4096));e.value=g;e.scrollTop=e.scrollHeight}}}(this,c)),!0;default:return!1}};k.log=function(){};k.print=function(){};k.B=function(){};k.status=function(a){this.B(this.type+": "+Ka.apply(wa,[a].concat(ca(oa.apply(1,arguments)))))};k.V=function(a,b,c){if(!b){var d=Pb("Computer",this.id);if(d&&d.flags.Fd)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||A((c?c+": ":"")+a);return!0};
function Wb(a,b){a.flags.error=!0;a.V(b)}function Xb(a){return a.flags.error?(a.B(a.toString()+" error"),!0):!1}function Yb(a,b){b&&(a.flags.ready?b():a.Ic=b);return a.flags.ready}function E(a,b){a.flags.error||(a.flags.ready=!1!==b,a.flags.ready&&(b=a.Ic,a.Ic=null,b&&b()))}function Zb(a,b){a.flags.cb&&(b?a.flags.td=!0:void 0===b&&a.B(a.toString()+" busy"));return a.flags.cb}
function $b(a,b){if(a.flags.td)return a.flags.cb=!1,a.flags.td=!1;if(a.flags.error)return a.B(a.toString()+" error"),!1;a.flags.cb=b;return a.flags.cb}k.Da=function(){return this.flags.da=!0};k.Ca=function(a,b){b&&(this.flags.da=!1);return!0};function F(a,b){b=void 0===b?0:b;if(a.H){b%2&&b--;b=b||a.ja;var c;if(!(c=-1==(b|1))){a=a.H.ja;c=Math.pow(2,32);var d=b/c|0;c=(a&b)==(b|0)&&((a/c|0)&d)==d}if(c)return!0}return!1}
function G(a,b,c,d){a.H&&("boolean"==typeof c&&(c=c?-1:0),F(a,c)&&a.H.message(b,d))}var Vb="progress";window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var Ab=window?window.PCjs.Machines:{},yb=window?window.PCjs.Components:[],Rb=window?window.PCjs.Commands:{},Sb=["hold","sleep","wait"],Tb={alert:function(a){A(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Ub={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var ac="undefined"!==typeof ArrayBuffer,C="pdp11",bc="PDPjs",cc=!1,dc=ac,ec=!0,fc=!0,kc="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),lc={nd:5,rd:144,Wc:8,Cc:{lf:15,Vj:16,kk:32,Yd:64,Fa:128,be:256,Zj:512,ej:1024,Bc:2048,dj:4096,gd:57344,la:{gd:13}},$e:{de:1,Ei:2,mf:3,Gb:28,Ac:32,zc:64,Sd:128,dk:256,Ee:512,$b:1024,Qj:2048,ae:4096,ik:8192,Oj:16384,Fe:32768,bd:32736},Ye:{Yb:1,wa:14,Fb:48,Eb:64,Za:128,bk:256,gj:512,ij:1024,Me:2048,pd:8192,bd:16384,gb:32768,Gb:4608,
ac:61438,Ta:3967,la:{wa:1,Fb:4}},Ze:{od:15,ed:16,Wb:8160,pb:57344,la:{ed:4,Wb:5,pb:13}},wa:{Ae:0,cc:2,qb:4,sd:6,Fc:8,Te:10,Ge:12,jk:14}},mc={nd:5,rd:112,Wc:4,Se:"DY",df:{Fa:1,wa:14,Ya:48,Eb:64,Za:128,pb:768,Kd:15360,cj:16384,gb:32768,Bi:16254,Yj:128,ac:65535,Ta:1022,la:{wa:1,Ya:4,pb:8}},bf:{Ta:65534},ef:{nf:1,pf:4,qf:16,Wj:65408,Zd:63,Ec:64,bc:65408,Ie:3,pj:8,la:{Ec:6,bc:7}},Dc:{Le:{Cj:0,ak:1,zi:2,Dj:3,Fc:4,Qe:5,fk:6,$j:7},Ld:8,Ke:16,mj:32,oj:64,Je:128,nj:256,sj:512,uj:1024,rj:2048,qj:4096,vj:8192,
lj:16384,tj:32768},cf:{ab:63},Kd:{Nj:1024,bj:2048,de:2048,xj:3072,Ee:4096,$a:5120,$b:8192,Fj:9216},wa:{Hj:0,sd:2,rf:4,Fc:6,Xe:8,tf:10,Ue:12,Sj:14}},nc={nd:5,rd:180,Wc:2,Se:"DX",gf:{Yb:1,wa:14,qd:16,DONE:32,Eb:64,bb:128,INIT:16384,gb:32768,Gb:16128,ac:32992,Ta:16479},Tj:{},kf:{ab:127},jf:{ab:31},hf:{Id:1,Vd:2,gd:4,Xb:64,Fa:128},wa:{Zc:0,EMPTY:2,cc:4,qb:6,Gb:8,We:10,Gc:12,Ve:14},He:{cd:8,dd:16,vi:24,Re:32,jj:40,Xj:48,md:56,Lj:72,Kj:80,Jj:88,Di:96,xi:104,Ij:112,ld:120,Ci:128,wi:136}},oc={48:"DL11R",
52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"};nc.ff=["DX",77,1,26,128,1,0,0,128,0];lc.Bc=["RK",203,2,12,512,0,0,0,512,lc.Cc.Bc|lc.Cc.be|lc.Cc.Yd];mc.af=["RL",512,2,40,256,0,0,0,256,mc.Dc.Le.Qe|mc.Dc.Ld|mc.Dc.Ke];C="pdp11";bc="PDPjs";cc=!1;dc=ac;fc=ec=!0;
var pc={cpu:2,trap:4,fault:8,"int":16,bus:32,memory:64,mmu:128,rom:256,device:512,panel:1024,keyboard:2048,key:4096,pc11:8192,paper:16384,disk:32768,read:65536,write:131072,rk11:262144,rl11:524288,rx11:1048576,dl11:2097152,serial:4194304,kw11:8388608,timer:16777216,speaker:33554432,computer:67108864,warn:268435456,halt:536870912,buffer:1073741824};
function qc(a,b){B.call(this,"Panel",a,1024);this.A=this.C=0;this.N=b;this.ga=this.u=this.Wa=this.Ab=0;this.F=this.I=-1;this.j=this.D=!1;this.K=rc;this.v={};this.g={START:[1,1,!0,!1,this.Qf],STEP:[1,1,!1,!1,this.Rf],ENABLE:[1,1,!1,!1,this.Lf],CONT:[1,1,!0,!1,this.Jf],DEP:[0,0,!0,!1,this.Kf],EXAM:[1,1,!0,!1,this.Mf],LOAD:[1,1,!0,!1,this.Of],TEST:[0,0,!0,!1,this.Nf]};for(a=0;22>a;a++)this.g["S"+a]=[0,0,!1,!1,this.Pf,a];this.H=this.i=this.G=this.L=null;this.exports={hold:this.Ef,toggle:this.jh,reset:this.dh,
set:this.ih};E(this)}u(qc,B);function sc(a,b){return tc(a,a.Ab=b)}k=qc.prototype;k.reset=function(a){this.stop();a&&sc(this,0)};
k.va=function(a,b,c,d){if(this.L&&this.L.va(a,b,c,d)||this.i&&this.i.va(a,b,c,d)||this.H&&this.H.va(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.J[b]=c,this.C++,!0;default:return"led"==a||"rled"==a?(this.J[b]=c,this.v[b]=d?1:0,this.C++,!0):"switch"==a?(void 0===this.g[b]&&(this.g[b]=[d?1:0,d?1:0]),this.J[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(e,
f){return function(){uc(e,f)}}(this,b),a.onmouseup=a.onmouseout=function(e,f){return function(){vc(e,f)}}(this,b),a.ontouchstart=function(e,f){return function(g){uc(e,f);g.preventDefault()}}(this,b),a.ontouchend=function(e,f){return function(){vc(e,f)}}(this,b),!0):B.prototype.va.call(this,a,b,c,d)}};k.Ba=function(a,b,c,d){this.L=a;this.G=b;this.i=c;this.H=d;wc(b,this,xc);yc(b,this.reset.bind(this));zc(this);Ac(this)};
k.Da=function(a,b){if(!b)if(this.N&&Bc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};k.Ca=function(a){return a?this.save():!0};k.save=function(){var a=new Cc(this);a.set(0,[this.ga,this.Ab,this.Wa]);return a.data()};k.restore=function(a){if(a=a[0])Dc(this,this.ga=a[0]),sc(this,a[1]),Ec(this,a[2]);return!0};k.dh=function(){for(var a in this.g){var b=this.g[a];b[1]=b[0]}Ac(this);return!0};function Fc(a,b,c){if(a=a.J[b])a.style.backgroundColor=c?"#ff0000":"#000000"}
function zc(a,b){for(var c in a.v)Fc(a,c,null!=b?b:a.v[c])}function Gc(a,b,c){if(a=a.J[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function Ac(a){for(var b in a.g)Gc(a,b,a.g[b][1])}function Hc(a,b,c,d){if(a.J[b]){var e=a.H&&a.H.Y||8;c=c||0;c=8==e?x(c,d):z(c,d);a.J[b].textContent!=c&&(a.J[b].textContent=c)}}k.Ef=function(a,b,c){if(uc(this,b)){if(c){var d=this;setTimeout(function(){vc(d,b);a&&a()},+c);return!1}vc(this,b)}return!0};
k.ih=function(a,b){if("SR"==a)return Ec(this,xa(b,8));var c=this.g[a];return c?(c[1]=+b?1:0,Gc(this,a,c[1]),!0):!1};k.jh=function(a){return uc(this,a)?(vc(this,a),!0):!1};function uc(a,b){var c=a.g[b];return c?(Gc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b==Ic&&(a.j=!1),!0):!1}function vc(a,b){var c=a.g[b];c&&(c[2]&&c[3]&&(Gc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}
k.Qf=function(a){a||this.i.flags.X||(Jc(this.i,this.ga),a=this.i,a.G.reset(),Kc(a),this.g[Lc]&&this.g[Lc][1]&&Mc(this.i))};k.Rf=function(){};k.Lf=function(a){a||Nc(this.i)};k.Jf=function(a){if(!a&&!this.i.flags.X)if(this.g[Lc]&&this.g[Lc][1])Mc(this.i);else{if((a=this.H)&&!Zb(a,!0))$b(a,!0),Oc(a,0,null),$b(a,!1);else try{var b=this.i.yc(1);0<b&&(Pc(this.i,b),Qc(this.i,b,!0),Rc(this.i,b))}catch(c){"number"!=typeof c&&(b=c,Wb(this.i,b.stack||b.message))}this.stop();this.L&&Sc(this.L)}};
k.Kf=function(a){if(a&&!this.i.flags.X)if(this.j&&cd(this),this.j=!0,a=sc(this,this.Wa),this.K==rc)dd(this.G,this.ga,a);else{var b=this.i,c=this.ga;b.qa++;b.G.Zb(ed(b,c,4),a);b.qa--}};k.Mf=function(a){a||this.i.flags.X||(this.j&&cd(this),this.j=!0,a=this.K==rc?fd(this.G,this.ga):gd(this.i,this.ga),sc(this,a))};k.Of=function(a){a||this.i.flags.X||Dc(this,this.Wa)};k.Nf=function(a){a?(this.D=!0,zc(this,!0)):(this.D=!1,zc(this),Ec(this,0))};k.Pf=function(a,b){this.Wa=a?this.Wa|1<<b:this.Wa&~(1<<b)};
function cd(a){var b=1140>=a.i.model?8:16,c=65472<=a.ga&&a.ga<65472+b;b=c?1:2;c=c?15:a.G.K;a.g[hd]&&a.g[hd][1]||(b=-b);Dc(a,a.ga&~c|a.ga+b&c)}function Dc(a,b){a.ga=b&a.G.K;if(a.F!==a.ga){a.F=a.ga;b=a.F;for(var c=0;22>c;c++)id(a,"A"+c,b&1<<c)}}function tc(a,b){a.u=b&65535;if(a.I!==a.u){a.I=a.u;b=a.I;for(var c=0;16>c;c++)id(a,"D"+c,b&1<<c)}return a.u}function id(a,b,c){a.v[b]=c;a.D||Fc(a,b,c)}function Ec(a,b){a.Wa=b|0;for(b=0;22>b;b++)a.g["S"+b][1]=a.Wa&1<<b?1:0;Ac(a);return!0}
k.stop=function(){Dc(this,this.i.j[7])};k.Dd=function(a){this.ga=a};k.setData=function(a,b){b?this.Ab=a:this.u=a};k.Wf=function(a,b){return(b?this.Ab:this.Wa)&65535};k.ph=function(a){this.Ab=a};function Bc(){for(var a=Fb(document,C,"panel"),b=0;b<a.length;b++){var c=a[b],d=Mb(c),e=Ob(d.id);e||(e=new qc(d,!0));Eb(e,c)}}var rc=7,Lc="ENABLE",Ic="LOAD",hd="STEP",jd={},xc=(jd[65400]=[null,null,qc.prototype.Wf,qc.prototype.ph,"CNSW"],jd);mb(Bc);
function kd(a,b,c){B.call(this,"Bus",a,32);this.i=b;this.H=c;this.W=+a.busWidth||16;this.O=1<<this.W;this.K=this.O-1;this.v=ld;this.j=Math.log2(this.v);this.T=this.v>>2;this.u=this.v-1;this.I=this.O/this.v|0;this.U=this.I-1;this.Pa=[];this.ma=0;this.F=!1;this.P=[];this.vf=[md,nd,od,pd];this.g=this.A=[];this.D=this.N=this.C=this.R=this.S=0;a=new H(this);qd(a,this.H);this.g=Array(this.I);this.A=Array(this.I);for(b=0;b<this.I;b++)this.g[b]=this.A[b]=a;this.D=this.O-ld;rd(this,this.D,ld,sd,this);this.S=
this.R=(this.D&this.K)>>>this.j;this.N=0;this.C=this.K;E(this)}u(kd,B);function td(a,b){if(b!=a.N){for(var c=0;c<a.I;c++)a.A[c]=a.g[c];a.N=0;a.C=a.K;b&&(a.N=b,b=1<<b,a.C=b-1,b-=ld,a.S=(b&a.C)>>>a.j,a.A[a.S]=a.g[a.R])}}k=kd.prototype;k.reset=function(){for(var a=0;a<this.P.length;a++)this.P[a]();td(this,16)};k.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.Ca=function(a){return a?this.save():!0};
k.save=function(){for(var a=new Cc(this),b=a.set,c=0,d=[],e=0;e<this.I;e++){var f=this.g[e];if(f.eb||f.Cf){d[c++]=e;var g=c++;if(f=f.save()){for(var h=0,l=0,n=[];h<f.length;){for(var m=f[h],q=h+1;q<f.length&&f[q]===m;)q++;n[l++]=q-h;n[l++]=m;h=q}n.length<f.length&&(f=n)}d[g]=f}}b.call(a,0,d);return a.data()};
k.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<this.T){var e=this.T,f=0;e=e?Array(e):[];for(var g=0;g<d.length-1;)for(var h=d[g++],l=d[g++];h--;)e[f++]=l;d=e}f=this.g[c];if(!f||!f.restore(d)){A("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function rd(a,b,c,d,e){for(var f=b,g=c,h=f>>>a.j;0<g&&h<a.g.length;){var l=a.g[h],n=h*a.v,m=a.v-(f-n);m>g&&(m=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.M)return l.Sb+=l.M-f,l.M=f,!0;if(f>=l.M+l.Sb){m=l.size-(f-n);m>g&&(m=g);l.Sb=f-l.M+m;f=n+a.v;g-=m;h++;continue}}return ud(vd,f,g)}f=new H(a,f,m,a.v,d,e);qd(f,a.H,l);a.g[h++]=f;f=n+a.v;g-=m}return 0>=g?(a.status("Added %dKb %s at %o",c>>10,wd[d],b),!0):ud(xd,b,c)}k.Md=function(a){return this.A[(a&this.C)>>>this.j].zb(a&this.u,a)};
k.xc=function(a){var b=a&this.u,c=(a&this.C)>>>this.j;return fc||b!=this.u?this.A[c].pa(b,a):this.A[c++].zb(b,a)|this.A[c&this.U].zb(0,a+1)<<8};k.Nd=function(a,b){this.A[(a&this.C)>>>this.j].Cb(a&this.u,b,a)};k.Zb=function(a,b){var c=a&this.u,d=(a&this.C)>>>this.j;fc||c!=this.u?this.A[d].Db(c,b,a):(this.A[d++].Cb(c,b&255,a),this.A[d&this.U].Cb(0,b>>8&255,a+1))};function yd(a,b){return a.g[(b&a.K)>>>a.j]}
function fd(a,b){var c;a.F=!1;a.ma++;var d=b&a.u,e=yd(a,b);fc||d!=a.u?c=e.D(d,b):c=e.v(d,b)|yd(a,b+1).v(0,b+1)<<8;a.ma--;return c}function zd(a,b,c){a.F=!1;a.ma++;yd(a,b).H(b&a.u,c&255,b);a.ma--}function dd(a,b,c){a.F=!1;a.ma++;var d=b&a.u,e=yd(a,b);fc||d!=a.u?e.F(d,c&65535,b):(e.H(d,c&255,b),yd(a,b+1).H(0,c>>8&255,b+1));a.ma--}function Ad(a){for(var b=Bd,c=0,d=0;d<a.g.length;d++){var e=a.g[d];e.type==b&&(c=e.M+e.Sb)}return c}
function Cd(a,b,c,d,e,f,g,h,l){for(var n=b==c?-1:0;b<=c;b+=2){var m=b&Dd;if(void 0!==a.Pa[m])return A("I/O address already registered: "+z(b,8,!0)),!1;var q=l||"unknown";q&&0<=n&&(q+=n++);a.Pa[m]=[d,e,f,g,q,h||32,!1]}return!0}
function wc(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.i.model)){var h=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,n=g[2]?g[2].bind(b):null,m=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!h&&n&&(h=function(v){return function(y){return v(y)&255}.bind(b)}(n)),!l&&m&&(l=function(v){return function(y,w){return v(y,w)}.bind(b)}(m)));for(var q=g[4],r=g[5]||1,p=0;p<r;p++,f+=2)if(q&&1<r&&(q=g[4]+p),!Cd(a,f,f,h,l,n,m,g[7]||b.ja,q||b.Tc))return!1}}return!0}
function yc(a,b){a.P.push(b)}function Ed(a,b,c,d){a.F=!0;a.ma||(a.H&&F(a.H,8)&&G(a.H,"memory fault ("+d+") on "+J(a.H,b),!0,!0),c&&(a.i.S|=c),K(a.i,4,0,b))}function Fd(a){var b=a.F;a.F=!1;return b}function ud(a,b,c){A("Memory block error ("+a+": "+z(b)+","+z(c)+")");return!1}var ld=8192,Dd=ld-1,vd=1,xd=2;
function md(a,b){var c=-1,d=this.controller,e=d.Pa[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Pa[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.i&&F(this.i,32|e[5])&&G(this.i,e[4]+".readByte("+J(this.i,b)+"): "+J(this.i,c),!0,!d.ma),c;Ed(d,b,16,3);c=255;this.i&&F(this.i,32)&&G(this.i,"warning: unconverted read access to byte @"+J(this.i,b)+": "+J(this.i,c),!0,!d.ma);return c}
function nd(a,b,c){var d=!1,e=this.controller,f=e.Pa[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Pa[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.i&&F(this.i,32|f[5])&&G(this.i,f[4]+".writeByte("+J(this.i,c)+","+J(this.i,b)+")",!0,!e.ma):(Ed(e,c,16,5),this.i&&F(this.i,32)&&G(this.i,"warning: unconverted write access to byte @"+J(this.i,c)+": "+J(this.i,
b),!0,!e.ma))}function od(a,b){var c=-1,d=this.controller;a=d.Pa[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.i&&F(this.i,32|a[5])&&G(this.i,a[4]+".readWord("+J(this.i,b)+"): "+J(this.i,c),!0,!d.ma),c;Ed(d,b,16,2);c=65535;this.i&&F(this.i,32)&&G(this.i,"warning: unconverted read access to word @"+J(this.i,b)+": "+J(this.i,c),!0,!d.ma);return c}
function pd(a,b,c){var d=!1,e=this.controller;a=e.Pa[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.i&&F(this.i,32|a[5])&&G(this.i,a[4]+".writeWord("+J(this.i,c)+","+J(this.i,b)+")",!0,!e.ma):(Ed(e,c,16,4),this.i&&F(this.i,32)&&G(this.i,"warning: unconverted write access to word @"+J(this.i,c)+": "+J(this.i,b),!0,!e.ma))}function L(a){B.call(this,"Device",a,512);this.g={fb:128,Ed:-1}}u(L,B);k=L.prototype;
k.Ba=function(a,b,c,d){this.G=b;this.L=a;this.i=c;this.H=d;var e=this;this.g.Ed=Gd(c,function(){e.g.fb|=128;e.g.fb&64&&Hd(e.i,e.g.Qa);e.L&&Sc(e.L,1);Id(e.i,e.g.Ed,1E3/60)});this.g.Qa=Jd(c,64,6,8388608);wc(b,this,Kd);yc(b,this.reset.bind(this));d&&Ld(d,128,function(f){var g=e.i;Md(e,"KIPDR",g.D[0],0,f[0]);Md(e,"KDPDR",g.D[0],8,f[0]);Md(e,"KIPAR",g.O[0],0,f[0]);Md(e,"KDPAR",g.O[0],8,f[0],!0);Md(e,"SIPDR",g.D[1],0,f[0]);Md(e,"SDPDR",g.D[1],8,f[0]);Md(e,"SIPAR",g.O[1],0,f[0]);Md(e,"SDPAR",g.O[1],8,f[0],
!0);Md(e,"UIPDR",g.D[3],0,f[0]);Md(e,"UDPDR",g.D[3],8,f[0]);Md(e,"UIPAR",g.O[3],0,f[0]);Md(e,"UDPAR",g.O[3],8,f[0],!0);g.Z&32&&Md(e,"UNIMAP",g.Ga,-1,f[0])});E(this)};function Md(a,b,c,d,e,f){a=a.H;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=0;var g=8,h="",l=!1,n=8;0>d&&(e=22,g=c.length,d=0,l=!0,n=4);for(var m=0;m<g;m++)0==m%n&&(h&&(h+="\n"),h+=b+(l?"["+Aa(m,2)+"]":"")+":"),h+=" "+J(a,c[d+m],e);a.B(h+(f?"\n":""))}}k.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};
k.Ca=function(a){return a?this.save():!0};k.reset=function(){this.g.fb=128;Id(this.i,this.g.Ed,1E3/60,!0)};k.save=function(){var a=new Cc(this);a.set(0,[this.g.fb]);return a.data()};k.restore=function(a){a=ba(a[0]);this.g.fb=a.next().value;return!0};k.cg=function(){return this.g.fb};k.wh=function(a){this.g.fb=a&192;this.g.fb&64||Nd(this.i,this.g.Qa)};k.eg=function(){return Od(this.i)};k.yh=function(a){Pd(this.i,a&-129|this.i.U&128)};k.fg=function(){return Qd(this.i)};k.gg=function(){return Rd(this.i)};
k.hg=function(){return this.i.Z};k.zh=function(a){Sd(this.i,a)};k.Tg=function(a){a=a>>1&63;var b=this.i.Ga[a>>1];return a&1?b>>16:b&65535};k.ki=function(a,b){b=b>>1&63;var c=b>>1;this.i.Ga[c]=b&1?this.i.Ga[c]&65535|(a&63)<<16:this.i.Ga[c]&-65536|a&65534};k.Mg=function(a){return this.i.D[1][a>>1&7]};k.di=function(a,b){this.i.D[1][b>>1&7]=a&65295};k.Kg=function(a){return this.i.D[1][(a>>1&7)+8]};k.bi=function(a,b){this.i.D[1][(b>>1&7)+8]=a&65295};k.Lg=function(a){return this.i.O[1][a>>1&7]};
k.ci=function(a,b){b=b>>1&7;this.i.O[1][b]=a;this.i.D[1][b]&=65295};k.Jg=function(a){return this.i.O[1][(a>>1&7)+8]};k.ai=function(a,b){b=(b>>1&7)+8;this.i.O[1][b]=a;this.i.D[1][b]&=65295};k.bg=function(a){return this.i.D[0][a>>1&7]};k.vh=function(a,b){this.i.D[0][b>>1&7]=a&65295};k.$f=function(a){return this.i.D[0][(a>>1&7)+8]};k.th=function(a,b){this.i.D[0][(b>>1&7)+8]=a&65295};k.ag=function(a){return this.i.O[0][a>>1&7]};k.uh=function(a,b){b=b>>1&7;this.i.O[0][b]=a;this.i.D[0][b]&=65295};
k.Zf=function(a){return this.i.O[0][(a>>1&7)+8]};k.sh=function(a,b){b=(b>>1&7)+8;this.i.O[0][b]=a;this.i.D[0][b]&=65295};k.Sg=function(a){return this.i.D[3][a>>1&7]};k.ji=function(a,b){this.i.D[3][b>>1&7]=a&65295};k.Qg=function(a){return this.i.D[3][(a>>1&7)+8]};k.hi=function(a,b){this.i.D[3][(b>>1&7)+8]=a&65295};k.Rg=function(a){return this.i.O[3][a>>1&7]};k.ii=function(a,b){b=b>>1&7;this.i.O[3][b]=a;this.i.D[3][b]&=65295};k.Pg=function(a){return this.i.O[3][(a>>1&7)+8]};
k.gi=function(a,b){b=(b>>1&7)+8;this.i.O[3][b]=a;this.i.D[3][b]&=65295};k.Qb=function(a){a&=7;return this.i.C&2048?this.i.ta[a]:this.i.j[a]};k.Ub=function(a,b){b&=7;this.i.C&2048?this.i.ta[b]=a:this.i.j[b]=a};k.og=function(){return this.i.C&49152?this.i.aa[0]:this.i.j[6]};k.Gh=function(a){this.i.C&49152?this.i.aa[0]=a:this.i.j[6]=a};k.rg=function(){return this.i.j[7]};k.Jh=function(a){this.i.j[7]=a};k.Rb=function(a){a&=7;return this.i.C&2048?this.i.j[a]:this.i.ta[a]};
k.Vb=function(a,b){b&=7;this.i.C&2048?this.i.j[b]=a:this.i.ta[b]=a};k.pg=function(){return 1==(this.i.C&49152)>>14?this.i.j[6]:this.i.aa[1]};k.Hh=function(a){1==(this.i.C&49152)>>14?this.i.j[6]=a:this.i.aa[1]=a};k.qg=function(){return 3==(this.i.C&49152)>>14?this.i.j[6]:this.i.aa[3]};k.Ih=function(a){3==(this.i.C&49152)>>14?this.i.j[6]=a:this.i.aa[3]=a};k.Yf=function(a){return this.i.tc[a-65504>>1]};k.rh=function(a,b){this.i.tc[b-65504>>1]=a};k.te=function(a){return 65520==a?(Ad(this.G)>>6)-1:0};
k.ye=function(){};k.Og=function(){return 1};k.fi=function(){};k.Xf=function(){return this.i.S};k.qh=function(){this.i.S=0};k.dg=function(){return this.i.qc};k.xh=function(a,b){b&1||(a&=255);this.i.qc=a};k.ig=function(a,b){return b?0:this.i.mb};k.Ah=function(a){be(this.i,a)};k.Ng=function(a,b){return b?0:this.i.ya&65280};k.ei=function(a){this.i.ya=a|255};k.ng=function(){return ce(this.i)};k.Fh=function(a){de(this.i,a)};k.xe=function(a,b){F(this)&&G(this,"writeIgnored("+x(b)+"): "+x(a),!0,!0)};
var M={},Kd=(M[61568]=[null,null,L.prototype.Tg,L.prototype.ki,"UNIMAP",64,1170],M[62592]=[null,null,L.prototype.Mg,L.prototype.di,"SIPDR",8,1145,128],M[62608]=[null,null,L.prototype.Kg,L.prototype.bi,"SDPDR",8,1145,128],M[62624]=[null,null,L.prototype.Lg,L.prototype.ci,"SIPAR",8,1145,128],M[62640]=[null,null,L.prototype.Jg,L.prototype.ai,"SDPAR",8,1145,128],M[62656]=[null,null,L.prototype.bg,L.prototype.vh,"KIPDR",8,1140,128],M[62672]=[null,null,L.prototype.$f,L.prototype.th,"KDPDR",8,1145,128],
M[62688]=[null,null,L.prototype.ag,L.prototype.uh,"KIPAR",8,1140,128],M[62704]=[null,null,L.prototype.Zf,L.prototype.sh,"KDPAR",8,1145,128],M[62798]=[null,null,L.prototype.hg,L.prototype.zh,"MMR3",1,1145,128],M[65382]=[null,null,L.prototype.cg,L.prototype.wh,"LKS"],M[65402]=[null,null,L.prototype.eg,L.prototype.yh,"MMR0",1,1140,128],M[65404]=[null,null,L.prototype.fg,L.prototype.xe,"MMR1",1,1145,128],M[65406]=[null,null,L.prototype.gg,L.prototype.xe,"MMR2",1,1140,128],M[65408]=[null,null,L.prototype.Sg,
L.prototype.ji,"UIPDR",8,1140,128],M[65424]=[null,null,L.prototype.Qg,L.prototype.hi,"UDPDR",8,1145,128],M[65440]=[null,null,L.prototype.Rg,L.prototype.ii,"UIPAR",8,1140,128],M[65456]=[null,null,L.prototype.Pg,L.prototype.gi,"UDPAR",8,1145,128],M[65472]=[null,null,L.prototype.Qb,L.prototype.Ub,"R0SET0"],M[65473]=[null,null,L.prototype.Qb,L.prototype.Ub,"R1SET0"],M[65474]=[null,null,L.prototype.Qb,L.prototype.Ub,"R2SET0"],M[65475]=[null,null,L.prototype.Qb,L.prototype.Ub,"R3SET0"],M[65476]=[null,null,
L.prototype.Qb,L.prototype.Ub,"R4SET0"],M[65477]=[null,null,L.prototype.Qb,L.prototype.Ub,"R5SET0"],M[65478]=[null,null,L.prototype.og,L.prototype.Gh,"R6KERNEL"],M[65479]=[null,null,L.prototype.rg,L.prototype.Jh,"R7KERNEL"],M[65480]=[null,null,L.prototype.Rb,L.prototype.Vb,"R0SET1",1,1145],M[65481]=[null,null,L.prototype.Rb,L.prototype.Vb,"R1SET1",1,1145],M[65482]=[null,null,L.prototype.Rb,L.prototype.Vb,"R2SET1",1,1145],M[65483]=[null,null,L.prototype.Rb,L.prototype.Vb,"R3SET1",1,1145],M[65484]=
[null,null,L.prototype.Rb,L.prototype.Vb,"R4SET1",1,1145],M[65485]=[null,null,L.prototype.Rb,L.prototype.Vb,"R5SET1",1,1145],M[65486]=[null,null,L.prototype.pg,L.prototype.Hh,"R6SUPER",1,1145],M[65487]=[null,null,L.prototype.qg,L.prototype.Ih,"R6USER",1,1145],M[65504]=[null,null,L.prototype.Yf,L.prototype.rh,"CTRL",8,1170],M[65520]=[null,null,L.prototype.te,L.prototype.ye,"LSIZE",1,1170],M[65522]=[null,null,L.prototype.te,L.prototype.ye,"HSIZE",1,1170],M[65524]=[null,null,L.prototype.Og,L.prototype.fi,
"SYSID",1,1170],M[65526]=[null,null,L.prototype.Xf,L.prototype.qh,"ERR",1,1170],M[65528]=[null,null,L.prototype.dg,L.prototype.xh,"MBR",1,1170],M[65530]=[null,null,L.prototype.ig,L.prototype.Ah,"PIR"],M[65532]=[null,null,L.prototype.Ng,L.prototype.ei,"SLR"],M[65534]=[null,null,L.prototype.ng,L.prototype.Fh,"PSW"],M);
mb(function(){for(var a=Fb(document,C,"device"),b=0;b<a.length;b++){var c=a[b];var d=Mb(c);switch(d.type){case "default":d=new L(d);Eb(d,c);break;case "pc11":d=new ee(d);Eb(d,c);break;case "rl11":d=new fe(d);Eb(d,c);break;case "rk11":d=new N(d);Eb(d,c);break;case "rx11":d=new ge(d),Eb(d,c)}}});
function H(a,b,c,d,e,f){this.G=a;this.id=he+=2;this.g=null;this.M=b;this.Sb=c;this.size=d||0;this.type=e||ie;this.L=e==je;this.i=this.controller=null;this.zb=this.v=this.zd;this.pa=this.D=this.Ad;this.Cb=this.H=this.Tb;this.Db=this.F=this.Sc;this.J=this.u=0;qd(this);this.eb=this.Cf=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.g=a[0],ke(this,f.vf);else if(ac)this.A=new ArrayBuffer(this.size),this.C=new DataView(this.A,0,this.size),this.j=new Uint8Array(this.A,0,this.size),this.I=new Uint16Array(this.A,
0,this.size>>1),this.g=new Int32Array(this.A,0,this.size>>2),ke(this,le?me:ne);else{a=this.g=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;ke(this,oe)}else ke(this)}k=H.prototype;k.save=function(){var a;if(this.controller)var b=null;else if(ac)for(b=Array(this.size>>2),a=0;a<b.length;a++)b[a]=this.C.getInt32(a<<2,!0);else b=this.g;return b};
k.restore=function(a){if(this.controller)return null==a;if(a&&this.size==a.length<<2){var b;if(ac)for(b=0;b<a.length;b++)this.C.setInt32(b<<2,a[b],!0);else this.g=a;return this.eb=!0}return!1};function ke(a,b){b||(b=pe);qe(a,b,void 0);re(a,b,void 0)}function qe(a,b,c){c&&a.J||(a.zb=b[0]||a.zd,a.pa=b[2]||a.Ad);if(c||void 0===c)a.v=b[0]||a.zd,a.D=b[2]||a.Ad}function re(a,b,c){c&&a.u||(a.Cb=!a.L&&b[1]||a.Tb,a.Db=!a.L&&b[3]||a.Sc);if(c||void 0===c)a.H=b[1]||a.Tb,a.F=b[3]||a.Sc}
k.xb=function(a,b){b?0===this.u++&&re(this,se,!1):0===this.J++&&qe(this,se,!1)};function te(a,b){b?0===--a.u&&(a.Cb=a.L?a.Tb:a.H,a.Db=a.L?a.Sc:a.F):0===--a.J&&(a.zb=a.v,a.pa=a.D)}function qd(a,b,c){a.i=b;a.J=a.u=0;c&&((a.J=c.J)&&qe(a,se,!1),(a.u=c.u)&&re(a,se,!1))}k.zd=function(a,b){this.i&&F(this.i,64)&&G(this.i,"attempt to read invalid address "+J(this.i,b),!0);Ed(this.G,b,32,2);return 255};
k.Tb=function(a,b,c){this.i&&F(this.i,64)&&G(this.i,"attempt to write "+J(this.i,b)+" to invalid addresses "+J(this.i,c),!0);Ed(this.G,c,32,4)};k.Ad=function(a,b){return this.zb(a++,b++)|this.zb(a,b)<<8};k.Sc=function(a,b,c){this.Cb(a++,b&255,c++);this.Cb(a,b>>8,c)};k.Vf=function(a){return this.g[a>>2]>>>((a&3)<<3)&255};k.Zg=function(a,b){ec&&a&1&&Ed(this.G,b,64,2);b=a>>2;a=(a&3)<<3;var c=this.g[b]>>a;return 24>a?c&65535:c&255|(this.g[b+1]&255)<<8};
k.oh=function(a,b){var c=a>>2;a=(a&3)<<3;this.g[c]=this.g[c]&~(255<<a)|b<<a;this.eb=!0};k.oi=function(a,b,c){ec&&a&1&&Ed(this.G,c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.g[c]=this.g[c]&~(65535<<a)|b<<a:(this.g[c]=this.g[c]&16777215|b<<24,c++,this.g[c]=this.g[c]&-256|b>>8);this.eb=!0};k.Tf=function(a,b){this.i&&null!=this.M&&ue(this.i,this.M+a);return this.v(a,b)};k.Vg=function(a,b){this.i&&null!=this.M&&ue(this.i,this.M+a,2);return this.D(a,b)};
k.mh=function(a,b,c){this.i&&null!=this.M&&ve(this.i,this.M+a);this.L?this.Tb(a,b,c):this.H(a,b,c)};k.mi=function(a,b,c){this.i&&null!=this.M&&ve(this.i,this.M+a,2);this.L?this.Tb(a,b,c):this.F(a,b,c)};k.Sf=function(a){return this.j[a]};k.Uf=function(a,b){a=this.j[a];this.i&&F(this.i,64)&&G(this.i,"Memory.readByte("+J(this.i,b)+"): "+J(this.i,a),!0);return a};k.Ug=function(a,b){ec&&a&1&&Ed(this.G,b,64,2);return this.C.getUint16(a,!0)};
k.Yg=function(a,b){ec&&a&1&&Ed(this.G,b,64,2);a=!fc&&a&1?this.j[a]|this.j[a+1]<<8:this.I[a>>1];this.i&&F(this.i,64)&&G(this.i,"Memory.readWord("+J(this.i,b)+"): "+J(this.i,a),!0);return a};k.lh=function(a,b){this.j[a]=b;this.eb=!0};k.nh=function(a,b,c){this.j[a]=b;this.eb=!0;this.i&&F(this.i,64)&&G(this.i,"Memory.writeByte("+J(this.i,c)+","+J(this.i,b)+")",!0)};k.li=function(a,b,c){ec&&a&1&&Ed(this.G,c,64,4);this.C.setUint16(a,b,!0);this.eb=!0};
k.ni=function(a,b,c){ec&&a&1&&Ed(this.G,c,64,4);!fc&&a&1?(this.j[a]=b,this.j[a+1]=b>>8):this.I[a>>1]=b;this.eb=!0;this.i&&F(this.i,64)&&G(this.i,"Memory.writeWord("+J(this.i,c)+","+J(this.i,b)+")",!0)};var ie=0,Bd=1,je=2,sd=4,wd=["NONE","RAM","ROM","VID","H/W"],he=0,pe=[],oe=[H.prototype.Vf,H.prototype.oh,H.prototype.Zg,H.prototype.oi],se=[H.prototype.Tf,H.prototype.mh,H.prototype.Vg,H.prototype.mi];
if(ac)var ne=[H.prototype.Sf,H.prototype.lh,H.prototype.Ug,H.prototype.li],me=[H.prototype.Uf,H.prototype.nh,H.prototype.Yg,H.prototype.ni];var we;if(ac){var xe=new ArrayBuffer(2);(new DataView(xe)).setUint16(0,256,!0);we=256===(new Uint16Array(xe))[0]}else we=!1;var le=we;
function ye(a,b){B.call(this,"CPU",a,2);b=+a.cycles||b;var c=+a.multiplier||1;this.fd=0;this.Uc=b;this.kb=c;this.hd=Math.round(this.Uc/1E4)/100;this.tb=this.hd*this.kb;this.jd=this.mc=this.ob=this.Vc=0;this.flags.X=this.flags.Nc=!1;this.flags.ra=a.autoStart;"string"==typeof this.flags.ra&&(this.flags.ra="true"==this.flags.ra);this.flags.Kb=!1;this.kc=this.Jb=0;this.lc=+a.csStart;this.Ib=+a.csInterval;this.Lb=+a.csStop;this.ha=[];this.Wd=this.eh.bind(this);this.lb=this.Ja=this.jb=this.g=this.ka=this.Ia=
this.jc=this.ib=this.Nb=this.kd=this.sb=0;this.sa=null;E(this)}u(ye,B);k=ye.prototype;k.Ba=function(a,b,c,d){this.L=a;this.G=b;this.H=d;this.sa=a.u;for(a=0;a<ze.length;a++)(b=this.J[ze[a]])&&this.L.va("",ze[a],b);E(this)};k.reset=function(){};k.save=function(){return null};k.restore=function(){return!1};
k.Da=function(a,b){var c=Ae(this.L,"autoStart");null!=c?this.flags.ra="true"==c?!0:"false"==c?!1:!!c:null==this.flags.ra&&(this.flags.ra=!this.H&&void 0===this.J.run);if(!b){if(a){Be(this);if(!this.restore(a))return!1;Ce(this)}else this.reset();this.H?(a=this.H,b=this.flags.ra,a.Ia=!0,a.B("Type ? for help with PDPjs Debugger commands"),De(a),b||Ee(a),a.ya&&(b=a.ya,a.ya=null,Fe(a,b))):this.status("No debugger detected");this.flags.ra||this.B("CPU will not be auto-started "+(this.sa?"(click Run to start)":
"(type 'go' to start)"))}return!0};k.Ca=function(a){return a?this.save():!0};k.ra=function(){return this.flags.X?!0:this.flags.ra?Mc(this):!1};k.me=function(){return 0};function Ce(a){void 0===a.lc&&(a.lc=0);void 0===a.Ib&&(a.Ib=-1);void 0===a.Lb&&(a.Lb=-1);a.flags.Kb=0<=a.lc&&0<a.Ib;a.flags.Kb&&(a.kc=0,a.Jb=a.lc-a.lb)}
function Rc(a,b){if(a.flags.Kb){var c=!1;a.kc=a.kc+a.me()|0;a.Jb-=b;0>=a.Jb&&(a.Jb+=a.Ib,c=!0);0<=a.Lb&&a.Lb<=Ge(a)&&(a.Ib=a.Lb=-1,Ce(a),Nc(a),c=!0);c&&a.B(Ge(a)+" cycles: checksum="+z(a.kc))}}
k.va=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.J[b]=c,!0;case "run":return this.J[b]=c,c.onclick=function(){var e;if(e=d.L)if(e=d.L,e.flags.da)e=!0;else{var f=null,g,h=Nb(e.id);for(g=0;g<h.length&&(f=h[g],f===e||f.flags.ready);g++);if(g==h.length)for(g=0;g<h.length&&(f=h[g],f===e||f.flags.da);g++);g==h.length&&(f=e);A("The "+f.type+" component ("+f.id+") is not "+(f.flags.ready?"powered yet":"ready yet"+(f.Ic?" (waiting for notification)":""))+".");e=!1}e&&(d.flags.X?
Nc(d):Mc(d))},!0;case "speed":return this.J[b]=c,!0;case "setSpeed":return this.J[b]=c,c.onclick=function(){He(d,d.kb<<1,!0)},c.textContent=this.tb.toFixed(2)+"Mhz",!0}return!1};function Qc(a,b,c){a.lb+=b;c&&(a.jb=a.g=a.ka=0)}function Ie(a,b){var c=1;b&&1<a.kb&&a.sb&&(c=a.sb/a.hd);a.jd=Math.round(1E3/Je);a.mc=Math.floor(a.Uc/Je*c);b||(a.ob=a.mc);a.Vc=0}function Ge(a){return a.lb+a.Ja+a.jb-a.g}function Be(a){a.sb=0;a.kd=0;a.lb=a.Ja=a.jb=a.g=a.ka=0;Ce(a);He(a,1)}
function He(a,b,c){var d=!1;if(void 0!==b){.8>a.sb/a.tb?b=1:d=!0;a.kb=b;b=a.hd*a.kb;if(a.tb!=b){a.tb=b;b=a.tb.toFixed(2)+"Mhz";var e=a.J.setSpeed;e&&(e.textContent=b);a.B("target speed: "+b)}c&&a.L&&Ke(a.L)}Qc(a,a.Ja);a.Ja=0;a.Ia=Bb();a.ib=0;Ie(a);return d}function Gd(a,b){var c=a.ha.length;a.ha.push([-1,b]);return c}function Id(a,b,c,d){0<=b&&b<a.ha.length&&(d||0>a.ha[b][0])&&(c=a.Uc*a.kb/1E3*c|0,a.flags.X&&(c+=Le(a)),a.ha[b][0]=c)}
function Me(a,b){for(var c=a.ha.length-1;0<=c;c--){var d=a.ha[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function Pc(a,b){for(var c=a.ha.length-1;0<=c;c--){var d=a.ha[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function Le(a,b){var c=a.jb-=a.g;a.g=a.ka=0;b&&(a.jb=0);return c}
k.eh=function(){if(this.flags.X){this.Vc>=this.Uc&&Ie(this,!0);this.Nb=0;this.jc=Bb();if(this.ib){var a=this.jc-this.ib;a>this.jd&&(this.Ia+=a,this.Ia>this.jc&&(this.Ia=this.jc))}try{do{var b=Me(this,this.flags.Kb?1:this.mc);try{this.yc(b)}catch(e){if("number"!=typeof e)throw e;}b=Le(this,!0);this.Nb+=b;this.Ja+=b;Rc(this,b);Pc(this,b);this.ob-=b;if(0>=this.ob){this.ob+=this.mc;++this.kd>=Ne&&(this.L&&Sc(this.L,void 0),this.kd=0);break}}while(this.flags.X)}catch(e){Nc(this);this.L&&this.L.stop(Bb(),
Ge(this));Wb(this,e.stack||e.message);return}if(this.flags.X){a=setTimeout;b=this.Wd;this.ib=Bb();var c=this.jd;this.Nb&&(c=Math.round(c*this.Nb/this.mc));c-=this.ib-this.jc;var d=this.ib-this.Ia;d&&(this.sb=Math.round(this.Ja/(10*d))/100,864E5<=d&&(this.lb=0,He(this)));if(0>c||this.sb<this.tb)-1E3>c&&(this.Ia-=c),c=0;this.Vc+=this.Nb;this.ib+=c;a(b,c)}}};
function Mc(a,b){if(Xb(a))return!1;if(a.flags.X)return a.B(a.toString()+" busy"),!1;He(a);a.flags.X=!0;a.flags.Nc=!0;var c=a.J.run;c&&(c.textContent="Halt");a.L&&(b&&Ke(a.L,!0),a.L.start(a.Ia,Ge(a)));a.H||a.status("Started");setTimeout(a.Wd,0);return!0}k.yc=function(){return 0};function Nc(a,b){var c=!1;if(a.flags.X){Le(a);Qc(a,a.Ja);a.Ja=0;a.flags.X=!1;if(c=a.J.run)c.textContent="Run";a.L&&a.L.stop(Bb(),Ge(a));c=!0;a.H||a.status("Stopped")}a.flags.complete=b;return c}
var Je=30,Ne=15,ze=["power","reset"];
function Oe(a){var b=+a.model||1170;ye.call(this,a,6666667);this.model=b;this.Pc=+a.addrReset||0;this.Ka=this.C=this.P=this.F=this.I=this.N=this.K=0;this.j=this.ta=this.aa=[];this.O=this.D=this.Ga=this.tc=[];this.Oa=this.R=this.Qd=this.ub=this.vb=this.wb=this.Sa=this.S=this.qc=this.mb=this.ya=this.U=this.rc=this.sc=this.Z=this.u=0;this.Td=[4,2,0,1];this.uc=0;this.Ud=255;1120>=this.model?(this.Xd=Pe.bind(this),this.Hb=this.zf,this.uc=8,this.Ud=-1,this.ce=255,this.$d=0):(this.Xd=Qe.bind(this),this.Hb=
this.Af,this.ce=~(1792|(1140>=this.model?2048:0))&65535,this.$d=1140<this.model?2048:0);this.wc=this.vc=this.qa=0;this.T=null;this.ic=[];this.ec=this.Xc=this.le;this.fc=this.Yc=this.pe;this.Oc=this.$c=this.ve;this.hc=this.ad=this.we;this.Ha=this.rb=this.nc=this.oc=0;this.xa=this.oe;this.pa=this.Bd;this.Db=this.Gd;this.A=this.v=this.Qc=this.W=this.ba=0;this.flags.complete=!1}u(Oe,ye);k=Oe.prototype;
k.Ba=function(a,b,c,d){ye.prototype.Ba.call(this,a,b,c,d);this.Xc=b.Md.bind(b);this.Yc=b.xc.bind(b);this.$c=b.Nd.bind(b);this.ad=b.Zb.bind(b)};k.Da=function(a,b){for(var c=192,d=0;d<this.ic.length;d++){var e=this.ic[d];0>e.Bb&&(e.Bb=c,c+=4)}return ye.prototype.Da.call(this,a,b)};
k.reset=function(){this.status("Model %d",this.model);this.flags.X&&Nc(this);this.F=65536;this.I=32768;this.N=65535;this.K=32768;this.C=15;this.j=[0,0,0,0,0,0,0,this.Pc,-1,-2,-3,-4,-5,-6,-7,-8];this.ta=[0,0,0,0,0,0];this.aa=[0,0,0,0];this.O=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.D=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,
65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Ga=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.tc=[0,0,0,0,0,0,0,0];this.P=0;this.Ka=-1;this.A=this.v=this.Qc=this.W=this.ba=this.u=this.qc=0;Kc(this);Be(this);this.flags.error=!1;ye.prototype.reset.call(this)};function Kc(a){a.U=0;a.rc=0;a.sc=0;a.Z=0;a.S=0;a.mb=0;a.ya=255;a.ub=0;a.vb=0;a.wb=0;a.Sa=262143;a.Oa=a.j[7];a.R=0;a.T=null;a.G&&(Re(a),a.Qd=Ad(a.G))}
function Re(a){a.ec=a.Xc;a.fc=a.Yc;a.Oc=a.$c;a.hc=a.ad;a.nc&&(a.ec=a.le,a.fc=a.pe);a.oc&&(a.Oc=a.ve,a.hc=a.we);a.ub?(a.Ha=65536,a.rb=a.Z&16?4186112:253952,a.xa=a.oe,a.pa=a.nc?a.Xg:a.Bd,a.Db=a.oc?a.ri:a.Gd,td(a.G,a.Z&16?22:18)):(a.Ha=0,a.rb=57344,a.xa=a.Df,a.pa=a.nc?a.Wg:a.ue,a.Db=a.oc?a.pi:a.ze,td(a.G,16))}function Od(a){var b=a.U;b&57344||(b=b&-3199|a.vb<<5|a.wb<<1);return b}
function Pd(a,b){b&=-3073;if(a.U!=b){b&57344&&!(a.U&57344)&&(a.rc=a.R>>16&65535,a.sc=a.R&65535);a.U=b;a.vb=(b&96)>>5;a.wb=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.ub!=c&&(a.ub=c,Re(a))}}function Qd(a){a.U&57344||(a.rc=a.R>>16&65535);a=a.rc;a&65280&&(a=(a<<8|a>>8)&65535);return a}function Rd(a){a.U&57344||(a.sc=a.R&65535);return a.sc}function Sd(a,b){1170>a.model&&(b&=-49);a.Z!=b&&(a.Z=b,a.Sa=b&16?4194303:262143,Re(a))}
function Se(a,b,c,d){a.Pc=b;Jc(a,b);de(a,0);a.G.reset();Kc(a);if(c){a.j[0]=d||0;for(b=1;5>=b;b++)a.j[b]=0;a.j[6]=1024;a.flags.da?a.flags.X||Mc(a):a.flags.ra=!0}else a.H&&a.flags.da?Nc(a)||a.L.flags.reset||(De(a.H),Sc(a.L,-1)):!1===c&&Nc(a);!a.flags.X&&a.sa&&a.sa.stop()}k.me=function(){return 0};
k.save=function(){var a=new Cc(this);a.set(0,[this.j,this.ta,this.aa,this.O,this.D,this.Ga,this.tc,this.S,this.qc,this.mb,this.ya,this.vb,this.wb,this.Oa,this.u,this.R,this.Ka,this.vc,this.wc,this.Pc]);a.set(1,[ce(this),Od(this),Qd(this),Rd(this),this.Z]);a.set(2,[this.lb,this.kb,this.flags.ra]);for(var b=a.set,c=[],d=this.T;d;)c.push(d.Bb),d=d.next;b.call(a,3,c);b=a.set;c=[];for(d=0;d<this.ha.length;d++)c.push(this.ha[d][0]);b.call(a,4,c);return a.data()};
k.restore=function(a){var b=ba(a[0]);this.j=b.next().value;this.ta=b.next().value;this.aa=b.next().value;this.O=b.next().value;this.D=b.next().value;this.Ga=b.next().value;this.tc=b.next().value;this.S=b.next().value;this.qc=b.next().value;this.mb=b.next().value;this.ya=b.next().value;this.vb=b.next().value;this.wb=b.next().value;this.Oa=b.next().value;this.u=b.next().value;this.R=b.next().value;this.Ka=b.next().value;this.vc=b.next().value;this.wc=b.next().value;this.Pc=b.next().value;b=a[1];de(this,
b[0]);Pd(this,b[1]);this.rc=b[2];this.sc=b[3];Sd(this,b[4]);b=a[2];this.lb=b[0];He(this,b[1]);this.flags.ra=b[2];b=a[3];for(var c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.ic.length;d++){var e=this.ic[d];if(e.Bb===b[c]){d=e;break a}}d=null}d&&(d.next=this.T,this.T=d)}a=a[4];for(b=0;b<this.ha.length&&b<a.length;b++)this.ha[b][0]=a[b];return!0};function Te(a){return a.F&65536?1:0}function Ue(a){return a.I&32768?2:0}function Ve(a){return a.N&65535?0:4}function We(a){return a.K&32768?8:0}
function Xe(a,b){var c=a.j[7];a.j[7]=c+b&65535;return c}function Ye(a,b,c){c&&(Jc(a,a.j[7]+(b<<24>>23)),a.g-=2);a.g-=3}function Jc(a,b){a.j[7]=b&65535}function Jd(a,b,c,d){b={Bb:b,priority:c,message:d||0,name:oc[b],next:null};a.ic.push(b);return b}function Ze(a,b){var c=a.T;if(c==b)a.T=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.T&&(a.u|=1)}
function Hd(a,b){if(b){if(b!=a.T){var c=a.T;if(!c||c.priority<=b.priority)b.next=c,a.T=b;else{do{var d=c.next;if(!d||d.priority<=b.priority){b.next=d;c.next=b;break}c=d}while(c)}}a.u|=1;b.message&&F(a,b.message|16)&&G(a,"setIRQ(vector="+x(b.Bb)+",priority="+b.priority+")",!0,!0)}}function Nd(a,b){b&&(Ze(a,b),b.message&&F(a,b.message|16)&&G(a,"clearIRQ(vector="+x(b.Bb)+",priority="+b.priority+")",!0,!0))}
function $e(a){return a.u&64?(K(a,168,64,-6),!0):a.u&32?(K(a,4,32,-5),!0):a.u&16?(K(a,12,16,-7),!0):!1}function ce(a){return a.C=a.C&63728|We(a)|Ve(a)|Ue(a)|Te(a)}function de(a,b){b&=a.ce;a.K=b<<12;a.N=~b&4;a.I=b<<14;a.F=b<<16;if((b^a.C)&a.$d)for(var c=a.ta.length;0<=--c;){var d=a.j[c];a.j[c]=a.ta[c];a.ta[c]=d}a.P=b>>14&3;c=a.C>>14&3;a.P!=c&&(a.aa[c]=a.j[6],a.j[6]=a.aa[a.P]);a.C=b;a.u&=-3;a.u|=a.T?2:1}function be(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.u|=1}a.mb=b}
k.Ea=function(a){this.K=this.N=a;this.I=0};k.nb=function(a,b){this.K=this.N=this.F=a;this.I=b||0};function af(a,b){a.K=a.N=a.F=b;a.I=a.K^a.F>>1}function bf(a,b,c,d){a.K=a.N=a.F=b;a.I=(c^d)&(d^b)}
function K(a,b,c,d){if(!a.qa){0>a.Ka?a.Ka=ce(a):a.P||(d=-4);-4==d&&(a.u&256&&(d=-1),a.u|=256,a.S|=4,a.j[6]=b=4);if(-1!=d){a.R=b|4143316992;a.P=0;var e=a.pa(b|a.Ha),f=a.pa(b+2&65535|a.Ha);de(a,f&-12289|a.Ka>>2&12288);cf(a,a.Ka);cf(a,a.j[7]);Jc(a,e)}a.g-=5;a.u&=~(c|19);a.u|=129;a.Ka=-1;a.vc=d;a.wc=b;-1==d&&Nc(a);if(-4<=d)throw b;}}function df(a){var b=ef(a),c=ef(a);a.C&49152&&(c=c&-225|a.C&63712);Jc(a,b);de(a,c);a.u&=-17}
function ff(a,b){var c=b>>13&31;31>c&&(b=a.Z&32?a.Ga[c]+(b&8191)&4194303:b&-3932161);return b}function gf(a,b,c){var d=[];if(c){c=ff(a,b);var e=b>>13&31;d.push(c);d.push(e);a.Z&32&&(d.push(a.Ga[e]),d.push(b&8191))}else if(a.ub){e=a.P<<1;var f=b>>13;7<f&&(e|=1);a.Z&a.Td[a.P]||(f&=7);b&=8191;var g=a.O[a.P][f]<<6;c=g+b&a.Sa;3932160<=c&&(c=ff(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.Sa)}else c=b&65535,57344<=c&&(c|=a.rb),d.push(c);return d}
function ed(a,b,c){if(!(c&a.ub)){var d=b&65535;57344<=d&&(d|=a.rb);return d}var e=b>>13;a.Z&a.Td[a.P]||(e&=7);var f=a.D[a.P][e];d=(a.O[a.P][e]<<6)+(b&8191)&a.Sa;3932160<=d&&(d=ff(a,d));if(a.qa)return d;d>=a.Qd&&d<a.rb?(a.S|=32,K(a,4,0,d)):d&1&&!(c&1)&&(a.S|=64,K(a,4,0,d));var g=0;switch(f&7){case 1:g=4096;case 2:f|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:f|=c&4?192:128;break;default:g=32768}32512!=(f&32520)&&(f&8?f&32512&&(b&8128)<(f>>2&8128)&&(g|=16384):(b&8128)>(f>>2&8128)&&
(g|=16384));a.D[a.P][e]=f;if(d!=(4194170&a.Sa)||a.P)a.vb=a.P,a.wb=e;g&&(g&57344&&(0<=a.Ka&&(g|=128),a.U&57344||(g|=a.U&4096|a.vb<<5|a.wb<<1,Pd(a,a.U&-61695|g&61694)),K(a,168,64,-2)),a.U&61440||!(d<(4191360&a.Sa)||d>(4194239&a.Sa))||(a.U|=4096,a.U&512&&(a.u|=64)));return d}function ef(a){var b=a.pa(a.j[6]|a.Ha);a.j[6]=a.j[6]+2&65535;return b}function cf(a,b){var c=a.j[6]-2&65535;a.j[6]=c;a.R=a.R&65535|(a.R&-65536)<<8|16121856;a.u&256||a.Hb(4,-2,c);a.Db(c,b)}
function hf(a,b,c,d){var e=d&8?0:a.Ha;switch(b){case 0:return K(a,4,0,-3),0;case 1:return 6==c&&a.Hb(d,0,a.j[6]),a.g-=3,7==c?a.j[c]:a.j[c]|e;case 2:var f=2;var g=a.j[c];6==c&&a.Hb(d,f,g);7!=c&&(g|=e,6>c&&d&1&&(f=1));a.g-=3;break;case 3:f=2;g=a.j[c];7!=c&&(g|=e);g=a.pa(g);g|=e;a.g-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);g=a.j[c]+f&65535;6==c&&a.Hb(d,f,g);7!=c&&(g|=e);a.g-=4;break;case 5:f=-2;g=a.j[c]-2&65535;7!=c&&(g|=e);g=a.pa(g)|e;a.g-=8;break;case 6:return g=a.pa(Xe(a,2)),g=g+a.j[c]&65535,6==c&&a.Hb(d,
0,g),a.g-=6,g|e;case 7:return g=a.pa(Xe(a,2)),g=g+a.j[c]&65535,g=a.pa(g|a.Ha),a.g-=10,g|e}a.j[c]=a.j[c]+f&65535;a.R=a.R&65535|(a.R&-65536)<<8|(f<<3&248|c)<<16;return g}k.zf=function(a,b,c){!this.P&&0>=b&&c<=this.ya&&(this.u|=32)};k.Af=function(a,b,c){this.P||(65534<=c&&(c|=-65536),a&4&&c<=this.ya&&(c<=this.ya-32?K(this,4,0,-4):(this.S|=8,this.u|=32)))};k.le=function(a){this.H&&ue(this.H,a,1);return this.Xc(a)};k.pe=function(a){this.H&&ue(this.H,a,2);return this.Yc(a)};
k.ve=function(a,b){this.H&&ve(this.H,a,1);this.$c(a,b)};k.we=function(a,b){this.H&&ve(this.H,a,2);this.ad(a,b)};function gd(a,b){a.qa++;b=a.G.xc(ed(a,b,2));a.qa--;return b}function jf(a,b){(b?--a.oc:--a.nc)||Re(a)}k.Df=function(a,b,c){return hf(this,a,b,c)};k.oe=function(a,b,c){return ed(this,hf(this,a,b,c),c)};k.ue=function(a){return this.G.xc(this.Oa=a)};k.Wg=function(a){this.H&&ue(this.H,a,2);return this.ue(a)};k.Bd=function(a){return this.G.xc(this.Oa=ed(this,a,2))};
k.Xg=function(a){this.H&&ue(this.H,a,2);return this.Bd(a)};k.ze=function(a,b){this.G.Zb(this.Oa=a,b)};k.pi=function(a,b){this.H&&ve(this.H,a,2);this.ze(a,b)};k.Gd=function(a,b){this.G.Zb(this.Oa=ed(this,a,4),b)};k.ri=function(a,b){this.H&&ve(this.H,a,2);this.Gd(a,b)};function kf(a,b,c){var d=a.v=b&7;(b=a.A=(b&56)>>3)?(d=hf(a,b,d,2),c&65536||61440!==(a.C&61440)&&(d&=65535),a.P=a.C>>12&3,c=a.pa(d|c&a.Ha),a.P=a.C>>14&3):c=6!=d||(a.C>>2&12288)===(a.C&12288)?a.j[d]:a.aa[a.C>>12&3];return c}
function lf(a,b,c,d){a.R=a.R&65535|1441792;var e=a.v=b&7;(b=a.A=(b&56)>>3)?(e=hf(a,b,e,4),c&65536||(e&=65535),a.P=a.C>>12&3,e=ed(a,e|c&65536,4),a.P=a.C>>14&3,a.hc(e,d)):6!=e||(a.C>>2&12288)===(a.C&12288)?a.j[e]=d:a.aa[a.C>>12&3]=d}function Df(a,b){b>>=6;var c=a.ba=b&7;return(b=a.W=(b&56)>>3)?a.ec(a.xa(b,c,3)):a.j[c+a.uc]&a.Ud}function Ef(a,b){var c;b>>=6;var d=a.ba=b&7;(b=a.W=(b&56)>>3)?c=a.fc(a.xa(b,d,2)):c=a.j[d+a.uc];return c}function Ff(a,b){var c=a.v=b&7;b=a.A=(b&56)>>3;return hf(a,b,c,8)}
function Gf(a,b){var c=a.v=b&7;return(b=a.A=(b&56)>>3)?a.ec(a.xa(b,c,3)):a.j[c]&255}function Hf(a,b){var c,d=a.v=b&7;(b=a.A=(b&56)>>3)?c=a.fc(a.xa(b,d,2)):c=a.j[d];return c}function If(a,b,c,d){var e=a.v=b&7;(b=a.A=(b&56)>>3)?(e=a.Qc=a.xa(b,e,7),c=0>c?a.j[-c-1]&255:c,a.Oc(e,d.call(a,c,a.ec(e))),e&1&&a.g--):(b=a.j[e],c=0>c?a.j[-c-1]&255:c,a.j[e]=b&65280|d.call(a,c,b&255))}
function O(a,b,c,d){var e=a.v=b&7;(b=a.A=(b&56)>>3)?(e=a.xa(b,e,6),a.hc(e,d.call(a,0>c?a.j[-c-1]:c,a.fc(e)))):a.j[e]=d.call(a,0>c?a.j[-c-1]:c,a.j[e])}function Jf(a,b,c,d,e){var f=a.v=b&7;(b=a.A=(b&56)>>3)?(d=a.xa(b,f,5),e.call(a,(c=0>c?a.j[-c-1]&255:c)<<8),a.Oc(d,c),d&1&&a.g--):(c?(c=0>c?a.j[-c-1]&255:c,a.j[f]=a.j[f]&~d|c<<24>>24&d):a.j[f]&=~d,e.call(a,c<<8))}
function Kf(a,b,c,d){var e=a.v=b&7;(b=a.A=(b&56)>>3)?(e=a.xa(b,e,4),d.call(a,c=0>c?a.j[-c-1]:c),a.hc(e,c)):(a.j[e]=c=0>c?a.j[-c-1]:c,d.call(a,c))}
k.yc=function(a){this.flags.complete=!0;var b=this.H?Lf(this.H)?1:this.flags.Nc?-1:0:0,c=a?this.flags.Nc?0:1:-1;this.flags.Nc=!1;this.jb=this.g=a;this.u=this.u&-5|(b?4:0);do{if(this.u){if(this.u&4){if(Mf(this.H,this.j[7],c)){Nc(this);break}++b||(this.u&=-5);c||c++}if(a=this.u&11)if(a=!1,this.u&2){var d=160,e=(this.mb&224)>>5,f=this.T&&this.T.priority>e?this.T:null;f&&(d=f.Bb,e=f.priority);e>(this.C&224)>>5?(this.u&8&&(Xe(this,2),this.u&=-9),K(this,d,0,-10),e=!0):e=!1;e&&(f&&Ze(this,f),a=!0);this.T||
this.mb||(this.u&=-3)}else this.u&1&&this.u++;if(a){if(this.u&4&&Mf(this.H,this.j[7],c)){Nc(this);break}if(0>c)break}if(this.u&112&&$e(this)){if(this.u&4&&Mf(this.H,this.j[7],c)){Nc(this);break}if(0>c)break}}this.u=this.u&15|this.C&16;a=this.R=this.j[7];f=this.pa(a);this.j[7]=a+2&65535;this.Xd(f)}while(0<this.g);return this.flags.complete?this.jb-this.g:!1===this.flags.complete?-1:0};mb(function(){for(var a=Fb(document,C,"cpu"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);d=new Oe(d);Eb(d,c)}});
function Nf(a,b){var c=b+a;this.K=this.N=this.F=c;this.I=(a^c)&(b^c);return c&65535}function Of(a,b){var c=b+a,d=c<<8;this.K=this.N=this.F=d;this.I=(a<<8^d)&(b<<8^d);return c&255}function Pf(a,b){a=b<<1;af(this,a);return a&65535}function Qf(a,b){a=b<<1;af(this,a<<8);return a&255}function Rf(a,b){a=b&32768|b>>1|b<<16;af(this,a);return a&65535}function Sf(a,b){a=b&128|b>>1|b<<8;af(this,a<<8);return a&255}function Tf(a,b){a=b&~a;this.Ea(a);return a}function Uf(a,b){a=b&~a;this.Ea(a<<8);return a}
function Vf(a,b){a|=b;this.Ea(a);return a}function Wf(a,b){a|=b;this.Ea(a<<8);return a}function Xf(a,b){a=~b|65536;this.nb(a);return a&65535}function Yf(a,b){a=~b|256;this.nb(a<<8);return a&255}function Zf(a,b){this.K=this.N=a=b-a;this.I=b&(b^a);return a&65535}function $f(a,b){a=b-a;var c=a<<8;b<<=8;this.K=this.N=c;this.I=b&(b^c);return a&255}function ag(a,b){this.K=this.N=a=b+a;this.I=a&(b^a);return a&65535}function bg(a,b){a=b+a;var c=a<<8;this.K=this.N=c;this.I=c&(b<<8^c);return a&255}
function cg(a,b){a=-b;this.nb(a,a&b&32768);return a&65535}function dg(a,b){a=-b;this.nb(a<<8,(a&b&128)<<8);return a&255}function eg(a,b){a=b<<1|this.F>>16&1;af(this,a);return a&65535}function fg(a,b){a=b<<1|this.F>>16&1;af(this,a<<8);return a&255}function gg(a,b){a=(this.F&65536|b)>>1|b<<16;af(this,a);return a&65535}function hg(a,b){a=((this.F&65536)>>8|b)>>1|b<<8;af(this,a<<8);return a&255}function ig(a,b){var c=b-a;bf(this,c,a,b);return c&65535}
function jg(a,b){var c=b-a;bf(this,c<<8,a<<8,b<<8);return c&255}function kg(a,b){this.K=this.N=b&65280;this.I=this.F=0;return(b<<8|b>>8)&65535}function lg(a,b){a^=b;this.Ea(a);return a&65535}function mg(a){O(this,a,Ef(this,a),Nf);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}
function ng(a){var b=Hf(this,a);a=a>>6&7;var c=this.j[a];c&32768&&(c|=4294901760);this.F=this.I=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.F=c<<17-b,c>>=b;else if(b)if(16<b)this.I=c,c=0;else{this.F=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.I=32768)}this.j[a]=c&65535;this.K=this.N=c;this.g-=(this.A?6:7)+b}
function og(a){var b=Hf(this,a);a=a>>6&7;var c=this.j[a]<<16|this.j[a|1];this.F=this.I=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.F=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.F=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.I=32768)):d=c;this.j[a]=d>>16&65535;this.j[a|1]=d&65535;this.K=d>>16;this.N=d>>16|d;this.g-=(this.A?6:7)+b}function pg(a){Ye(this,a,!Te(this))}function qg(a){Ye(this,a,Te(this))}
function rg(a){O(this,a,Ef(this,a),Tf);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}function sg(a){If(this,a,Df(this,a),Uf);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}function tg(a){O(this,a,Ef(this,a),Vf);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}function ug(a){If(this,a,Df(this,a),Wf);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}
function vg(a){var b=Ef(this,a);a=Hf(this,a);this.Ea((0>b?this.j[-b-1]:b)&a);this.g-=this.A?4+(this.ba&&6<=this.v?1:0):(this.W?4:3)+(7==this.v?2:0)}function wg(a){var b=Df(this,a);a=Gf(this,a);this.Ea(((0>b?this.j[-b-1]&255:b)&a)<<8);this.g-=this.A?4+(this.ba&&6<=this.v?1:0):(this.W?4:3)+(7==this.v?2:0)}function xg(a){Ye(this,a,Ve(this))}function yg(a){Ye(this,a,!We(this)==!Ue(this))}function zg(a){Ye(this,a,!Ve(this)&&!We(this)==!Ue(this))}function Ag(a){Ye(this,a,!Te(this)&&!Ve(this))}
function Bg(a){Ye(this,a,Ve(this)||!We(this)!=!Ue(this))}function Cg(a){Ye(this,a,Te(this)||Ve(this))}function Dg(a){Ye(this,a,!We(this)!=!Ue(this))}function Eg(a){Ye(this,a,We(this))}function Fg(a){Ye(this,a,!Ve(this))}function Gg(a){Ye(this,a,!We(this))}function Hg(){K(this,12,0,-9)}function Ig(a){Ye(this,a,!0)}function Jg(a){Ye(this,a,!Ue(this))}function Kg(a){Ye(this,a,Ue(this))}function Lg(a){a&1&&(this.F=0);a&2&&(this.I=0);a&4&&(this.N=1);a&8&&(this.K=0);this.g-=5}
function Mg(a){var b=Ef(this,a);a=Hf(this,a);var c=(b=0>b?this.j[-b-1]:b)-a;bf(this,c,a,b);this.g-=this.A?4+(this.ba&&6<=this.v?1:0):(this.W?4:3)+(7==this.v?2:0)}function Ng(a){var b=Df(this,a);a=Gf(this,a);var c=(b=(0>b?this.j[-b-1]&255:b)<<8)-(a<<=8);bf(this,c,a,b);this.g-=this.A?4+(this.ba&&6<=this.v?1:0):(this.W?4:3)+(7==this.v?2:0)}
function Og(a){var b=Hf(this,a);if(b){a=a>>6&7;var c=this.j[a]<<16|this.j[a|1];this.F=this.I=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.j[a]=d&65535,this.j[a|1]=c-d*b&65535,this.N=d>>16|d,this.K=d>>16):(this.I=32768,this.N=d>>15|d,this.K=c>>16,-1===b&&65534===this.j[a]&&(this.j[a]=this.j[a|1]=1));this.g-=53}else this.N=this.K=0,this.I=32768,this.F=65536,this.g-=7}function Pg(){K(this,24,0,-9);this.g-=20}
function Qg(){this.C&49152?(this.S|=128,K(this,4,0,-8)):(this.sa&&1120==this.model&&this.sa.setData(this.j[0],!0),this.H?Rg(this.H):Nc(this));this.g-=7}function Sg(){K(this,16,0,-9);this.g-=20}var Tg=[0,7,7,10,7,11,9,13];function Ug(a){this.ka=this.g;Jc(this,Ff(this,a));this.g=this.ka-Tg[this.A]}var Vg=[0,14,14,17,14,18,16,20];function Wg(a){this.ka=this.g;var b=Ff(this,a);a=a>>6&7;cf(this,this.j[a]);this.j[a]=this.j[7];Jc(this,b);this.g=this.ka-Vg[this.A]}
var Xg=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function Yg(a){var b=Ef(this,a);this.ka=this.g;Kf(this,a,b,this.Ea);this.g=this.ka-Xg[(this.W?8:0)+this.A]+(7!=this.v||this.A?0:2)}function Zg(a){var b=Df(this,a);Jf(this,a,b,65535,this.Ea);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}var $g=[7,13,13,17,14,18,17,21];
function ah(a){var b=Hf(this,a);a=a>>6&7;b=(b<<16>>16)*(this.j[a]<<16>>16);this.j[a]=b>>16&65535;this.j[a|1]=b&65535;b|=0;this.K=b>>16;this.N=this.K|b;this.I=0;this.F=-32768>b||32767<b?65536:0;this.g-=23}function bh(){this.g-=5}function ch(){this.C&49152||(this.G.reset(),Kc(this),this.sa&&this.sa.setData(this.j[0],!0));this.g-=667}function dh(a){if(a&8)Q.call(this,a);else{var b=ef(this);a&=7;7==a?Jc(this,b):(Jc(this,this.j[a]),this.j[a]=b);this.g-=9}}function eh(){df(this);this.g-=13}
function fh(a){a&1&&(this.F=65536);a&2&&(this.I=32768);a&4&&(this.N=0);a&8&&(this.K=32768);this.g-=5}function gh(a){var b=(a&448)>>6;if(this.j[b]=this.j[b]-1&65535)Jc(this,this.j[7]-((a&63)<<1)),this.g+=1;this.g-=6}function hh(a){O(this,a,Ef(this,a),ig);this.g-=this.A?9+(this.ba&&6<=this.v?1:0):(this.W?5:3)+(7==this.v?2:0)}function ih(a){O(this,a,0,kg);this.g-=this.A?9:3+(7==this.v?2:0)}function jh(){K(this,28,0,-9)}
function kh(){this.sa&&(this.sa.Dd(this.j[7],!0),this.sa.setData(this.j[0],!0));this.u|=8;Xe(this,-2);this.g-=3}function lh(a){O(this,a,this.j[(a>>6&7)+this.uc],lg);this.g-=this.A?9:3+(7==this.v?2:0)}function Q(a){var b;if(b=this.H)b=this.H,F(b,2)?(G(b,"undefined opcode "+J(b,a),!0,!0),b=Rg(b)):b=!1;b||K(this,8,0,-9)}function Pe(a){mh[a>>12].call(this,a)}function nh(a){oh[a>>6&3].call(this,a)}function ph(a){qh[a>>6&3].call(this,a)}function rh(a){sh[a>>6&3].call(this,a)}
function th(a){uh[a&15].call(this,a)}function vh(a){wh[a&15].call(this,a)}function xh(a){yh[a>>6&3].call(this,a)}function zh(a){Ah[a>>6&3].call(this,a)}function Bh(a){Ch[a>>6&3].call(this,a)}
var mh=[function(a){Dh[a>>8&15].call(this,a)},Yg,Mg,vg,rg,tg,mg,Q,function(a){Eh[a>>8&15].call(this,a)},Zg,Ng,wg,sg,ug,hh,Q],Dh=[function(a){Fh[a>>4&15].call(this,a)},Ig,Fg,xg,yg,Dg,zg,Bg,Wg,Wg,nh,ph,rh,Q,Q,Q],oh=[function(a){Kf(this,a,0,this.nb);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,0,Xf);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,1,ag);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,1,Zf);this.g-=this.A?9:3+(7==this.v?2:0)}],qh=[function(a){O(this,a,0,cg);
this.g-=this.A?11:6},function(a){O(this,a,Te(this)?1:0,Nf);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,Te(this)?1:0,ig);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){a=Hf(this,a);this.nb(a);this.g-=this.A?4:3+(7==this.v?2:0)}],sh=[function(a){O(this,a,0,gg);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,0,eg);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,0,Rf);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){O(this,a,0,Pf);this.g-=this.A?9:3+(7==this.v?2:0)}],Fh=
[function(a){Gh[a&15].call(this,a)},Q,Q,Q,Ug,Ug,Ug,Ug,dh,Q,th,vh,ih,ih,ih,ih],Gh=[Qg,kh,eh,Hg,Sg,ch,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],uh=[bh,function(){this.F=0;this.g-=5},function(){this.I=0;this.g-=5},Lg,function(){this.N=1;this.g-=5},Lg,Lg,Lg,function(){this.K=0;this.g-=5},Lg,Lg,Lg,Lg,Lg,Lg,Lg],wh=[bh,function(){this.F=65536;this.g-=5},function(){this.I=32768;this.g-=5},fh,function(){this.N=0;this.g-=5},fh,fh,fh,function(){this.K=32768;this.g-=5},fh,fh,fh,fh,fh,fh,fh],Eh=[Gg,Eg,Ag,Cg,Jg,Kg,pg,qg,Pg,jh,xh,zh,
Bh,Q,Q,Q],yh=[function(a){Jf(this,a,0,255,this.nb);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){If(this,a,0,Yf);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){If(this,a,1,bg);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){If(this,a,1,$f);this.g-=this.A?9:3+(7==this.v?2:0)}],Ah=[function(a){If(this,a,0,dg);this.g-=this.A?11:6},function(a){If(this,a,Te(this)?1:0,Of);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){If(this,a,Te(this)?1:0,jg);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){a=Gf(this,
a);this.nb(a<<8);this.g-=this.A?4:3+(7==this.v?2:0)}],Ch=[function(a){If(this,a,0,hg);this.g-=this.A?9+(this.Qc&1):3+(7==this.v?2:0)},function(a){If(this,a,0,fg);this.g-=this.A?9:3+(7==this.v?2:0)},function(a){If(this,a,0,Sf);this.g-=this.A?9+(this.Qc&1):3+(7==this.v?2:0)},function(a){If(this,a,0,Qf);this.g-=this.A?9:3+(7==this.v?2:0)}];function Qe(a){Hh[a>>12].call(this,a)}
var Hh=[function(a){Ih[a>>8&15].call(this,a)},Yg,Mg,vg,rg,tg,mg,function(a){Jh[a>>8&15].call(this,a)},function(a){Kh[a>>8&15].call(this,a)},Zg,Ng,wg,sg,ug,hh,Q],Ih=[function(a){Lh[a>>4&15].call(this,a)},Ig,Fg,xg,yg,Dg,zg,Bg,Wg,Wg,nh,ph,rh,function(a){Mh[a>>6&3].call(this,a)},Q,Q],Mh=[function(a){a=this.j[7]+((a&63)<<1)&65535;var b=this.pa(a|this.Ha);Jc(this,this.j[5]);this.j[6]=a+2&65535;this.j[5]=b;this.g-=8},function(a){a=kf(this,a,0);this.Ea(a);cf(this,a);this.g-=11},function(a){var b=ef(this);
this.ka=this.g;this.Ea(b);lf(this,a,0,b);this.g=this.ka-$g[this.A]},function(a){Kf(this,a,We(this)?65535:0,this.Ea);this.g-=this.A?9:3+(7==this.v?2:0)}],Lh=[function(a){Nh[a&15].call(this,a)},Q,Q,Q,Ug,Ug,Ug,Ug,dh,function(a){!(a&8)||1145>this.model?Q.call(this,a):(this.C&49152||(this.C=this.C&-225|(a&7)<<5,this.u|=1,this.u&=-3),this.g-=5)},th,vh,ih,ih,ih,ih],Nh=[Qg,kh,function(){df(this);this.u|=this.C&16;this.g-=13},Hg,Sg,ch,eh,function(a){Q.call(this,a)},Q,Q,Q,Q,Q,Q,Q,Q],Jh=[ah,ah,Og,Og,ng,ng,og,
og,lh,lh,Q,Q,Q,Q,gh,gh],Kh=[Gg,Eg,Ag,Cg,Jg,Kg,pg,qg,Pg,jh,xh,zh,Bh,function(a){1145>this.model?Q.call(this,a):Oh[a>>6&3].call(this,a)},Q,Q],Oh=[function(a){Q.call(this,a)},function(a){a=kf(this,a,65536);this.Ea(a);cf(this,a);this.g-=11},function(a){var b=ef(this);this.ka=this.g;this.Ea(b);lf(this,a,65536,b);this.g=this.ka-$g[this.A]},function(a){Q.call(this,a)}];
function Ph(a){B.call(this,"ROM",a,256);this.ia=this.j=null;this.A=+a.addr;this.g=+a.size;this.C=!1;this.u=a.alias;"string"==typeof this.u&&(this.u=eval(this.u));this.v=a.file;this.D=Ca(this.v);if(this.v){a=this.v;var b=Da(this.D);"json"!=b&&"hex"!=b&&(a=Wa()+"/api/v1/dump?file="+this.v+"&format=bytes&decimal=true");var c=this;Ua(a,null,!0,function(d,e,f){f?(c.V("Unable to load ROM resource (error "+f+": "+d+")"),c.v=null):(zb(c.hb,d,e),(d=Xa(d,e))?(c.j=d.ca,c.ia=d.ia):c.v=null);Qh(c)})}}u(Ph,B);
k=Ph.prototype;k.Ba=function(a,b,c,d){this.G=b;this.i=c;this.H=d;Qh(this)};k.Da=function(){this.ia&&(this.H&&Rh(this.H,this.id,this.A,this.g,this.ia),delete this.ia);return!0};k.Ca=function(){return!0};
function Qh(a){if(!Yb(a)){if(a.v){if(!a.j||!a.G)return;a.g||(a.g=a.j.length);if(a.j.length!=a.g)Wb(a,"ROM size ("+z(a.j.length,8,!0)+") does not match specified size ("+z(a.g,8,!0)+")");else{a:{var b=a.A;if(57344<=b&&b<57344+ld){var c={};c=(c[b]=[Ph.prototype.Gg,Ph.prototype.Yh,null,null,null,a.g>>1],c);if(wc(a.G,a,c)){a.status("Added %d-byte ROM at %o",a.g,b);b=a.C=!0;break a}}else if(rd(a.G,b,a.g,je)){for(c=0;c<a.j.length;c++)zd(a.G,b+c,a.j[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.u?
b.push(a.u):null!=a.u&&a.u.length&&(b=a.u);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.G,g=d.g,h=[],l=d.A>>>f.j;0<g&&l<f.g.length;)h.push(f.g[l++]),g-=f.v;f=d.G;d=d.g;g=0;for(e>>>=f.j;0<d&&e<f.g.length;){l=h[g++];if(!l)break;f.g[e++]=l;d-=f.v}}a.C||delete a.j}}}E(a)}}k.Gg=function(a){return this.j[a-this.A]};k.Yh=function(){};mb(function(){for(var a=Fb(document,C,"rom"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);d=new Ph(d);Eb(d,c)}});
function Sh(a){B.call(this,"RAM",a);this.ia=this.j=null;this.u=+a.addr;this.v=+a.size;this.Aa=a.load;this.za=a.exec;null!=this.Aa&&(this.Aa=+this.Aa);null!=this.za&&(this.za=+this.za);this.A=this.D=!1;this.g=a.file;this.C=Ca(this.g);if(this.g){a=this.g;var b=Da(this.C);"json"!=b&&"hex"!=b&&(a=Wa()+"/api/v1/dump?file="+this.g+"&format=bytes&decimal=true");var c=this;Ua(a,null,!0,function(d,e,f){f?(c.V("Unable to load RAM resource (error "+f+": "+d+")"),c.g=null):(zb(c.hb,d,e),(d=Xa(d,e))?(c.j=d.ca,
c.ia=d.ia,null==c.Aa&&(c.Aa=d.Aa),null==c.za&&(c.za=d.za)):c.g=null);Th(c)})}}u(Sh,B);Sh.prototype.Ba=function(a,b,c,d){this.G=b;this.i=c;this.H=d;Th(this)};Sh.prototype.Da=function(a,b){this.ia&&(this.H&&Rh(this.H,this.id,this.u,this.v,this.ia),delete this.ia);b||this.reset();return!0};Sh.prototype.Ca=function(){return!0};
function Th(a){if(a.G&&(!a.A&&a.v&&(rd(a.G,a.u,a.v,Bd)?a.A=!0:a.v=0),!Yb(a))){if(!a.A)A("No RAM allocated");else if(a.g){if(!a.j)return;Uh(a,a.j,a.Aa,a.za,a.u)?a.status('Loaded image "%s"',a.C):a.V('Error loading image "'+a.C+'"')}a.D=!0;E(a)}}
Sh.prototype.reset=function(){if(this.A&&!this.D){var a=this.G,b=this.u,c=this.v,d=b&a.u;for(b>>>=a.j;0<c&&b<a.g.length;){var e=a.g[b],f=d,g=c,h=0;f=f||0;h=(h||0)&255;void 0===g&&(g=e.size);if(ac&&e.j)for(d=f;g--&&d<e.j.length;d++)e.j[d]=h;else for(d=f;g--&&d<e.size;d++)e.H(f,h,e.M+f);c-=a.v;b++;d=0}this.j&&Uh(this,this.j,this.Aa,this.za,this.u,!this.H)}this.D=!1};
function Uh(a,b,c,d,e,f){var g=!1,h=!1;if(null==c)for(var l=0;l<b.length-1;){var n=b[l]&255|(b[l+1]&255)<<8;if(n)if(n&255){var m=l;if(1!=n){G(a,"invalid signature ("+Ba(n)+") at offset "+Ba(m),16384);break}if(l+6>=b.length){G(a,"invalid block at offset "+Ba(m),16384);break}l+=2;var q=b[l++]&255|(b[l++]&255)<<8,r=b[l++]&255|(b[l++]&255)<<8;n+=(q&255)+(q>>8)+(r&255)+(r>>8);for(var p=l,v=q-=6;0<q&&l<b.length;)n+=b[l++]&255,q--;if(0!=q||l>=b.length){G(a,"insufficient data for block at offset "+Ba(m),
16384);break}n+=b[l++]&255;if(n&255){G(a,"invalid checksum ("+z(n,2,!0)+") for block at offset "+Ba(m),16384);break}if(v)for(G(a,"loading "+Ba(v)+" bytes at "+Ba(r)+"-"+Ba(r+v),16384);v--;)zd(a.G,r++,b[p++]&255);else r&1?g=!0:null==d&&(d=r),null!=d&&G(a,"starting address: "+Ba(d),16384);h=!0}else l++;else l+=2}if(!h&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)zd(a.G,c+e,b[e]);h=!0}if(h){if(null==d||g)Nc(a.i),f=!1;null!=d&&Se(a.i,d,f)}return h}
mb(function(){for(var a=Fb(document,C,"ram"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);d=new Sh(d);Eb(d,c)}});function Vh(a){B.call(this,"Keyboard",a,2048);E(this)}u(Vh,B);Vh.prototype.va=function(){return!1};Vh.prototype.Ba=function(a,b,c,d){this.L=a;this.i=c;this.H=d};mb(function(){for(var a=Fb(document,C,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);d=new Vh(d);Eb(d,c)}});
function Wh(a){B.call(this,"SerialPort",a,4194304);this.O=+a.adapter;this.U=+a.baudReceive||9600;this.ba=+a.baudTransmit||9600;this.N=a.upperCase;"string"==typeof this.N&&(this.N="true"==this.N);this.A=this.C=null;this.Z=+a.tabSize;this.W=+a.charBOL;this.D=0;this.K=!0;this.S=this.P=null;this.T=this.aa=-1;this.F=this.g=this.j=0;this.v=[];a=a.binding;if("console"==a)this.C="";else if(a){var b=Pb("Panel",this.id);b&&(b=b.J[a])&&this.va("",a,b)}this.u=this.I=this.R=null;this.exports={connect:this.qe,
receiveData:this.Jc,receiveStatus:this.bh,setConnection:this.hh}}u(Wh,B);k=Wh.prototype;
k.va=function(a,b,c){if(!a||"textarea"==a){var d=this;this.J[b]=this.A=c;c.onkeydown=function(e){e=e||window.event;var f=0,g=e.keyCode;8==g?f=e.altKey?ua.Jd:ua.Xb:46==g?f=ua.Jd:e.ctrlKey&&g>=ua.Hd&&g<=ua.uf&&(f=g-(ua.Hd-ua.Be));f&&(e.preventDefault&&e.preventDefault(),d.Jc(f));return!0};c.onkeypress=function(e){e=e||window.event;if(!e.metaKey){var f=e.which||e.keyCode;e.altKey&&f==ua.De&&(f=ua.Ce);d.Jc(f);e.preventDefault&&e.preventDefault()}return!0};c.onpaste=function(e){e.stopPropagation&&e.stopPropagation();
e.preventDefault&&e.preventDefault();(e=e.clipboardData||window.clipboardData)&&d.Jc(e.getData("Text"))};c.removeAttribute("readonly");return!0}return!1};
k.Ba=function(a,b,c,d){this.L=a;this.G=b;this.i=c;this.H=d;var e=this;this.S=Jd(this.i,this.O?-1:48,4,2097152);this.T=Gd(this.i,function(){var f=-1;e.v.length&&(f=e.v.shift()&255,G(e,"receiveByte("+z(f,2,!0)+")"),e.N&&97<=f&&122>f&&(f-=32),Id(e.i,e.T,1E3/Math.round(e.U/10)));0<=f&&(e.F=f,e.g&128?e.F|=49152:e.g|=128,e.g&64&&Hd(c,e.S))});this.P=Jd(this.i,this.O?-1:52,4,2097152);this.aa=Gd(this.i,function(){e.j|=128;e.j&64&&Hd(c,e.P)});wc(b,this,Xh,this.O?64832+8*(this.O-1)-65392:0);yc(b,this.reset.bind(this));
E(this)};k.qe=function(a){if(!this.u){var b=Ae(this.L,"connection");if(b){var c=b.split("->");if(2==c.length){var d=Ra(c[0]);if(d!=this.Tc)return;c=Ra(c[1]);if(this.u=Ob(c)){var e=this.u.exports;if(e){var f=e.connect;f&&f.call(this.u,this.K);if(this.I=e.receiveData){this.K=a;this.R=e.receiveStatus;this.status("Connected %s.%s to %s",this.hb,d,c);return}}}}this.status("Unable to establish connection: %s",b)}}};
k.Da=function(a,b){if(!b)if(this.qe(this.K),!a)this.reset();else if(!this.restore(a))return!1;return!0};k.Ca=function(a){return a?this.save():!0};k.reset=function(){Yh(this)};k.save=function(){var a=new Cc(this);a.set(0,[this.F,this.g,this.j,this.v]);return a.data()};k.restore=function(a){return Yh(this,a[0])};function Yh(a,b){b||(b=[0,8192,128,a.v]);b=ba(b);a.F=b.next().value;a.g=b.next().value;a.j=b.next().value;a.v=b.next().value;return!0}
k.Jc=function(a){if("number"==typeof a)this.v.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.v.push(b)}else this.v=this.v.concat(a);Id(this.i,this.T,1E3/Math.round(this.U/10));return!0};k.bh=function(a){var b=this.g;this.g&=-12289;a&32&&(this.g|=8192);a&256&&(this.g|=4096);b!=this.g&&(this.g|=32768,this.g&32&&Hd(this.i,this.S))};k.hh=function(a,b){return this.u?!1:(this.u=a,this.I=b,!0)};
k.tg=function(){var a=this.g&65534;this.g&=-32769;return a};k.Lh=function(a){var b=a^this.g;this.g=this.g&-112|a&111;this.R&&b&6&&(b=0,b=this.K?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.R.call(this.u,b))};k.sg=function(){this.g&=-129;return this.F};k.Kh=function(){};k.ah=function(){return this.j};k.ti=function(a){this.j&128&&(a&64?Hd(this.i,this.P):Nd(this.i,this.P));this.j=this.j&-70|a&69};k.$g=function(){return 0};
k.si=function(a){a&=255;this.I&&this.I.call(this.u,a);a&=127;if(this.A)if(13==a)this.D=0;else if(8==a)this.A.value=this.A.value.slice(0,-1),0<this.D&&this.D--;else{if(a){var b;13!=a&&10!=a&&(b=Sa[a]);b=b?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.Z||8,c=a-this.D%a,this.Z&&(b=Ha("",c)));this.W&&!this.D&&c&&(b=String.fromCharCode(this.W)+b);this.A.value+=b;this.A.scrollTop=this.A.scrollHeight;this.D+=c}}else if(null!=this.C){if(10==a||1024<=this.C.length)this.B(this.C),
this.C="";10!=a&&(this.C+=String.fromCharCode(a))}Id(this.i,this.aa,1E3/Math.round(this.ba/10));this.j&=-129};var Zh={},Xh=(Zh[65392]=[null,null,Wh.prototype.tg,Wh.prototype.Lh,"RCSR"],Zh[65394]=[null,null,Wh.prototype.sg,Wh.prototype.Kh,"RBUF"],Zh[65396]=[null,null,Wh.prototype.ah,Wh.prototype.ti,"XCSR"],Zh[65398]=[null,null,Wh.prototype.$g,Wh.prototype.si,"XBUF"],Zh);mb(function(){for(var a=Fb(document,C,"serial"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);d=new Wh(d);Eb(d,c)}});
function ee(a){B.call(this,"PC11",a,8192);this.P=$h(this,a.autoMount);this.j=0;this.W=+a.baudReceive||3600;this.C=this.g=0;this.N=32768;this.u=this.T=0;this.F=[];this.D=ai;this.v=bi;this.O=this.A="";this.ca=this.Aa=this.za=null;this.S=-1;this.R=!gb()&&window&&"FileReader"in window;this.I=null;this.U=-1;this.K=null}u(ee,B);function $h(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){A(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}k=ee.prototype;
k.va=function(a,b,c){var d=this,e=bi;switch(b){case "listTapes":return this.J[b]=c,c.onchange=function(){var f=d.J.descTape,g=c.options[c.selectedIndex];if(f&&g){var h={};if(g=g.getAttribute("data-value"))try{h=eval("("+g+")")}catch(l){A("PC11 option error: "+l.message)}g=h.desc;void 0===g&&(g="");h=h.href;void 0!==h&&(g='<a href="'+h+'" target="_blank">'+g+"</a>");f.innerHTML=g}},!0;case "descTape":return this.J[b]=c,!0;case "readTape":e=ci;case "loadTape":return e||(e=di),this.J[b]=c,c.onclick=
function(){var f=d.J.listTapes;f&&ei(d,f.options[f.selectedIndex].text,f.value,e)},!0;case "mountTape":if(!this.R){c.parentNode.removeChild(c);break}this.J[b]=c;c.addEventListener("change",function(){var f=c.children[0];f.children[1].disabled=!f.children[0].files.length});c.onsubmit=function(f){if(f=f.currentTarget[1].files[0]){var g=f.name;ei(d,Ca(g,!0),g,di,f)}return!1};return!0;case fi:return this.J[b]=c,!0}return!1};
k.Ba=function(a,b,c,d){this.L=a;this.G=b;this.i=c;this.H=d;this.K=gi(a);var e=this;if(a=$h(this,Ae(this.L,"autoMount")))for(var f in a)"PTR"==f&&(this.P[f]=a[f]);this.I=Jd(this.i,56,4,8192);this.U=Gd(this.i,function(){1!=(e.g&32769)||e.g&128||(e.u<e.F.length?(e.C=e.F[e.u]&255,F(e)&&G(e,e.type+".advanceReader("+e.u+"): "+z(e.C,2,!0),!0),e.u++,hi(e,e.u/e.F.length*100)):e.g|=32768,e.g|=128,e.g&=-2049,e.g&64&&Hd(e.i,e.I))});wc(b,this,ii);yc(b,this.reset.bind(this));ji(this,"None",ai,!0);this.R&&ji(this,
"Local Tape",ki);ji(this,"Remote Tape",li);mi(this)||E(this)};k.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.Ca=function(a){return a?this.save():!0};k.reset=function(){this.g&=-2241;this.C=0};function mi(a){a.j=0;var b=a.P.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.J.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=Ca(c,!0)}c&&b?ni(a,b,c,di,!0):oi(a)}return!!a.j}
function ei(a,b,c,d,e){if(c)if(c==ki)a.V('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==li){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=Ca(c);a.status('Attempting to load %s as "%s"',c,b);a.D=li}else a.D=c;ni(a,b,c,d,!1,e)}else pi(a,!1)}
function ni(a,b,c,d,e,f){var g=-1;if(a.A.toLowerCase()!=c.toLowerCase()||a.v!=d)g++,pi(a,!0),a.flags.cb?a.V("PC11 busy"):(e&&(a.j++,F(a)&&G(a,"auto-loading tape: "+b)),a.load(b,c,d,f)?g++:a.flags.cb=!0);g&&qi(a,a.O,a.A,a.v,a.ca,a.Aa,a.za)}
k.load=function(a,b,c,d){var e=this,f=b;if(d){var g=new FileReader;g.onload=function(){var h=g.result;h&&(h=new Uint8Array(h,0,h.byteLength),qi(e,a,b,c,h),e.D=ki);e.flags.cb=!1;oi(e)};g.readAsArrayBuffer(d);return!1}0>b.indexOf("/api/v1/dump")&&(d=Da(b),f="json"==d||"gz"==d?encodeURI(b):Wa()+"/api/v1/dump?path="+encodeURIComponent(b)+"&format=json");return!!Ua(f,null,!0,function(h,l,n){var m=0>n&&!!e.L&&!e.L.flags.da;n?e.V('Unable to load tape "'+a+'" (error '+n+": "+h+")",m):(zb(e.hb,h,l),(h=Xa(h,
l))&&qi(e,a,b,c,h.ca,h.Aa,h.za));e.flags.cb=!1;e.j&&(e.j--,e.j||E(e));oi(e)})};function ji(a,b,c,d){if((a=a.J.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function oi(a){var b=a.J.listTapes;if(b&&b.options){a=a.D||a.A;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function hi(a,b){b|=0;if(b!==a.S){var c=a.J[fi];c&&(c=(c=Fb(c,ri))&&c[0])&&c.style&&(c.style.width=b+"%");a.S=b}}
function qi(a,b,c,d,e,f,g){a.O=b;a.A=c;a.v=d;a.ca=e;a.Aa=f;a.za=g;d==ci?a.K&&Uh(a.K,e,f,g,null,!1)?a.status('Read tape "%s"',b):a.V('No valid memory address for tape "'+b+'"'):(a.u=0,a.F=e,a.g&=-32769,a.status('Loaded tape "%s" (%d bytes)',b,e.length),hi(a,0))}function pi(a,b){if(a.A||!1===b)a.O="",a.A="",b||(a.v&&a.status(a.v==di?"tape detached":"tape unloaded"),a.D=ai,a.v=bi,oi(a))}k.save=function(){return(new Cc(this)).data()};k.restore=function(){return!0};k.mg=function(){return this.g&65534};
k.Eh=function(a){a&1&&(this.g&32768?(a&=-2,this.g&64&&Hd(this.i,this.I)):(this.g&=-129,this.g|=2048,this.C=0,Id(this.i,this.U,1E3/Math.round(this.W/10))));this.g=this.g&-66|a&65};k.lg=function(){this.g&=-129;this.g|=2048;return this.C};k.Dh=function(){};k.kg=function(){return this.N};k.Ch=function(a){this.N=this.N&-65|a&64};k.jg=function(){return this.T};k.Bh=function(a){this.T=a&255};
var ai="",ki="?",li="??",bi=0,di=1,ci=2,fi="readProgress",ri="pcjs-progress-bar",si={},ii=(si[65384]=[null,null,ee.prototype.mg,ee.prototype.Eh,"PRS"],si[65386]=[null,null,ee.prototype.lg,ee.prototype.Dh,"PRB"],si[65388]=[null,null,ee.prototype.kg,ee.prototype.Ch,"PPS"],si[65390]=[null,null,ee.prototype.jg,ee.prototype.Bh,"PPB"],si);
function ti(a,b,c){B.call(this,"Disk",{id:a.hb+".disk"+z(++ui,4)},32768);this.controller=a;this.L=a.L;this.H=a.H;this.A=b;this.Xa=b.name;this.Na=this.Cd="";this.wd=b.wd;this.fa=this.na=this.oa=this.ua=this.mode=0;this.g=[];this.u=null;this.v=!1;this.create(c,b.fa,b.na,b.oa,b.ua);this.j=this.C=null;E(this)}u(ti,B);k=ti.prototype;k.Ba=function(a,b,c,d){this.H=d};
k.create=function(a,b,c,d,e){this.mode=a;this.fa=b;this.na=c;this.oa=d;this.ua=e;this.g=[];if("preload"!=this.mode){a=Array(this.fa);for(b=0;b<a.length;b++){c=Array(this.na);for(d=0;d<c.length;d++){e=Array(this.oa);for(var f=1;f<=e.length;f++)e[f-1]=vi(null,b,d,f,this.ua,0);c[d]=e}a[b]=c}this.g=a}this.u=null};
k.load=function(a,b,c,d,e){var f=b;if(this.j)return!0;this.Xa=a;this.Na=b;this.Cd=Ca(b);var g=this;this.j=d;this.C=e||this.controller;if(c){var h=new FileReader;h.onload=function(){var l=h.result,n=l?l.byteLength:0,m=ta[n];if(m){g.fa=m[0];g.na=m[1];g.oa=m[2];g.ua=m[3]||512;var q=g.ua>>2;var r=m=0;l=new DataView(l,0,n);g.g=Array(g.fa);for(n=0;n<g.g.length;n++)for(var p=g.g[n]=Array(g.na),v=0;v<p.length;v++)for(var y=p[v]=Array(g.oa),w=0;w<y.length;w++){for(var D=vi(null,n,v,w+1,g.ua,0),pa=D.data,fa=
0;fa<q;fa++,r+=4){var I=pa[fa]=l.getInt32(r,!0);m=m+I&-1}D.La=q;y[w]=D}g.u=m;q=g}else g.V("Unrecognized disk format ("+n+" bytes)");g.j&&(g.j.call(g.controller,g.A,q,g.Xa,g.Na),g.j=null)};h.readAsArrayBuffer(c);return!0}0>b.indexOf("/api/v1/dump")&&(a=Da(b),"json"==a||"gz"==a?f=encodeURI(b):(c="path",d="&mbhd=10",!b.indexOf("http:")||!b.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(a)?(c="disk",d="&mbhd=0"):Ea(b,"/")&&(c="dir"),f=Wa()+"/api/v1/dump?"+c+"="+encodeURIComponent(b)+
(this.wd?"":d)+"&format=json"));return!!Ua(f,null,!0,function(l,n,m){wi(g,l,n,m)})};
function wi(a,b,c,d){var e=null,f=0>d&&!!a.L&&!a.L.flags.da;a.v=!1;if(d)a.controller.V('Unable to load disk "'+a.Xa+'" (error '+d+": "+b+")",f);else{zb(a.controller.hb,b,c);try{if(0<Ca(a.Cd,!0).toLowerCase().indexOf("-readonly"))a.v=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.v=!0)}var h;"<"==c.substr(0,1)?h=["Missing disk image: "+a.Xa]:h=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):
eval("("+c+")");if(h.length)if(1==h.length)A(h[0]);else{a.fa=h.length;a.na=h[0].length;a.oa=h[0][0].length;var l=h[0][0][0];a.ua=l&&l.length||512;for(d=c=0;d<a.fa;d++)for(f=0;f<a.na;f++)for(g=0;g<a.oa;g++)if(l=h[d][f][g]){var n=l.length;void 0===n&&(n=l.length=512);n>>=2;var m=l.pattern;void 0===m&&(m=l.pattern=0);var q=l.data;if(void 0===q){var r=l.bytes;if(void 0!==r&&r.length){for(var p=n<<2,v=r.length;v<p;v++)r[v]=m;a.fill(l,r,0)}else q=[],m=l.pattern=m|m<<8|m<<16|m<<24,l.data=q;delete l.bytes}vi(l,
d,f);for(p=0;p<q.length;p++)c=c+q[p]&-1}a.g=h;a.u=c;e=a}else A("Empty disk image: "+a.Xa)}catch(y){A("Disk image error ("+b+"): "+y.message)}}a.j&&(a.j.call(a.C,a.A,e,a.Xa,a.Na),a.j=null)}function vi(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.vk=b;a.wk=c;a.Va=a.La=0;a.eb=!1;return a}k.info=function(){return this.g.length?[this.g.length,this.g[0].length,this.g[0][0].length,this.g[0][0][0].length]:[0,0,0,0]};
k.seek=function(a,b,c,d,e){d=null;var f=this.A,g=this.g[a];if(g){var h=g[b];if(!h&&f.wf&&b<f.na)for(h=g[b]=Array(f.xf),g=0;g<h.length;g++)h[g]=vi(null,a,b,g+1,f.re,0);if(h){for(g=0;g<h.length;g++)if(h[g]&&h[g].sector==c){d=h[g];break}!d&&f.wf&&9==f.ge&&(d=h[g]=vi(null,a,b,f.ge,f.re,0))}}e&&e(d,!1);return d};k.fill=function(a,b,c){for(var d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e};
k.read=function(a,b){var c=-1;if(a&&b<a.length){c=a.data;var d=b>>2;c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255}return c};k.write=function(a,b,c){if(this.v)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.La?f<a.Va?(a.La+=a.Va-f,a.Va=f):f>=a.Va+a.La&&(a.La+=f-(a.Va+a.La)+1):(a.Va=f,a.La=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
k.save=function(){var a=0,b=[];b[a++]=[this.Na,this.u,this.fa,this.na,this.oa,this.ua];if(!this.v)for(var c=this.g,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.La){for(var h=[],l=0,n=g.Va,m=g.Va+g.La;n<m;)h[l++]=g.data[n++];b[a++]=[d,e,f,g.Va,h]}}return b};
k.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.g.length&&6<=e.length?this.create("local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.u&&e[1]!=this.u&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.u+")",b=-2));for(this.g.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],h=g[f++],l=g[f++],n=g[f++];if(h>=this.g.length||l>=this.g[h].length||n>=this.g[h][l].length){c="sector (CHS="+h+":"+l+":"+n+") out of range ("+
b+" changes applied)";b=-1;break}if(this.v){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(h=this.g[h][l][n]){for(l=h.data.length;l<e;)h.data[l++]=h.pattern;l=0;h.Va=e;for(h.La=f.length;e<g;)h.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.V("Unable to restore disk '"+this.Xa+": "+c);return b};var ui=0;
function xi(a,b,c,d,e,f){B.call(this,a,b,c);this.P=yi(this,b.autoMount);this.O=0;this.T=d;this.U=e;this.W=f;this.S=d.Wc;this.j=Array(this.S);this.R=!gb()&&window&&"FileReader"in window;this.D=[];this.Qa=null;this.exports={bootDisk:this.he,loadDisk:this.yd,selectDrive:this.gh,wait:this.kh}}u(xi,B);function yi(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){A(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}k=xi.prototype;
k.va=function(a,b,c){var d=this;switch(b){case "listDisks":return this.J[b]=c,c.onchange=function(){zi(d)},!0;case "descDisk":case "listDrives":return this.J[b]=c,c.onchange=function(){var e=xa(c.value,10);null!=e&&Ai(d,e)},!0;case "loadDisk":return this.J[b]=c,c.onclick=function(){d.yd()},!0;case "bootDisk":return this.J[b]=c,c.onclick=function(){d.he()},!0;case "saveDisk":if(!this.R){c.parentNode.removeChild(c);break}this.J[b]=c;c.onclick=function(){var e=d.J.listDrives;if(e&&e.options&&d.j)if(e=
d.j[xa(e.value,10)||0]){var f=e.ea;if(f){e=f.rk();f=f.Cd.replace(".json",".img");var g=null,h;"string"!=typeof e?"function"==typeof Blob&&"undefined"!=typeof URL&&URL&&"function"==typeof URL.createObjectURL&&(h=URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}))):h="data:application/octet-stream;base64,"+e;h?(f&&(g=document.createElement("a"),"string"!=typeof g.download&&(g=null)),g?(g.href=h,g.download=f,document.body.appendChild(g),g.click(),document.body.removeChild(g),h="Check your Downloads folder for "+
f+"."):(window.open(h),h="Check your browser for a new window/tab containing the requested data"+(f?" ("+f+")":"")+".")):h="Operation unsupported by your browser.";A(h)}else d.V("No disk loaded in drive.")}else d.V("No disk drive selected.")};return!0;case "mountDisk":if(this.R)return this.J[b]=c,c.addEventListener("change",function(){var e=c.children[0];e.children[1].disabled=!e.children[0].files.length}),c.onsubmit=function(e){if(e=e.currentTarget[1].files[0]){var f=e.name;d.yd(Ca(f,!0),f,e)}return!1},
!0;c.parentNode.removeChild(c)}return!1};k.Ba=function(a,b,c,d){this.L=a;this.G=b;this.i=c;this.H=d;if(a=yi(this,Ae(this.L,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.P[e]=a[e]);this.reset();this.Qa=Jd(this.i,this.T.rd,this.T.nd,this.ja);wc(b,this,this.W);yc(b,this.reset.bind(this));$i(this,"None",bj,!0);this.R&&$i(this,"Local Disk",cj);$i(this,"Remote Disk",dj);ej(this)||E(this)};
k.Da=function(a,b){if(!b){if(!a){if(this.reset(),this.L.P){this.D=[];for(a=0;a<this.j.length;a++)fj(this,a,!0);ej(this,!0)}}else if(!this.restore(a))return!1;if(a=this.J.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;b<this.S;b++){var c=document.createElement("option");c.value=b;c.text=this.j[b].Lc||"---";a.appendChild(c)}0<this.S&&(a.value="0",Ai(this,0))}}return!0};k.Ca=function(a){return a?this.save():!0};k.reset=function(){this.yb();gj(this)};
k.save=function(){var a=new Cc(this);a.set(0,this.Mc());for(var b=a.set,c=0;c<this.j.length;c++){var d=this.j[c];d.ea&&hj(this,d.Na,d.ea)}b.call(a,1,this.D);b=a.set;c=[];for(d=0;d<this.j.length;d++){var e=this.j[d];c.push([e.Mb,e.Xa,e.Na])}b.call(a,2,c);return a.data()};k.restore=function(a){var b=!0;this.yb(a[0])||(b=!1);var c=a[1];c&&(this.D=c);gj(this,a[2])||(b=!1);return b};k.yb=function(){return!0};k.Mc=function(){return[]};
function gj(a,b){for(var c=0;c<a.j.length;c++){var d=a.j[c];void 0===d&&(d=a.j[c]={});var e=a,f=d;d=c;var g=a.U,h=b&&b[c],l=0;f.Ob=d;f.name=e.Tc;f.Hc=f.Mb=!1;f.dc=null;f.wd=!0;f.Lc=g[l++]+d;f.fa=g[l++];f.na=g[l++];f.oa=g[l++];f.ua=g[l++];f.Ff=g[l++];f.Gf=g[l++];f.Hf=g[l++];f.yf=g[l++];f.status=g[l];f.qk=0;f.pk=0;f.ge=1;f.xf=f.oa;f.re=f.ua;f.xk=0;f.Fk=null;f.ea||(f.Na="");h&&(l=h[1],g=h[2],h[0]?(f=l,h=g,g=e.j[d],fj(e,d,!0),g.Mb=!0,d=new ti(e,g,"preload"),e.je(g,d,f,h,!0)):ij(e,d,l,g,!0)?f.ea&&g&&jj(e,
l,g,f.ea):E(e,!1))}return!0}function ej(a,b){b||(a.O=0);for(var c in a.P){var d=a.P[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.J.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var h=f.options[g];if(h.value==e){f=h.text;break a}}f=Ca(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.j.length)){!ij(a,g,f,e,!0)&&b&&E(a,!1);continue}a.V("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.O}
k.yd=function(a,b,c){if(!a&&!b){var d=this.J.listDisks;d&&d.options&&(a=d.options[d.selectedIndex].text,b=d.value)}d=(d=this.J.listDrives)&&xa(d.value,10);if(void 0===d||0>d||d>=this.j.length)return this.V("Unable to load the selected drive"),!1;if(!b)return fj(this,d),!0;if(b==cj)return this.V('Use "Choose File" and "Mount" to select and load a local disk.'),!1;if(b==dj){b=window.prompt("Enter the URL of a remote disk image.","")||"";if(!b)return!1;a=Ca(b);this.status('Attempting to load %s as "%s"',
b,a)}ij(this,d,a,b,!1,c);return!0};k.he=function(){var a,b=this.J.listDrives;b=b&&xa(b.value,10);if(null==b||0>b||b>=this.j.length||!(a=this.j[b]))return this.V("Unable to boot the selected drive"),!1;if(!a.ea)return this.V("Load a disk into the drive first"),!1;Se(this.i,0,!0,b);return(a=this.Pb(a,a.Ff,a.Gf,a.Hf,a.yf,0,2))?(this.V("Unable to read the boot sector ("+a+")"),!1):!0};
function ij(a,b,c,d,e,f){var g=-1,h=a.j[b];h.Na.toLowerCase()!=d.toLowerCase()&&(g++,fj(a,b,!0),h.Hc?a.V(a.type+" busy"):(h.Hc=!0,e&&(h.vd=!0,a.O++,F(a)&&G(a,"auto-loading disk: "+c)),h.Mb=!!f,(new ti(a,h,"preload")).load(c,d,f,a.je)&&g++));return g}
k.je=function(a,b,c,d,e){a.Hc=!1;b&&(b.fa>a.fa||b.na>a.na)&&(this.V('Disk "'+c+'" too large for drive '+(this.j[a.Ob].Lc||"---")),b=null);b?(a.ea=b,a.Xa=c,a.Na=d,this.se(a.Ob),jj(this,c,d,b),this.V('Loaded disk "'+c+'" in drive '+(this.j[a.Ob].Lc||"---"),a.vd||e),this.L&&Ke(this.L)):a.Mb=!1;a.vd&&(a.vd=!1,--this.O||E(this));Ai(this,a.Ob);a.dc&&(a.dc(),a.dc=null)};
function $i(a,b,c,d){if((a=a.J.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Ai(a,b,c){var d=!1;if(0<=b&&b<a.j.length){var e=a.j[b],f=a.J.listDisks;a=a.J.listDrives;if(f&&a&&f.options&&a.options){if(c)for(c=0;c<a.options.length;c++)if(xa(a.options[c].value,10)==e.Ob){a.selectedIndex!=c&&(a.selectedIndex=c);d=!0;break}c=xa(a.value,10);e=e.Mb?cj:e.Na;if(!isNaN(c)&&c==b){for(c=0;c<f.options.length;c++)if(f.options[c].value==e){f.selectedIndex!=c&&(f.selectedIndex=c);d=!0;break}c==f.options.length&&(f.selectedIndex=0)}}}return d}
k.gh=function(a){var b=this.J.listDrives;if(b&&b.options)for(var c=b.options.length,d=0;d<c;d++)if(b.options[d].textContent==a){var e=xa(b.options[d].value,10);if(0<=e)return Ai(this,e,!0)}return!1};
function zi(a){var b=a.J.listDisks,c=a.J.descDisk,d=b.options&&b.options[b.selectedIndex];if(c&&d){b={};if(d=d.getAttribute("data-value"))try{b=eval("("+d+")")}catch(e){A(a.type+" option error: "+e.message)}a=b.desc;void 0===a&&(a="");b=b.href;void 0!==b&&(a='<a href="'+b+'" target="_blank">'+a+"</a>");c.innerHTML=a}}k.kh=function(a){for(var b=0;b<this.j.length;b++){var c=this.j[b];if(c&&c.Hc)return c.dc||(c.dc=a),!1}return!0};
function fj(a,b,c){var d=a.j[b];if(d.ea||!1===c)hj(a,d.Na,d.ea),d.Xa="",d.Na="",d.ea=null,d.Mb=!1,c||(a.V("Drive "+(a.j[b].Lc||"---")+" unloaded",c),Ai(a,b))}function jj(a,b,c,d){var e;for(e=0;e<a.D.length;e++)if(a.D[e][1]==c){d.restore(a.D[e][2]);return}a.D[e]=[b,c,[]]}function hj(a,b,c){var d;for(d=0;d<a.D.length;d++)if(a.D[d][1]==b){a.D[d][2]=c.save();break}}k.se=function(){};k.Pb=function(){return-1};k.Rc=function(){return-1};var bj="",cj="?",dj="??";
function N(a){xi.call(this,"RK11",a,262144,lc,lc.Bc,kj);this.I=this.u=this.g=this.C=this.A=this.v=this.F=0}u(N,xi);k=N.prototype;k.yb=function(a){a||(a=[lj.Bc|lj.be|lj.Yd,0,R.Za,0,0,0,0]);a=ba(a);this.I=a.next().value;this.u=a.next().value;this.g=a.next().value;this.C=a.next().value;this.A=a.next().value;this.v=a.next().value;this.F=a.next().value;return!0};k.Mc=function(){return[this.I,this.u,this.g,this.C,this.A,this.v,this.F]};
k.Pb=function(a,b,c,d,e,f,g,h,l){var n=0;a=a.ea;var m=null;a||(n=S.Sd,e=0);for(;e;){if(!m){if(b>=a.fa){n=S.zc;break}m=a.seek(b,c,d+1);if(!m){n=S.ae;break}var q=0;++d>=a.oa&&(d=0,++c>=a.na&&(c=0,++b))}var r,p;if(0>(r=a.read(m,q++))||0>(p=a.read(m,q++))){n=S.Ac;break}if(!h&&(dd(this.G,ff(this.i,f),r|p<<8),Fd(this.G))){n=S.$b;break}q>=a.ua&&(m=null);f+=g;e--}return l?l(n,b,c,d,e,f):n};
k.Rc=function(a,b,c,d,e,f,g,h,l){var n=0;a=a.ea;var m=null;a||(n=S.Sd,e=0);for(;e;){var q=fd(this.G,ff(this.i,f));if(Fd(this.G)){n=S.$b;break}if(!m){if(b>=a.fa){n=S.zc;break}m=a.seek(b,c,d+1,!0);if(!m){n=S.ae;break}var r=0;++d>=a.oa&&(d=0,++c>=a.na&&(c=0,++b))}if(h){var p,v;if(0>(p=a.read(m,r++))||0>(v=a.read(m,r++))){n=S.Ac;break}if(q!=(p|v<<8)){n=S.de;break}}else if(!a.write(m,r++,q&255)||!a.write(m,r++,q>>8)){n=S.Ac;break}r>=a.ua&&(m=null);f+=g;e--}return l?l(n,b,c,d,e,f):n};
k.Ne=function(a,b,c,d,e,f){this.A=f&65535;this.g=this.g&~R.Fb|f>>16-R.la.Fb&R.Fb;this.C=65536-e&65535;this.v=this.v&~mj.od|d&mj.od;this.u|=a;nj(this);return!0};function nj(a){a.g&=~R.gb;a.u&&(a.u|=S.Fe,a.g|=R.gb,a.u&S.bd&&(a.g|=R.bd),F(a)&&G(a,a.type+": ERROR: "+x(a.u)))}k.yg=function(){return this.I};k.Qh=function(){};k.zg=function(){return this.u};k.Rh=function(){};k.vg=function(){return this.g&R.ac};
k.Nh=function(a){this.g=this.g&~R.Ta|a&R.Ta;if(this.g&R.Yb){a=!0;var b,c="",d=(this.v&mj.pb)>>mj.la.pb,e=this.j[d];this.g&=~(R.Za|R.pd);this.u&=~S.mf;switch(b=this.g&R.wa){case oj.Ae:F(this)&&G(this,this.type+": CRESET("+d+")",!0);this.u=this.v=0;this.g=R.Za;break;case oj.Te:c="RCHK";case oj.qb:c||(c="READ");var f=this.Pb;case oj.sd:c||(c="WCHK");case oj.cc:c||(c="WRITE");f||(f=this.Rc);var g=(this.v&mj.Wb)>>mj.la.Wb;var h=(this.v&mj.ed)>>mj.la.ed;var l=this.v&mj.od;var n=65536-this.C&65535;var m=
(this.g&R.Fb)<<16-R.la.Fb|this.A;var q=this.g&R.Me?0:2;F(this)&&G(this,this.type+": "+c+"("+g+":"+h+":"+l+") "+x(m)+"--"+x(m+(n<<1)),!0,!0);if(g>=e.fa){this.u|=S.zc;break}if(l>=e.oa){this.u|=S.Ac;break}a=f.call(this,e,g,h,l,n,m,q,b>=oj.sd,this.Ne.bind(this));break;case oj.Fc:g=(this.v&mj.Wb)>>mj.la.Wb;F(this)&&G(this,this.type+": SEEK("+g+")",!0);g<e.fa?this.g|=R.pd:this.u|=S.zc;break;case oj.Ge:F(this)&&G(this,this.type+": DRESET("+d+")");this.u=this.v=0;this.g=R.Za|R.pd;break;default:F(this)&&G(this,
this.type+": UNSUPPORTED("+b+")")}this.I=e.status|(e.ea?lj.Fa:0)|d<<lj.la.gd|this.v&lj.lf;nj(this);a&&(this.g&=~R.Yb,this.g|=R.Za,this.g&R.Eb&&Hd(this.i,this.Qa))}};k.Ag=function(){return this.C};k.Sh=function(a){this.C=a};k.ug=function(){return this.A};k.Mh=function(a){this.A=a};k.wg=function(){return this.v};k.Oh=function(a){this.v=a};k.xg=function(){return this.F};k.Ph=function(a){this.F=a};
var lj=lc.Cc,S=lc.$e,R=lc.Ye,mj=lc.Ze,oj=lc.wa,pj={},kj=(pj[65280]=[null,null,N.prototype.yg,N.prototype.Qh,"RKDS"],pj[65282]=[null,null,N.prototype.zg,N.prototype.Rh,"RKER"],pj[65284]=[null,null,N.prototype.vg,N.prototype.Nh,"RKCS"],pj[65286]=[null,null,N.prototype.Ag,N.prototype.Sh,"RKWC"],pj[65288]=[null,null,N.prototype.ug,N.prototype.Mh,"RKBA"],pj[65290]=[null,null,N.prototype.wg,N.prototype.Oh,"RKDA"],pj[65294]=[null,null,N.prototype.xg,N.prototype.Ph,"RKDB"],pj);
function fe(a){xi.call(this,"RL11",a,524288,mc,mc.af,qj);this.g=this.F=this.u=this.v=this.C=this.A=0}u(fe,xi);k=fe.prototype;k.yb=function(a){a||(a=[T.Fa|T.Za,0,0,0,0,0]);a=ba(a);this.g=a.next().value;this.F=a.next().value;this.u=a.next().value;this.v=a.next().value;this.C=a.next().value;this.A=a.next().value;return!0};k.Mc=function(){return[this.g,this.F,this.u,this.v,this.C,this.A]};
k.Pb=function(a,b,c,d,e,f,g,h,l){g=0;a=a.ea;h=null;a||(g=rj.$a,e=0);for(;e;){if(!h){h=a.seek(b,c,d+1);if(!h){g=rj.$a;break}var n=0}var m,q;if(0>(m=a.read(h,n++))||0>(q=a.read(h,n++))){g=rj.$a;break}dd(this.G,ff(this.i,f),m|q<<8);if(Fd(this.G)){g=rj.$b;break}f+=2;e--;if(n>=a.ua&&(h=null,++d>=a.oa&&(d=0,++c>=a.na&&(c=0,++b>=a.fa)))){g=rj.$a;break}}return l?l(g,b,c,d,e,f):g};
k.Rc=function(a,b,c,d,e,f,g,h,l){g=0;a=a.ea;h=null;a||(g=rj.$a,e=0);for(;e;){var n=fd(this.G,ff(this.i,f));if(Fd(this.G)){g=rj.$b;break}f+=2;e--;if(!h){h=a.seek(b,c,d+1,!0);if(!h){g=rj.$a;break}var m=0}if(!a.write(h,m++,n&255)||!a.write(h,m++,n>>8)){g=rj.$a;break}if(m>=a.ua&&(h=null,++d>=a.oa&&(d=0,++c>=a.na&&(c=0,++b>=a.fa)))){g=rj.$a;break}}return l?l(g,b,c,d,e,f):g};
k.Oe=function(a,b,c,d,e,f){this.F=f&65535;this.g=this.g&~T.Ya|f>>16-T.la.Ya&T.Ya;this.A=f>>16&sj.ab;this.v=this.u=b<<tj.la.bc|(c?tj.Ec:0)|d&tj.Zd;this.C=65536-e&65535;a&&(this.g=this.g|a|T.gb);return!0};k.Dg=function(){return this.g&T.ac};
k.Vh=function(a){this.g=this.g&~T.Ta|a&T.Ta;this.A=this.A&60|(a&T.Ya)>>T.la.Ya;if(!(this.g&T.Za)){a=!0;var b="",c=this.j[(this.g&T.pb)>>T.la.pb],d=c.ea;this.g&=~T.Fa;switch(this.g&T.wa){case uj.rf:this.C&vj.Ld&&(this.g&=T.Fa|T.wa|T.Ya);this.C=c.status|this.v&tj.Ec|(d&&512==d.fa?vj.Je:0);break;case uj.Fc:if((this.u&tj.Ie)==tj.nf){var e=this.u&tj.bc;b=(this.u&tj.qf)<<2;this.v=this.u&tj.pf?this.v+e:this.v-e;this.u=this.v=this.v&tj.bc|b}break;case uj.Xe:this.C=this.v;break;case uj.Ue:b="READ",e=this.Pb;
case uj.tf:b||(b="WRITE");e||(e=this.Rc);var f=this.u>>tj.la.bc;var g=this.u&tj.Ec?1:0;var h=this.u&tj.Zd;!d||f>=d.fa||h>=d.oa?this.g=this.g|rj.$a|T.gb:(a=65536-this.C&65535,d=(this.A&sj.ab)<<16|this.F,F(this)&&G(this,this.type+": "+b+"("+f+":"+g+":"+h+") "+x(d)+"--"+x(d+(a<<1)),!0,!0),a=e.call(this,c,f,g,h,a,d,2,!1,this.Oe.bind(this)))}a&&(this.g=this.g|T.Fa|T.Za,this.g&T.Eb&&Hd(this.i,this.Qa))}};k.Bg=function(){return this.F};k.Th=function(a){this.F=a&wj.Ta};k.Eg=function(){return this.u};
k.Wh=function(a){this.u=a};k.Fg=function(){return this.C};k.Xh=function(a){this.C=a};k.Cg=function(){return this.A};k.Uh=function(a){this.A=a&sj.ab;this.g=this.g&~T.Ya|(this.A&3)<<T.la.Ya};
var T=mc.df,wj=mc.bf,tj=mc.ef,vj=mc.Dc,sj=mc.cf,rj=mc.Kd,uj=mc.wa,xj={},qj=(xj[63744]=[null,null,fe.prototype.Dg,fe.prototype.Vh,"RLCS"],xj[63746]=[null,null,fe.prototype.Bg,fe.prototype.Th,"RLBA"],xj[63748]=[null,null,fe.prototype.Eg,fe.prototype.Wh,"RLDA"],xj[63750]=[null,null,fe.prototype.Fg,fe.prototype.Xh,"RLMP"],xj[63752]=[null,null,fe.prototype.Cg,fe.prototype.Uh,"RLBE"],xj);
function ge(a){xi.call(this,"RX11",a,1048576,nc,nc.ff,yj);this.K=this.I=this.u=this.N=this.g=this.F=0;this.v=V.Gb;this.A=0;this.C=Array(128).fill(0)}u(ge,xi);k=ge.prototype;k.yb=function(a){a?(a=ba(a),this.g=a.next().value,this.F=a.next().value,this.K=a.next().value,this.I=a.next().value,this.u=a.next().value,this.N=a.next().value,this.v=a.next().value,this.A=a.next().value,this.C=a.next().value):(this.F=this.g=0,this.I=this.K=1,this.N=this.u=0,this.v=V.qb,this.A=0,Nd(this.i,this.Qa),zj(this));return!0};
k.Mc=function(){return[this.g,this.F,this.K,this.I,this.u,this.N,this.v,this.A,this.C]};k.se=function(a){0==a&&this.yb()};function Aj(a,b){b&&(a.N=b,a.F=a.u,a.g|=W.gb);a.v=V.Gb;a.g|=W.DONE;a.g&W.Eb&&Hd(a.i,a.Qa)}
k.Pb=function(a,b,c,d,e,f,g,h,l){h=0;var n=a.ea,m=null;F(this)&&G(this,this.type+".readData("+b+":"+c+":"+d+") "+x(f)+"--"+x(f+(e<<1)),!0,!0);n||(h=a.Ob?Bj.dd:Bj.cd,e=0);for(;e;){if(!m){if(b>=n.fa){h=Bj.Re;break}m=n.seek(b,c,d+1);if(!m){h=Bj.md;break}var q=0;++d>=n.oa&&(d=0,++c>=n.na&&(c=0,++b))}var r;if(0>(a=n.read(m,q++))||0>(r=n.read(m,q++))){h=Bj.ld;break}dd(this.G,ff(this.i,f),a|r<<8);q>=n.ua&&(m=null);f+=g;e--}return l?l(h,b,c,d,e,f):h};
function zj(a){var b=0,c=a.g&W.qd?1:0,d=a.j[c];d=d&&d.ea;var e=a.K&Cj.ab,f=a.I&Dj.ab;a.u&=~(Ej.Id|Ej.Vd|Ej.Xb|Ej.Fa);if(d)if(a.u|=Ej.Fa,F(a)&&G(a,a.type+".readSector("+e+":0:"+f+")",!0,!0),c=d.seek(e,0,f,!0)){e=0;for(f=a.C.length;e<f;){var g=d.read(c,e);if(0>g){b=Bj.ld;break}a.C[e++]=g}c.Bf&&(a.u|=Ej.Xb)}else b=Bj.md;else b=c?Bj.dd:Bj.cd;Aj(a,b)}
k.Hg=function(a,b){a=this.g;if(!b)switch(a&=W.ac,this.v){case V.Zc:case V.EMPTY:this.A<this.C.length&&(this.g|=W.bb);break;case V.qb:case V.cc:case V.Gc:2>this.A&&(this.g|=W.bb)}return a};
k.Zh=function(a){this.g=this.g&~W.Ta|a&W.Ta;if(this.g&W.INIT)this.yb();else if(this.g&W.Yb&&this.v==V.Gb)switch(this.v=this.g&W.wa,this.g&=~(W.Yb|W.bb|W.DONE|W.gb),Nd(this.i,this.Qa),F(this)&&G(this,this.type+".processCommand("+Fj[this.v>>1]+")",!0,!0),this.v){case V.Zc:case V.EMPTY:case V.qb:case V.cc:case V.Gc:this.A=0;break;case V.We:a=this.j[this.g&W.qd?1:0];this.u&=~Ej.Fa;a&&a.ea&&(this.u|=Ej.Fa);this.F=this.u;Aj(this);break;case V.Ve:this.F=this.N,Aj(this)}else this.g&W.Eb?this.g&W.DONE&&Hd(this.i,
this.Qa):Nd(this.i,this.Qa)};k.Ig=function(a,b){if(!b)switch(this.v){case V.EMPTY:this.g&W.bb&&(this.g&=~W.bb,this.F=this.C[this.A]&255,F(this)&&G(this,this.type+".readByte("+this.A+"): "+z(this.F,2,!0),!0,!0),++this.A>=this.C.length&&Aj(this))}return this.F};
k.$h=function(a){switch(this.v){case V.Zc:this.g&W.bb&&(this.g&=~W.bb,this.C[this.A]=a&255,F(this)&&G(this,this.type+".writeByte("+this.A+","+z(a,2,!0)+")",!0,!0),++this.A>=this.C.length&&Aj(this));break;case V.qb:case V.cc:case V.Gc:if(this.g&W.bb)switch(this.g&=~W.bb,this.A++){case 0:this.I=a;break;case 1:if(this.K=a,this.v==V.qb)zj(this);else{var b=this.v==V.Gc,c=0,d=this.g&W.qd?1:0,e=this.j[d];e=e&&e.ea;var f=this.K&Cj.ab,g=this.I&Dj.ab;this.u&=~(Ej.Id|Ej.Vd|Ej.Xb|Ej.Fa);if(e)if(this.u|=Ej.Fa,
F(this)&&G(this,this.type+".writeSector("+f+":0:"+g+")",!0,!0),d=e.seek(f,0,g,!0))for(b&&(d.Bf=!0),b=0,f=this.C.length;b<f;){if(!e.write(d,b,this.C[b]&255)){c=Bj.ld;break}b++}else c=Bj.md;else c=d?Bj.dd:Bj.cd;Aj(this,c)}}}this.F=a};var W=nc.gf,Cj=nc.kf,Dj=nc.jf,Ej=nc.hf,V=nc.wa,Bj=nc.He,Fj="FILL EMPTY WRITE READ UNUSED RDSTAT WRDEL RDERR".split(" "),Gj={},yj=(Gj[65144]=[null,null,ge.prototype.Hg,ge.prototype.Zh,"RXCS"],Gj[65146]=[null,null,ge.prototype.Ig,ge.prototype.$h,"RXDB"],Gj);
function Hj(a,b,c){B.call(this,a,b,c);this.Y=+b.base||16;this.S=["{","}"];this.ka=["[","]"];this.Sa=this.D=0;this.U=!1;this.C=-1;this.A=[];this.u={}}u(Hj,B);Hj.prototype.ne=function(){return-1};Hj.prototype.xd=function(){};
function Ij(a,b,c,d){if(c)if(b){0>a.C&&a.A.length&&(a.C=0);if(0>a.C||b!=a.A[a.C])a.A.splice(0,0,b),a.C=0;a.C--}else a.U?b="end":b=a.A[a.C+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Ra(b.substring(c,f))),c=f+1}}return a}
function Jj(a,b,c){var d=a;b=b||32;if(c)if(32==b)d=a>>>0;else if(32>b)d=a&(1<<b)-1;else{if(b=Math.pow(2,b),0>a||a>=b)d=a%b,0>d&&(d+=b)}else 32>=b?d=a<<32-b>>32-b:(b=Math.pow(2,b-1),a>=b?(d=a%b,(a/b|0)&1&&(d-=b)):a<-b&&(d=a%b,((-a-1)/b|0)&1?d&&(d+=b):d||(d-=b)));a!=d&&(a=d);return a}
function Kj(a,b,c){for(c=void 0===c?-1:c;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e=a.pop();var f=a.pop();switch(d){case "*":f*=e;break;case "/":if(!e)return!1;f=Math.trunc(f/e);break;case "^/":if(!e)return!1;f%=e;break;case "+":f+=e;break;case "-":f-=e;break;case "<<":f<<=e;break;case ">>":f>>=e;break;case ">>>":f>>>=e;break;case "<":f=f<e?1:0;break;case "<=":f=f<=e?1:0;break;case ">":f=f>e?1:0;break;case ">=":f=f>=e?1:0;break;case "==":f=f==e?1:0;break;case "!=":f=f!=e?1:0;break;
case "&":f&=e;break;case "!":case "|":f|=e;break;case "^!":f^=e;break;case "&&":f=f&&e?1:0;break;case "||":f=f||e?1:0;break;case ",,":f=Jj(f,18,!0)*Math.pow(2,18)+Jj(e,18,!0);break;case "_":case "^_":"^_"==d&&(e=35-(e&255));e&&(f=Jj(f,0,!0),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));break;default:return!1}a.push(Jj(f))}return!0}
function Lj(a,b,c,d,e,f){var g,h=!1,l=0,n=[],m=[],q=a.Y;for(a.Y=e;c<d;){var r=b[c++].trim();var p=c<d?b[c++]:"";if(r)var v=Mj(a,r,void 0,f,l);else if("{"==p){r=1;for(v=c;c<d;)if(c++,p=c<b.length?b[c++]:"","{"==p)r++;else if("}"==p&&!--r)break;v=Lj(a,b,v,c-1,a.Y,f);null!=v&&l&&(v=Nj(v,l));r=c<d?b[c++].trim():"";p=c<d?b[c++]:""}else{if(" "==p)continue;if("^B"==p){a.Y=2;continue}if("^O"==p){a.Y=8;continue}if("^D"==p){a.Y=10;continue}if(!(l&-1073741824)){if("+"==p)continue;if("-"==p){l=l<<2|1;continue}if("~"==
p||"^-"==p){l=l<<2|2;continue}if("^L"==p){l=l<<2|3;continue}}h=!0;break}if(void 0===v)if(f)f.push(r),v=0;else{h=!0;f=[];break}n.push(Jj(v));if(" "==p)if(c<b.length-1&&!b[c])c++,p=b[c++];else{h=!0;break}if(!p)break;l="<"==a.S[0]?Oj:Pj;if(!l[p]){h=!0;break}m.length&&l[p]<=l[m[m.length-1]]&&Kj(n,m,1);m.push(p);a.Y="^_"==p?10:e;l=0}if(h||!Kj(n,m)||1!=n.length)h=!0;h?f||a.B("parse error ("+(r||p)+")"):g=n.pop();a.Y=q;return g}
function Qj(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,h=f+1,l=e;h<b.length;){var n=b[h++];if(n==c){l=-1;break}if(!l)break;l--;n=n.charCodeAt(0);7==d?n&=127:n=n-32&63;g=Jj(g*Math.pow(2,d)+n,d*e,!0)}if(0<=l){a.B("parse error ("+c+b+c+")");return}b=b.substr(0,f)+J(a,g,-1)+b.substr(h)}return b}
function Rj(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.S[0]&&(b=b.split(a.S[0]).join("{").split(a.S[1]).join("}"));b=Qj(a,b,'"',7,5);if(!b)return d;b=Qj(a,b,"'",6,6);if(!b)return d;16!=a.Y&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Lj(a,b,0,b.length,a.Y,c);void 0!==d&&e&&Sj(a,null,d)}return d}
function Nj(a,b){for(;b;){var c;switch(b&3){case 1:a=-Jj(a);break;case 2:a^=-1;break;case 3:for(c=35;0<=c&&!(a&Math.pow(2,c));)c--;a=35-c}b>>>=2}return a}
function Mj(a,b,c,d,e){e=void 0===e?0:e;var f=Array.isArray(d)?d:void 0;if(void 0!=b){var g=a.ne(b);if(0<=g)g=a.xd(g);else if(g=b,a.u[g]?g=a.u[g].value:(g=g.substr(0,6),g=a.u[g]&&a.u[g].value),void 0!=g){var h=a.u[b]&&a.u[b].fh;h&&(f?f.push(h):(f=Rj(a,h,d),void 0!==f?g+=f:(d||a.B("undefined "+(c||"value")+": "+b+" ("+h+")"),g=void 0)))}else g=xa(b,1<b.length||10<a.Y?a.Y:10);void 0!=g?g=Jj(Nj(g,e)):d||a.B("invalid "+(c||"value")+": "+b)}else d||a.B("missing "+(c||"value"));return g}
function Sj(a,b,c){var d=!1;if(void 0!==c){d=!0;var e=8==a.Y?J(a,c,32,8,1)+"  "+c+".":J(a,c,32,16,1)+"  "+J(a,c,32,8,1)+"  "+J(a,c,32,2,8)+"  "+c+".";32<=c&&127>c&&(e+=" '"+String.fromCharCode(c)+"'")}a.B((null!=b?b+": ":"")+e);return d}function Tj(a,b){var c=0;if(a.u){if(b)return Sj(a,b,a.u[b]&&a.u[b].value);b=Object.keys(a.u);b.sort();for(var d=0;d<b.length;d++)Sj(a,b[d],a.u[b[d]].value),c++}return 0<c}
function J(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.Y){case 2:a=za(b,0<c?c:0,e);break;case 8:a=x(b,0<c?(c+2)/3|0:0,!!e);break;case 10:a=Aa(b,0<c?Math.ceil(.3*c):0);break;default:a=z(b,0<c?c+3>>2:0,!!e)}return c=0>c?a.replace(/^0+([0-9A-F]+)$/i,"$1"):a}
var Pj={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},Oj={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};
function Uj(a){Hj.call(this,"Debugger",a,-1);this.Ia=!1;this.S=["(",")"];this.ka=[];this.N=X();this.Ha=X();this.T=X();this.F=[];this.g=this.P=this.K=[];Vj(this);this.W=this.ha=0;this.v=[];this.ta=void 0;Wj(this);this.H=this;this.qa={};this.ja=0;this.Z=null;this.R=[];Xj(this,a.messages);this.ya=a.commands;this.Ka=Yj;this.aa=[];this.O=0;this.Oa=this.xa=null;this.D=this.Ja=this.Ga=this.ba=this.sa=0;this.j=this.I=null;var b=this;window?void 0===window[C]&&(window[C]=function(c){return Fe(b,c)}):void 0===
global[C]&&(global[C]=function(c){return Fe(b,c)})}u(Uj,Hj);function Zj(a){a=a&&a.M;null==a&&(a=-1);return a}function X(a,b,c){return{M:void 0===a?null:a,Ma:void 0===b?!1:b,Ua:!1,Y:c}}k=Uj.prototype;k.Dd=function(a,b){a.M=b;a.Ua=!1;a.Y=void 0};function ak(a){return[a.M,a.Ma,a.Y,a.Ua,a.Kc]}function bk(a,b){var c=X(b[0],b[1],b[2]);c.Ua=b[3];b[4]&&(c.ee=Ij(a,c.Kc=b[4]));return c}
k.Ba=function(a,b,c,d){this.G=b;this.L=a;this.i=c;this.j=a.u;(a=Ae(a,"messages"))&&Xj(this,a);1140>this.i.model&&(this.aa=this.aa.concat(ck));1145>this.i.model&&(this.aa=this.aa.concat(dk));Ld(this,32,function(e){a:{var f=d.G.g,g=e[0],h=e=0,l=f.length;if(g){e=Zj(ek(d,g));if(-1===e){d.B("invalid address: "+g);break a}h=e>>>d.G.j;l=1}d.B("blockid   physical   blockaddr  used    size    type");d.B("--------  ---------  ---------  ------  ------  ----");g=-1;for(var n=0;l--;){var m=f[h];m.type==g?n++||
d.B("..."):(g=m.type,n=wd[g],m&&d.B(z(m.id,8)+"  %"+z(h<<d.G.j,8)+"  %"+z(m.M,8)+"  "+Ba(m.Sb)+"  "+Ba(m.size)+"  "+n),g!=ie&&(g=-1),n=0);e+=d.G.v;h++}}});E(this)};
k.va=function(a,b,c){var d=this;switch(b){case "debugInput":return this.I=this.J[b]=c,c.onkeydown=function(e){if(13==e.keyCode){var f=d.I.value;d.I.value="";Fe(d,f,!0)}else if(27==e.keyCode)d.I.value=f="";else if(38==e.keyCode?(f=null,d.C<d.A.length-1&&(f=d.A[++d.C])):40==e.keyCode&&(0<d.C?f=d.A[--d.C]:(f="",d.C=-1)),null!=f){var g=f.length;d.I.value=f;d.I.setSelectionRange(g,g)}null!=f&&e.preventDefault&&e.preventDefault()},!0;case "debugEnter":return this.J[b]=c,kb(c,function(){if(d.I){var e=d.I.value;
d.I.value="";Fe(d,e,!0);return!0}return!1}),!0;case "step":return this.J[b]=c,kb(c,function(e){var f=!1;Zb(d,!0)||($b(d,!0),f=Oc(d,e?1:0,null),$b(d,!1));return f}),!0}return!1};function Ee(a){if(a.I){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.I.focus();window&&window.scrollTo(b,c)}}k.Od=function(a,b){var c=255,d=Zj(a);-1!==d&&(a.Ma||65535<d?(c=this.G,d=ff(this.i,d),c.F=!1,c.ma++,d=yd(c,d).v(d&c.u,d),c.ma--):(c=this.i,c.qa++,d=c.G.Md(ed(c,d,3)),c.qa--),c=d,b&&fk(a,b));return c};
k.Ra=function(a,b){var c=65535,d=Zj(a);-1!==d&&(c=a.Ma||65535<d?fd(this.G,ff(this.i,d)):gd(this.i,d),b&&fk(a,b));return c};k.Pd=function(a,b,c){var d=Zj(a);if(-1!==d){if(a.Ma||65535<d)zd(this.G,ff(this.i,d),b);else{var e=this.i;e.qa++;e.G.Nd(ed(e,d,5),b);e.qa--}c&&fk(a,c);Sc(this.L,-1)}};k.Pe=function(a,b,c){var d=Zj(a);if(-1!==d){if(a.Ma||65535<d)dd(this.G,ff(this.i,d),b);else{var e=this.i;e.qa++;e.G.Zb(ed(e,d,4),b);e.qa--}c&&fk(a,c);Sc(this.L,-1)}};
function ek(a,b,c){c=(c?a.N:a.Ha).M;var d;if(void 0!==b){a:{var e=a.S[0];c=a.S[1];var f="("==e||"{"==e||"["==e?"\\":"";var g="["==e?"\\":"";for(g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);){var h=Rj(a,f[1]);if(void 0===h){b=void 0;break a}b=b.replace(e+f[1]+c,null!=h?J(a,h):"undefined")}if(a.ka.length)for(e=a.ka[0],c=a.ka[1],f="("==e||"{"==e||"["==e?"\\":"",g="["==e?"\\":"",g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);)b=b.replace("["+f[1]+"]","unimplemented");for(;e=b.match(/\$([a-z]+)/i);){c=
null;switch(e[1].toLowerCase()){case "ops":c=a.Sa}if(null==c)break;b=b.replace(e[0],c.toString())}}if("%"==b.charAt(0)){var l=!0;b=b.substr(1)}var n;a:{e=a.G;c=b.toUpperCase();for(m in e.Pa)if(f=+m,e.Pa[f][4]==c){var m=e.D+f;break a}m=null}if(null==m&&b.match(/^[a-z_][a-z0-9_]*$/i))for(e=b.toUpperCase(),c=0;c<a.F.length;c++)if(f=a.F[c].ia[e],null!=f){m=f.o;break}null!=m&&(n=X(m));if(e=n)return e;0<=b.indexOf("0x")?d=16:0<=b.indexOf("0o")?d=8:0<=b.indexOf(".")&&(d=10);c=Rj(a,b)}null!=c&&(e=X(c,l,d));
return e}function gk(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.ee=Ij(a,b.Kc=c[2]))}function fk(a,b){null!=a.M&&(a.M+=b||1)}function hk(a,b){return(b.Ma?"%":"")+J(a,b.M)}
function Xj(a,b){a.H=a;a.ja=268435456;a.Z=null;a.R=[];b=Ij(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in pc){a:{var d=void 0;if(Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}}0<=d&&(a.ja|=pc[c],a.B(c+" messages enabled"))}}function Ld(a,b,c){for(var d in pc)if(b==pc[d]){a.qa[d]=c;break}}
k.ne=function(a){a=a.toUpperCase();var b=ik[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function jk(a,b){if(b<kk||a.j)var c=lk[b];return c||""}
k.xd=function(a){if(0<=a)if(8>a)var b=this.i.j[a];else if(16>a)b=this.i.ta[a-8];else if(20>a)b=this.i.aa[a-16];else{var c=this.i,d=this.j;switch(a){case mk:b=ce(this.i);break;case nk:b=c.mb;break;case ok:b=c.S;break;case pk:b=c.ya&65280;break;case qk:b=Od(c);break;case rk:b=Qd(c);break;case sk:b=Rd(c);break;case tk:b=c.Z;break;case kk:d&&(b=d.ga);break;case uk:d&&(b=d.Ab);break;case vk:d&&(b=d.Wa)}}return b};
k.message=function(a,b){b&&(a+=" @"+hk(this,X(this.i.R&65535)));if(!this.Z||a!=this.Z)if(this.Z=a,this.ja&1073741824)this.R.push(a);else{var c;if(this.ja&536870912&&this.i&&(c=this.i.flags.X)||Zb(this,!0))wk(this),c&&(a+=" (cpu halted)");this.B(a);this.i&&(a=this.i,Le(a),a.ob=0,a.L&&Sc(a.L,void 0))}};
function Wj(a){var b;if(!Lf(a))a.v&&a.v.length&&a.B("instruction history buffer freed"),a.W=0,a.v=[];else if(!a.v||!a.v.length){a.v=Array(xk);for(b=0;b<a.v.length;b++)a.v[b]=X();a.W=0;a.B("instruction history buffer allocated")}}function yk(a,b,c){if(!zk(a,c))return!1;Mc(a.i,b);return!0}
function Oc(a,b,c,d){if(!zk(a))return!1;var e="";null===c&&(e=(c=!a.xa||"tr"==a.xa)?"tr":"t");a.D=0;b||Lf(a)&&Mf(a,a.i.j[7],0);try{b=Me(a.i,b);var f=a.i.yc(b);0<f&&(Pc(a.i,f),a.D+=f,Qc(a.i,f,!0),Rc(a.i,f),a.ba++)}catch(g){"number"!=typeof g&&(b=g,a.D=0,Wb(a.i,b.stack||b.message))}!1!==d&&(a.j&&a.j.stop(),Sc(a.L,-1));De(a,c||!1,e);return 0<a.D}function wk(a,b){a.i&&Nc(a.i,b)}
function De(a,b,c){if(a.Ia){void 0===b&&(b=!0);c&&a.B(Ak+c);c=a.i;if(c=c.u&128?c.wc|c.vc<<8:0){var d=c>>8;a.B("trapped to "+J(a,c&255,8)+" ("+(0>d?kc[-d]:J(a,d))+")")}a.N=X(a.i.j[7]);b&&1!=a.O?Bk(a):Ck(a)}}function zk(a,b){var c;(c=!a.i||!Yb(a.i))||(c=a.i,c.flags.da?c=!0:(c.B(c.toString()+" not powered"),c=!1),c=!c);return c||a.i.flags.X?(b||a.B("cpu busy or unavailable, command ignored"),!1):!Xb(a.i)}k.Da=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};
k.Ca=function(a,b){b&&this.B(a?"suspending":"shutting down");return a?this.save():!0};k.reset=function(a){Wj(this);this.ba=0;this.Z=null;this.D=0;this.N=X(this.i.j[7]);this.flags.X=!1;Dk(this);a||De(this)};k.save=function(){var a=new Cc(this);a.set(0,ak(this.N));a.set(1,ak(this.T));a.set(2,[this.A,this.U,this.ja]);a.set(3,this.F);return a.data()};
k.restore=function(a){var b=0;void 0!==a[2]&&(this.N=bk(this,a[b++]),this.T=bk(this,a[b++]),this.A=a[b][0],"string"==typeof this.A&&(this.A=[this.A]),this.U=a[b][1],this.ja|=a[b][2]);a[3]&&(this.F=a[3]);return!0};k.start=function(a,b){this.O||this.B("running");this.flags.X=!0;this.Ga=a;this.Ja=b};
k.stop=function(a,b){if(this.flags.X){this.flags.X=!1;this.D=b-this.Ja;if(!this.O){b="stopped";if(this.D){a-=this.Ga;var c=0<a?Math.round(1E3*this.D/a):0;b+=" (";Lf(this)&&(b+=this.ba+" instructions, ",this.ba=0);b+=this.D+" cycles, "+a+" ms, "+c+" hz)"}else F(this,536870912)&&(b+=" (use the 't' command to execute blocked faults)");this.B(b)}De(this,!0);Ee(this);Dk(this,this.i.j[7]);this.Z=null}};function Lf(a){return 1<a.g.length||!!a.ha}
function Mf(a,b,c){var d=-1;c||(d=gd(a.i,b),0==d&&(a.i.R&65535)==b&&(b=Xe(a.i,2)));if(0<c&&(a.ha&&!--a.ha||Ek(a,b,1,a.g)))return!0;0<=c&&a.v.length&&(a.ba++,0>d&&(d=gd(a.i,b)),65535!=(d&65535)&&(a.Dd(a.v[a.W],b),++a.W==a.v.length&&(a.W=0)));return!1}function Rg(a){var b=a.i;if(b.flags.X)throw Jc(b,a.i.R&65535),wk(a),-1;return!1}function ue(a,b,c){Ek(a,b,c||1,a.P)&&wk(a,!1)}function ve(a,b,c){Ek(a,b,c||1,a.K)&&wk(a,!1)}
function Vj(a){var b;a.g=["bp"];if(void 0!==a.P)for(b=1;b<a.P.length;b++){var c=a.P[b];var d=Zj(c);c.Ma?(c=a.G,te(c.g[d>>>c.j],!1)):jf(a.i,!1)}a.P=["br"];if(void 0!==a.K)for(b=1;b<a.K.length;b++)c=a.K[b],d=Zj(c),c.Ma?(c=a.G,te(c.g[d>>>c.j],!0)):jf(a.i,!0);a.K=["bw"];a.sa=0;a.ha=0}
k.xb=function(a,b,c){var d=!0;c||Fk(this,a,b,!1,!0);if(a!=this.g){var e=Zj(b);if(-1===e)this.B("invalid address: "+hk(this,b)),d=!1;else{var f=a==this.K;65535<e&&(b.Ma=!0);if(b.Ma){var g=this.G;g.g[e>>>g.j].xb(e&g.u,f)}else e=this.i,(f?e.oc++:e.nc++)||Re(e)}}d&&(a.push(b),c?b.Ua=!0:(Gk(this,a,a.length-1,"set"),Wj(this)))};
function Fk(a,b,c,d,e){var f=!1;c=Zj(c);for(var g=1;g<b.length;g++){var h=b[g];if(c==Zj(h)&&(!d||h.Ua)){f=!0;h.Ua||e||Gk(a,b,g,"cleared");b.splice(g,1);b!=a.g&&(b=b==a.K,h.Ma?(d=a.G,te(d.g[c>>>d.j],b)):jf(a.i,b));h.Ua||Wj(a);break}}return f}function Hk(a,b){for(var c=1;c<b.length;c++)Gk(a,b,c);return b.length-1}function Gk(a,b,c,d){c=b[c];a.B(b[0]+" "+hk(a,c)+(d?" "+d:c.Kc?' "'+c.Kc+'"':""))}
function Dk(a,b){if(void 0!==b)Ek(a,b,1,a.g,!0),a.O=0;else for(b=1;b<a.g.length;b++){var c=a.g[b];if(c.Ua){if(!Fk(a,a.g,c,!0))break;b=0}}}
function Ek(a,b,c,d,e){var f=!1;if(!a.sa++)for(var g=1;!f&&g<d.length;g++){var h=d[g];if(!e||h.Ua)for(var l=Zj(h)&(d==a.g?65535:-1),n=0;n<c;n++)if(b+n==l){var m;f=!0;h.Ua&&(Fk(a,d,h,!0),e=!0);if(m=h.ee){f=!1;for(var q=0;q<m.length;q++)if(!Ik(a,m[q],!0)){if(m[q].indexOf("if")){f=!0;break}for(var r=q+1;r<m.length&&m[r].indexOf("else");r++)q++;if(r==m.length){f=!0;break}}a.i.flags.X||(f=!0)}if(f){e||Gk(a,d,g,"hit");break}}}a.sa--;return f}
function Jk(a,b,c,d){var e=X(b.M),f=a.Ra(b,2),g,h;for(h in a.Ka)if(g=a.Ka[h][f&h])break;g||(g=Kk);var l=g[0];0<=a.aa.indexOf(l)&&(g=Kk,l=g[0]);var n=h="",m=Lk[l],q=g.length-1;l||q||(h=J(a,f));for(l=1;l<=q;l++){var r=g[l];if(void 0!==r){var p=a;var v=r;r=b;var y="";var w=v&Mk;if(w==Y)r=r.M+((f&255)<<24>>23)&65535,y=J(p,r);else if(w==Nk)r=r.M-((f&63)<<1)&65535,y=J(p,r);else if(w==Ok)y=J(p,f&7,3);else if(w==Pk)y=J(p,f&63,6);else if(w==Qk)y=J(p,f&255,8);else if(w=f&v,v&Rk&&(w>>=6,v>>=6),v&Z){v=null;var D=
w&Sk;switch(w&Tk){case 0:y=jk(p,D);break;case 8:y="@"+jk(p,D);v=Uk(p,p.i.j[D]);break;case 16:7>D?y="("+jk(p,D)+")+":(w=p.Ra(r,2),y="#"+J(p,w,-1));break;case 24:7>D?y="@("+jk(p,D)+")+":(w=p.Ra(r,2),y="@#"+J(p,w,-1),v=Uk(p,w));break;case 32:y="-("+jk(p,D)+")";break;case 40:y="@-("+jk(p,D)+")";break;case 48:w=p.Ra(r,2);y=J(p,w,-1)+"("+jk(p,D)+")";7==D&&(y=J(p,w=w+r.M&65535),v=Uk(p,w));break;case 56:w=p.Ra(r,2),y="@"+J(p,w)+"("+jk(p,D)+")",7==D&&(y="@"+J(p,w=w+r.M&65535),v=Uk(p,gd(p.i,w)))}v&&(y=[y,v])}p=
y;if(!p||!p.length){h="INVALID";break}"string"!=typeof p&&(n=p[1],p=p[0]);0<h.length&&(h+=",");h+=p||"???"}}f="";g=hk(a,e)+":";if(-1!==e.M&&-1!==b.M){do if(f+=" "+J(a,a.Ra(e,2)),null==e.M)break;while(e.M!=b.M)}g+=Ha(f,24);g+=Ha(m,5);h&&(g+=" "+h);if(c||n)g=Ha(g,60)+";"+(c||""),g=a.i.flags.Kb?g+("cycles="+Ge(a.i).toString()+" cs="+z(a.i.kc)):g+(null!=d?"="+d.toString():""),n&&(";"!=g.slice(-1)&&(g+=" "),g+=n);return g}
function Uk(a,b){b=gf(a.i,b)[0];b>=a.i.rb&&b<a.G.D&&(b=b-a.i.rb+a.G.D);var c=a.G;a=null;b>=c.D&&(b=c.Pa[b&Dd])&&(a=b[4]);return a}function Vk(a,b){switch(b){case "N":a=We(a.i);break;case "Z":a=Ve(a.i);break;case "V":a=Ue(a.i);break;case "C":a=Te(a.i);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}function Wk(a,b){var c=jk(a,b);c&&(c+="="+J(a,a.xd(b))+" ");return c}k.ie=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Rh(a,b,c,d,e){var f=[],g;for(g in e){var h=e[g];"number"==typeof h&&(e[g]=h={o:h});var l=h.o,n=h.a;if(void 0!==l){var m=f;l=[l>>>0,g];var q=Ta(m,l,a.ie);0>q&&m.splice(-(q+1),0,l)}n&&(h.a=n.replace(/''/g,'"'))}a.F.push({Ek:b,M:c,If:d,ia:e,fe:f})}function Xk(a,b,c){var d=[],e=Zj(b)>>>0;for(b=0;b<a.F.length;b++){var f=a.F[b],g=f.M>>>0,h=f.If;if(e>=g&&e<g+h){e=Ta(f.fe,[e-g],a.ie);0<=e?Yk(a,b,e,d):c&&(e=~e,Yk(a,b,e-1,d),Yk(a,b,e,d));break}}return d}
function Yk(a,b,c,d){var e={},f=a.F[b].fe,g=0,h=null;0<=c&&c<f.length&&(g=f[c][0],h=f[c][1]);h&&(e=a.F[b].ia[h],h="."==h.charAt(0)?null:e.l||h);d.push(h);d.push(g);d.push(e.a);d.push(e.c)}function Zk(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Tj(a)||a.B("no variables"),!0;if(!c[2])return Tj(a,c[1]);if(!c[3])return delete a.u[c[1]],!0;b=Rj(a,c[3]);return void 0!==b?(a.u[c[1]]={value:b,fh:void 0},!0):!1}a.B("invalid assignment:"+b);return!1}
function $k(a,b,c){var d=null;if(b=ek(a,b,!0)){var e=Xk(a,b,!0);if(e.length){var f;if(e[0]){var g="";(f=b.M-e[1])&&(g=" + "+Ba(f));f=e[0]+" ("+J(a,e[1])+")"+g;c&&a.B(f);d=f}4<e.length&&e[4]&&(g="",(f=e[5]-b.M)&&(g=" - "+Ba(f)),f=e[4]+" ("+J(a,e[5])+")"+g,c&&a.B(f),d||(d=f))}else c&&a.B("no symbols")}return d}
function Bk(a,b){var c;if(b&&"?"==b[1])a.B("register commands:"),a.B("\tr\tdump registers"),a.B("\trm\tdump misc registers"),a.B("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.i;null==c&&(c=!0);if(null!=b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("=");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.B("missing value for "+b[1]);return}g=Rj(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.j[6]=g&65535;break;case "PC":case "R7":Jc(e,
g);a.N=X(e.j[7]);break;case "N":e.K=g?32768:0;break;case "Z":e.N=g?0:1;break;case "V":e.I=g?32768:0;break;case "C":e.F=g?65536:0;break;case "PS":de(e,g);break;case "PI":be(e,g);break;case "ER":e.S=g;d=!0;break;case "SL":e.ya=g|255;break;case "M0":Pd(e,g);d=!0;break;case "M3":Sd(e,g);d=!0;break;case "AR":a.j&&(d=a.j,Dc(d,d.ga=g));d=!0;break;case "DR":a.j&&sc(a.j,g);d=!0;break;case "SR":a.j&&Ec(a.j,g);d=!0;break;default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.j[b]=g&65535;break}a.B("unknown register: "+
f);return}Sc(a.L);a.B("updated registers:")}}f=a.B;b="";for(g=0;6>g;g++)b+=Wk(a,g);b=b+"\n"+(Wk(a,6)+Wk(a,7));b+=Wk(a,mk)+Wk(a,nk)+Wk(a,pk);b+=Vk(a,"T")+Vk(a,"N")+Vk(a,"Z")+Vk(a,"V")+Vk(a,"C");d&&(d=b,g=Wk(a,qk)+Wk(a,rk),g+=Wk(a,sk)+Wk(a,tk)+Wk(a,ok),g=g+"\n"+(Wk(a,vk)+Wk(a,kk)+Wk(a,uk)),b=d+("\n"+g));f.call(a,b);c&&(a.N=X(e.j[7]),Ck(a,hk(a,a.N)))}}function al(a,b){b=Ra(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.B(c[2]):Sj(a,null,c[2].charCodeAt(0)):Rj(a,b,!1)}
function bl(a,b,c){if("?"==c)a.B("trace commands:"),a.B("\tt  [#]\ttrace # instructions"),a.B("\ttr [#]\ttrace # instructions with register updates"),a.B("\ttc [#]\ttrace # cycles"),a.B("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Mj(a,c,void 0,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.xa=b;jb(c,function(){return $b(a,!0)&&Oc(a,e,d,!1)},function(){a.j&&a.j.stop();Sc(a.L,-1);$b(a,!1)})}}
function Ck(a,b,c,d){if(b=ek(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Mj(a,c.substr(1)),null!=c&&(d=c);else{d=ek(a,c,!0);if(!d||d.M<b.M)return;e=d.M-b.M;if(256<e){a.B("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=Zb(a,!1)||a.O?a.D:null;var g=null!=f?"cycles":null,h=Xk(a,b),l=b.M;if(h[0]&&d&&(!c&&d||0>h[0].indexOf("+"))){var n=h[0]+":";h[2]&&(n+=" "+h[2]);a.B(n)}h[3]&&(g=h[3],f=null);f=Jk(a,b,g,f);a.B(f);a.N=b;e-=b.M-l;c++}}}
function Ik(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.B(Ak+b):(a.U&&(a.B("ended assemble at "+hk(a,a.T)),a.N=a.T,a.U=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.Z=null;if(Yb(a)&&0<b.length){a.U&&(b="a "+hk(a,a.T)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var h=g[0],l=h.charAt(0),n=1;n<h.length;n++){var m=h.charAt(n);if("?"==l||"r"==l||"a">m||"z"<m){g[0]=h.substr(n);g.unshift(h.substr(0,n));break}}switch(g[0].charAt(0)){case "a":var q=
ek(a,g[1],!0);if(q)if(a.T=q,void 0===g[2])a.B("begin assemble at "+hk(a,q)),a.U=!0,Sc(a.L);else{a.B("not supported yet");var r=[];if(r.length){for(var p=0;p<r.length;p++)a.Pd(q,r[p],1);a.B(Jk(a,a.T))}}break;case "b":a:{var v=g[0],y=g[1],w=b;if("?"==y)a.B("breakpoint commands:"),a.B("\tbp #\tset exec breakpoint"),a.B("\tbr #\tset read breakpoint"),a.B("\tbw #\tset write breakpoint"),a.B("\tbc #\tclear breakpoint (* to clear all)"),a.B("\tbl\tlist all breakpoints"),a.B("\tbn [#]\tbreak after # instruction(s)");
else{var D=v.charAt(1);if("l"==D){var pa=Hk(a,a.g);pa+=Hk(a,a.P);(pa+=Hk(a,a.K))||a.B("no breakpoints")}else if("n"==D){var fa=+y||0;y&&(a.ha=fa);a.B("break after "+fa+" instruction(s)")}else if(void 0===y)a.B("missing breakpoint address");else{var I=X();if("*"!=y&&(I=ek(a,y,!0),!I))break a;"c"==D?null==I.M?(Vj(a),a.B("all breakpoints cleared")):Fk(a,a.g,I)||Fk(a,a.P,I)||Fk(a,a.K,I)||a.B("breakpoint missing: "+hk(a,I)):null!=I.M&&(gk(a,I,w),"p"==D?a.xb(a.g,I):"r"==D?a.xb(a.P,I):"w"==D?a.xb(a.K,I):
a.B("unknown breakpoint command: "+D))}}}break;case "c":var Gb=a.L;Gb.C&&(Gb.C.value="");break;case "d":a:{var Oa,tb=g[0],cb=g[1],ub=g[2],zl=g[3];if("?"==cb){var gc="";for(Oa in pc)a.qa[Oa]&&(gc&&(gc+=","),gc+=Oa);gc+=",state,symbols";a.B("dump memory commands:");a.B("\tda [a]        dump info for address a");a.B("\tdb [a] [n]    dump n bytes at address a");a.B("\tdw [a] [n]    dump n words at address a");a.B("\tdd [a] [n]    dump n dwords at address a");a.B("\tds [a] [n]    dump n words at address a as JSON");
a.B("\tdh [p] [n]    dump n instructions from history position p");gc.length&&a.B("dump extension commands:\n\t"+gc)}else if("state"==cb){var mf=cl(a.L,!0);if("console"==ub)console.log(mf);else{var Bi=a.L;Bi.C&&(Bi.C.value="");mf&&a.B(mf)}}else if("symbols"==cb)for(var nf=0;nf<a.F.length;nf++){var of=a.F[nf],hc;for(hc in of.ia)if("."!=hc.charAt(0)){var Ci=of.ia[hc].o;if(void 0!==Ci){var Di=of.ia[hc].l;Di&&(hc=Di);a.B(J(a,Ci)+" "+hc)}}}else{if("d"==tb){for(Oa in pc)if(g[1]==Oa){var Ei=a.qa[Oa];Ei?
(g.shift(),g.shift(),Ei(g)):a.B("no dump registered for "+cb);break a}cb||(tb=a.Oa||"dw")}else a.Oa=tb;if("dh"==tb){var Fi=cb,Gi=ub,Hi="",Ii=0,Pa=a.W,db=a.v;if(db.length){var Ja=+Fi||a.ta,Tc=+Gi||10;isNaN(Ja)?Ja=Tc:Hi="more ";Ja>db.length&&(a.B("note: only "+db.length+" available"),Ja=db.length);Pa-=Ja;0>Pa&&(null==db[db.length-1].M?(Ja=Pa+Ja,Pa=0):Pa+=db.length);var pf=[];"call"==Gi&&(Tc=1E5,pf=["CALL"]);for(void 0!==Fi&&a.B(Ja+" instructions earlier:");0<Tc&&Pa!=a.W;){var Ji=db[Pa++];if(null==Ji.M)break;
var Uc=X(Ji.M),Al=Ja--,Ki=Jk(a,Uc,"history",Al);(!pf.length||0<=Ki.indexOf(pf[0]))&&a.B(Ki);Uc.ud&&(Pa+=Uc.ud,Tc-=Uc.ud,Ja-=Uc.ud);Pa>=db.length&&(Pa=0);a.ta=Ja;Ii++;Tc--}}Ii||(a.B("no "+Hi+"history available"),a.ta=void 0)}else{var va=ek(a,cb);if(va)if("da"==tb){var qf=va.Ma||65535<va.M,P=gf(a.i,va.M||0,qf);a.B(Ha("",qf?12:19)+za(va.M,qf?22:17,3)+"  "+x(va.M,8));6>P.length?(2<P.length&&(a.B("    OFFSET:             "+za(P[3],13,3)+"  "+x(P[3],8)),a.B("UNIMAP["+Aa(P[1],2)+"]: "+za(P[2],22,3)+"  "+
x(P[2],8))),a.B("  PHYSICAL: "+za(P[0],22,3)+"  "+x(P[0],8))):(a.B("    OFFSET:             "+za(P[1],13,3)+"  "+x(P[1],8)),a.B("+   "+dl[P[2]]+"PAR"+P[3]+": "+za(P[4],22,3)+"  "+x(P[4],8)),a.B("&  MMUMASK: "+za(P[5],22,3)+"  "+x(P[5],8)),a.B("= PHYSICAL: "+za(P[0],22,3)+"  "+x(P[0],8)))}else{var Hb=0,rf="ds"==tb;if(ub){if("l"==ub.charAt(0))ub=ub.substr(1)||zl,Hb=Mj(a,ub);else{var Li=ek(a,ub);Li&&(Hb=Li.M-va.M)}0>Hb&&(Hb=0);65536<Hb&&(Hb=65536)}var Cl=a.Y;va.Y&&(a.Y=va.Y);for(var Ib="dd"==tb?4:"db"==
tb?1:2,Td=Ib*Hb||128,sf=rf?16:a.Y,Dl=(Td+sf-1)/sf|0||1,Jb="";Dl--&&0<Td;){var Kb="",Mi="";cb=hk(a,va);for(var Ud=sf,Vd=0,Wd=0;0<Ud&&0<Td;){var ic=1,tf=1==Ib?a.Od(va,ic):a.Ra(va,ic=2);Vd|=tf<<(Wd<<3);Wd+=ic;Wd==Ib&&(rf?(Kb&&(Kb+=","),Kb+="0x"+z(Vd,Ib<<1)):(Kb+=J(a,Vd,Ib<<3),Kb+=1==Ib?9==Ud?"-":" ":"  "),Vd=Wd=0);Ud-=ic;for(Td-=ic;1==Ib&&ic--;){var uf=tf&255;Mi+=32<=uf&&127>uf?String.fromCharCode(uf):".";tf>>=8}}Jb&&(Jb+="\n");Jb=rf?Jb+(Kb+","):Jb+(cb+":  "+Kb+(0==Ud?" "+Mi:""))}Jb&&a.B(Jb);a.Ha=va;
a.Y=Cl}}}}break;case "e":if("else"==g[0])break;var vf=g[0],wf=g[1];if("eb"==vf){var Vc=1;var Ni=255;var Oi=a.Od;var Pi=a.Pd}else"e"==vf||"ew"==vf?(Vc=2,Ni=65535,Oi=a.Ra,Pi=a.Pe):wf=null;if(null==wf)a.B("edit memory commands:"),a.B("\teb [a] [...]  edit bytes at address a"),a.B("\tew [a] [...]  edit words at address a");else{var Xd=ek(a,wf);if(Xd)for(var Yd=2;Yd<g.length;Yd++){var Wc=Rj(a,g[Yd]);if(void 0===Wc){a.B("unrecognized value: "+g[Yd]);break}Wc&~Ni&&a.B("warning: "+z(Wc)+" exceeds "+Vc+"-byte value");
a.B("changing "+hk(a,Xd)+(F(a,32)?"":" from "+J(a,Oi.call(a,Xd),Vc<<3))+" to "+J(a,Wc,Vc<<3));Pi.call(a,Xd,Wc,Vc)}}break;case "g":a:{var Qi=g[1],El=b;if(void 0!==Qi){var xf=ek(a,Qi,!0);if(!xf)break a;gk(a,xf,El);a.xb(a.g,xf,!0)}yk(a,!0,c)}break;case "h":a.flags.X?(c||a.B("halting"),wk(a)):Zb(a,!0)||c||a.B("already halted");break;case "i":if("if"==g[0]){var Xc=b.substr(2);Xc=Ra(Xc);if(Rj(a,Xc)){c||a.B("true: "+Xc);var Ri=!0}else c||a.B("false: "+Xc),Ri=!1;Ri||(d=!1);break}f=!0;break;case "k":var Fl=
g[0];if("?"==g[1])a.B("stack trace commands:"),a.B("\tk\tshow frame addresses"),a.B("\tks\tshow symbol information");else{var yf=0,zf=X(),Yc=X(a.i.j[6]);for(a.B("stack trace for "+hk(a,Yc));10>yf;){for(var Lb=null,Gl=256;65536>Yc.M>>>0;){zf.M=a.Ra(Yc,2);if(null==Yc.M||!Gl--)break;if(!(zf.M&1)){for(var Hl=a,Zd=zf,Si=null,Zc=Zd.M,Ti=Zc,Af=1;6>=Af&&Zc;Af++){if(2<Af){Zd.M=Zc;var $d=Jk(Hl,Zd);if(0<=$d.indexOf("JSR")){var Ui=$d.indexOf(" ");if(Zc+($d.indexOf(" ",Ui+1)-Ui-1)/2==Ti){Si=$d;break}}}Zc-=2}Zd.M=
Ti;if(Lb=Si)break}}if(!Lb||null==Lb)break;var Vi=null;if("ks"==Fl){var Wi=Lb.match(/[0-9A-F]+$/);Wi&&(Vi=$k(a,Wi[0]))}Lb=Ha(Lb,50)+"  ;"+(Vi||"stack="+hk(a,Yc));a.B(Lb);yf++}yf||a.B("no return addresses found")}break;case "l":if("ln"==g[0]){$k(a,g[1],!0);break}f=!0;break;case "m":a:{var eb,fb=null,U=g[1];"?"==U&&(U=void 0);if(void 0!==U){var vb=0;if("all"==U)vb=-1610616833,U=null;else if("on"==U)fb=!0,U=null;else if("off"==U)fb=!1,U=null;else{"keys"==U&&(U="key");"kbd"==U&&(U="keyboard");for(eb in pc)if(U==
eb){vb=pc[eb];fb=!!(a.ja&vb);break}if(!vb){a.B("unknown message category: "+U);break a}}if(vb)if("on"==g[2])a.ja|=vb,fb=!0;else if("off"==g[2]&&(a.ja&=~vb,fb=!1,1073741824==vb)){for(var Xi=1E3<=a.R.length?a.R.length-1E3:0;Xi<a.R.length;)a.B(a.R[Xi++]);a.R=[]}}var Il=0,$c="";for(eb in pc)if(!U||U==eb){var Jl=!!(a.ja&pc[eb]);if(null===fb||fb==Jl)$c&&($c+=","),++Il%10||($c+="\n\t"),"key"==eb&&(eb="keys"),$c+=eb}void 0===U&&a.B("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.B((null!==
fb?fb?"messages on:  ":"messages off: ":"message categories:\n\t")+($c||"none"));Wj(a)}break;case "p":if("print"==g[0]){al(a,b.substr(5));break}var Kl=g[0];if("?"==g[1])a.B("step commands:"),a.B("\tp\tstep over instruction"),a.B("\tpr\tstep over instruction with register update");else{var Yi="pr"==Kl?1:0,Zi=1+Yi;if(a.O)a.B("step in progress");else{var ae=X(a.i.j[7]),jc=a.Ra(ae);3==jc||4==jc||34816==(jc&65280)||32256==(jc&65024)||35072==(jc&65280)?(a.O=Zi,fk(ae,2)):2048==(jc&65024)&&(Jk(a,ae),a.O=
Zi);a.O?(a.xb(a.g,ae,!0),yk(a)||(a.L&&Ke(a.L),a.O=0)):bl(a,Yi?"tr":"t")}}break;case "r":if("reset"==b){a.L&&a.L.reset();break}Bk(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var ad=+g[2];if(8==ad||10==ad||16==ad)a.Y=ad;else{a.B("invalid base: "+ad);break}}a.B("default base: "+a.Y);break;case "cs":var bd;void 0!==g[3]&&(bd=+g[3]);switch(g[2]){case "int":a.i.Ib=bd;break;case "start":a.i.lc=bd;break;case "stop":a.i.Lb=bd;break;default:a.B("unknown cs option");break a}void 0!==bd&&Ce(a.i);
a.B("checksums "+(a.i.flags.Kb?"enabled":"disabled"));break;case "sp":void 0!==g[2]&&(He(a.i,+g[2])||a.B("warning: using 1x multiplier, previous target not reached"));a.B("target speed: "+(a.i.tb.toFixed(2)+"Mhz (")+a.i.kb+"x)");break;default:if(g[1]){a.B("unknown option: "+g[1]);break}case "?":a.B("debugger options:"),a.B("\tbase #\t\tset default base to #"),a.B("\tcs int #\tset checksum cycle interval to #"),a.B("\tcs start #\tset checksum cycle start count to #"),a.B("\tcs stop #\tset checksum cycle stop count to #"),
a.B("\tsp #\t\tset speed multiplier to #")}break;case "t":bl(a,g[0],g[1]);break;case "u":Ck(a,g[1],g[2],8);break;case "v":if("var"==g[0]){Zk(a,b.substr(3))||(d=!1);break}if("ver"==g[0]){a.B((bc||"PDP11")+" version 2.00 ("+a.i.model+",RELEASE"+(dc?",TYPEDARRAYS":cc?",BYTEARRAYS":",LONGARRAYS")+")");a.B(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){al(a,b.substr(1));break}var Bf="commands:",Cf;for(Cf in el)Bf+="\n"+Ha(Cf,9)+el[Cf];Lf(a)||(Bf+="\nnote: history disabled if no exec breakpoints");
a.B(Bf);break;default:f=!0}f&&(a.B("unknown command: "+b),d=!1)}}catch(aj){a.B("debugger error: "+(aj.stack||aj.message)),d=!1}return d}function Fe(a,b,c){b=Ij(a,b,c);for(var d in b)if(!Ik(a,b[+d]))return!1;return!0}
var el={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Lk=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
mk=20,nk=21,ok=22,pk=23,qk=24,rk=25,sk=26,tk=27,kk=28,uk=29,vk=30,ik={SP:6,PC:7,PS:mk,PI:nk,ER:ok,SL:pk,M0:qk,M1:rk,M2:sk,M3:tk,AR:kk,DR:uk,SR:vk},lk="R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),dl="KI KD SI SD ?? ?? UI UD".split(" "),Sk=7,Tk=56,Z=Tk|Sk,Rk=4032,Y=4096,Nk=8192,Ok=12288,Pk=24576,Qk=32768,Mk=61440,Yj={61440:{4096:[62,Rk,Z],8192:[47,Rk,Z],12288:[18,Rk,Z],16384:[14,Rk,Z],20480:[16,Rk,Z],24576:[3,Rk,Z],36864:[63,Rk,Z],40960:[48,
Rk,Z],45056:[19,Rk,Z],49152:[15,Rk,Z],53248:[17,Rk,Z],57344:[94,Rk,Z]},65024:{2048:[57,448,Z],28672:[100,Z,448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,Nk]},65280:{256:[27,Y],512:[24,Y],768:[10,Y],1024:[11,Y],1280:[22,Y],1536:[12,Y],1792:[20,Y],32768:[25,Y],33024:[23,Y],33280:[13,Y],33536:[21,Y],33792:[28,Y],34048:[29,Y],34304:[8,Y],34560:[9,Y],34816:[106,Qk],35072:[107,Qk]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],
2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,Pk],3392:[60,Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,Sk],152:[108,Ok]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],
166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},Kk=[0],ck=[58,60,65,96,110,100,101,102,103,104,105],dk=[108,59,64],xk=1E3,Ak=">> ";mb(function(){for(var a=Fb(document,C,"debugger"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);d=new Uj(d);Eb(d,c)}});
function fl(a,b,c){B.call(this,"Computer",a,67108864);this.flags.da=!1;this.S=null;gl(this,b);this.O=Ae(this,"autoPower",a,6);this.v=0;this.W=+a.busWidth||+a.buswidth;this.K=this.D=this.N=null;this.I=this.U=!1;this.F=this.A=null;this.T=this.P=this.R=!1;this.url=Ae(this,"url")||"";(Math.random()+.1).toString(36);this.j=hl(this);if(this.i=Pb("CPU",this.id)){this.H=Pb("Debugger",this.id);this.G=new kd({id:this.hb+".bus",busWidth:this.W},this.i,this.H);var d=Nb(this.id);if(this.C=(this.u=Pb("Panel",this.id))&&
this.u.J.print)for(b=0;b<d.length;b++){var e=d[b];e.V=this.u.V;e.print=this.u.print;e.B=this.u.B}this.B(bc+" v2.00\nCopyright \u00a9 2012-2022 Jeff Parsons <Jeff@pcjs.org>\nLicense: MIT <https://www.pcjs.org/LICENSE.txt>");this.B("Portions adapted from the PDP-11/70 Emulator by Paul Nankervis <http://skn.noip.me/pdp11/pdp11.html>");for(b=0;b<d.length;b++)e=d[b],e.Ba&&e.Ba(this,this.G,this.i,this.H);b=null;e=Ae(this,"resume",a);void 0!==e&&(1<e.length?b=this.D=e:this.g=parseInt(e,10));e=!1;d=Ae(this,
"state");d||(e=!0,d=a.state);d&&(this.N=b=d,e||(this.I=!0,this.g=il),this.g&&(this.F=new Cc(this,"2.00"),this.F.load()?b=null:delete this.F));!b&&this.g&&(b=jl(this))&&(this.I=!0);if(b){var f=this;Ua(b,null,!0,function(g,h,l){l?(f.D=null,f.I=!1,f.V("Unable to load machine state from server (error "+l+(h?": "+Ra(h):"")+")")):(f.K=h,f.U=!0);E(f)})}else E(this);this.J.power||(this.O=!0);!c&&this.O&&this.wait(this.pc)}else A("Unable to find CPU component")}u(fl,B);
function gl(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){A(d.message+" ("+c+")")}}a.S=b}function Ae(a,b,c,d){var e=b.toLowerCase();e=hb(b)||hb(e);void 0===e&&a.S&&(e=a.S[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}k=fl.prototype;
k.wait=function(a,b){for(var c=this,d=Nb(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!Yb(f)){Yb(f,function(){c.wait(a,b)});return}}a.call(this,b)};function kl(a,b){var c=new Cc(a,"2.00",ll);if(c.load()&&ml(c)){var d=c.get(nl),e=b?b.get(nl):"unknown";d!=e&&(a.V("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
k.pc=function(a){void 0===a&&(a=this.g||(this.K?ol:il));if(!this.v){this.v++;var b=!1,c=!1;this.R=!1;var d=this.F||new Cc(this,"2.00");if(a==pl)b=!0;else if(a>il){if(d.load(this.K)){this.A=new Cc(this,"2.00",ql);this.A.load()&&(rl(),a=sl,tl(this.A));this.A.set(nl,Ka("%T",new Date));this.A.store();var e=this.g&&!this.I;if(a==ol||Cb("Click OK to restore the previous "+bc+" machine state, or CANCEL to reset the machine.")){if(c=ml(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?d.load(g):("error"==
f&&"no machine state"!=g?(this.V("Error: "+g),"unable to verify user"==g&&(ab(ul,""),this.j=null)):this.B(f+": "+g),tl(d),d.load()?(c=ml(d),e=!0):c=!1))}e&&kl(this,c?d:null)}else a==sl&&d.clear()}else kl(this);delete this.K;delete this.F}e=Nb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.i&&(c=vl(this,g,d,b,c));b=[d,a,c];a!=pl?this.wait(this.ke,b):this.ke(b)}};
function vl(a,b,c,d,e){if(!b.flags.da){b.flags.da=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/-[0-9]+\./i,".")))),"string"===typeof f&&(f=null),!b.Da(f,d)&&f&&(A("Unable to restore state for "+b.type),a.N&&!a.U?(c.clear(),a.g=il,window&&window.location.reload()):a.R=!0,b.Da(null),e=!1),!d&&b.Rd){var g=b.Rd.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(h){A("Error restoring state for "+b.type+" ("+h.message+")")}}return e}
k.ke=function(a){var b=a[0],c=0>a[1];a=a[2];this.T=!0;this.flags.da=!0;var d=this.J.power;d&&(d.textContent="Shutdown");this.i&&(vl(this,this.i,b,c,a),Sc(this,-2),this.i.ra());this.R&&(rl(),b.clear());!c&&this.A&&(this.A.clear(),delete this.A);this.v=0};function rl(){ob("There may be a problem with your "+bc+" machine.")}
function cl(a,b,c){var d="none";if(a.v)return null;a.v--;var e=new Cc(a,"2.00"),f=new Cc(a,"2.00",ll),g=Ka("%T",new Date);f.set(nl,g);e.set(nl,g);e.set(wl,"2.00");e.set(xl,window?window.location.href:null);e.set(yl,window?window.navigator.userAgent:"");if(a.i&&a.i.Ca){c&&(b&&(a.i.flags.ra=a.i.flags.X),Nc(a.i));var h=a.i.Ca(b,c);"object"===typeof h&&e.set(a.i.id,h);c&&(a.i.flags.da=!1,!1===h&&(d=null))}g=Nb(a.id);for(var l=0;l<g.length;l++){var n=g[l];n.flags.da&&(n.Ca&&(h=n.Ca(b,c),"object"===typeof h&&
e.set(n.id,h)),c&&(n.flags.da=!1,!1===h&&(d=null)))}d&&(c?(g=h=!1,b?(a.j&&Bl(a,a.j,e.toString()),f.store()&&e.store()||(d=null,h=g=!0)):a.g&&(h=!0,g=a.g==Ll),h&&e.clear(g)):d=e.toString());c&&(a.flags.da=!1,b=a.J.power)&&(b.textContent="Power");a.v=0;return d}
k.reset=function(){this.flags.reset=!0;this.G&&this.G.reset&&(G(this,"Resetting "+this.G.type),this.G.reset());this.i&&this.i.reset&&(G(this,"Resetting "+this.i.type),this.i.reset());for(var a=Nb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.G&&c!==this.i&&c.reset&&(G(this,"Resetting "+c.type),c.reset())}this.flags.reset=!1;Sc(this,-1)};k.start=function(a,b){for(var c=Nb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}Sc(this,-1)};
k.stop=function(a,b){for(var c=Nb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}Sc(this,-1)};
function Sc(a,b){if(a.i){var c=a.i,d=b||0,e=c.J.speed;e&&(0>=d||30<=(c.fd+=d))&&(e.textContent=c.flags.X?c.sb.toFixed(2)+"Mhz":"Stopped",c.fd=0)}if(a.u&&(a=a.u,b=b||0,a.C)){c=a.i.flags.X;d=!!(a.i.u&8);if(0>=b||60<=(a.A+=b)){for(e=0;e<a.i.j.length;e++)Hc(a,"R"+e,a.i.j[e]);e=ce(a.i);Hc(a,"PS",e);Hc(a,"NF",e&8?1:0,1);Hc(a,"ZF",e&4?1:0,1);Hc(a,"VF",e&2?1:0,1);Hc(a,"CF",e&1?1:0,1);a.A=0}-1>b?a.ga=a.i.j[7]:0<b&&c&&!d&&(a.ga=a.i.Oa);Dc(a,a.ga);tc(a,a.Ab);b=a.i;b=b.ub?b.Z&16?1:2:4;id(a,"B22",b&1);id(a,"B18",
b&2);id(a,"B16",b&4)}}
k.va=function(a,b,c){var d=this;switch(b){case "power":return this.J[b]=c,c.onclick=function(){d.v||(d.flags.da?cl(d,!1,!0):d.wait(d.pc))},!0;case "reset":return this.J[b]=c,c.onclick=function(){if(d.flags.da&&!d.v)if(d.g&&!d.D){var e=Cb("Click OK to save changes to this "+bc+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");cl(d,e,!0);!e&&d.N?window&&window.location.reload():(e||(d.P=!0),d.pc(il),d.P=!1)}else d.reset(),d.i&&!d.H&&d.i.ra()},!0;case "save":if(Ea(window?window.location.hostname:
"localhost","pcjs.org"))c.parentNode.removeChild(c);else return this.J[b]=c,c.onclick=function(){var e=hl(d,!0);if(e){var f=!!(d.g&&!d.D||d.N),g=cl(d,f);f?Bl(d,e,g):d.V("Resume disabled, machine state not saved")}},!0}return!1};
function hl(a,b){var c=a.j;c||((c=$a(ul),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Ml(a,c))||a.V("The user ID is invalid.")):b&&a.V("Browser local storage is not available"));return c}
function Ml(a,b){a.j=null;b=Ua(Wa()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(ab(ul,b.data),a.j=b.data)}catch(d){A(d.message+" ("+c+")")}return a.j}function jl(a){var b=null;a.j&&(b=Wa()+"/api/v1/user?req=load&user="+a.j+"&state="+Nl(a,"2.00"));return b}
function Bl(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Nl(a,"2.00");d.data=c;b=Ua(Wa()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.V("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.V(c),ab(ul,""),a.j=null)}}
function gi(a){var b;a=Nb(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function Ke(a,b){if(a.C){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.C.focus();!b&&window&&window.scrollTo(c,d)}}var ql="failsafe",ll="validate",nl="timestamp",wl="version",xl="url",yl="browser",ul="user",pl=-1,il=0,ol=1,sl=2,Ll=3;
mb(function(){for(var a=Fb(document,C+"-machine"),b=0;b<a.length;b++){var c=a[b],d=Mb(c);c=Fb(c,C,"computer");for(var e=0;e<c.length;e++){var f=c[e],g=Mb(f);g=new fl(g,d,!0);Eb(g,f);g.O&&g.wait(g.pc)}}});nb.show.push(function(){for(var a=Fb(document,C,"computer"),b=0;b<a.length;b++){var c=Mb(a[b]);if(c=Pb("Computer",c.id))c.flags.Fd=!1,c.T&&!c.flags.da&&c.pc(pl)}});
nb.exit.push(function(){for(var a=Fb(document,C,"computer"),b=0;b<a.length;b++){var c=Mb(a[b]);if(c=Pb("Computer",c.id))c.flags.Fd=!0,c.flags.da&&cl(c,!(!c.g||c.D),!0)}});function Cc(a,b,c){this.id=a.id;this.g="";this.i={};this.j=this.G=!1;this.key=Nl(a,b,c);tl(this,a.sf)}k=Cc.prototype;k.set=function(a,b){try{this.i[a]=b}catch(c){}};k.get=function(a){return this.i[a]||null};k.data=function(){return this.i};
k.load=function(a){return a?(this.g=a,this.j=!0,this.G=!1,!0):this.j?!0:Ya()&&(a=$a(this.key))?(this.g=a,this.j=!0):!1};function ml(a){var b=!0;if(!a.G)try{a.i=JSON.parse(a.g),a.G=!0}catch(c){A(c.message||c),b=!1}return b}k.store=function(){var a=!0;if(Ya()){var b=JSON.stringify(this.i);ab(this.key,b)||(A("Unable to store "+b.length+" bytes in browser local storage"),a=!1)}return a};k.toString=function(){return this.i?JSON.stringify(this.i):this.g};
function tl(a,b){a.g="";a.i={};a.j=a.G=!1;b&&a.set("parms",b)}k.clear=function(a){tl(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Nl(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Ol=0;
function Pl(a,b,c,d,e,f,g,h){g("Loading "+a+"...");Ua(a,null,!0,function(l,n,m){m?(n||(n="unable to load "+a+" ("+m+")"),h(l,n,null)):Ql(n,a,b,c,d,e,f,g,h)})}
function Ql(a,b,c,d,e,f,g,h,l){function n(m,q,r){if(r)l(m,r,null);else{c&&(zb(c,b,q),(r=b)&&0>r.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(r=window.location.pathname+r),e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{",e+='url:"'+r+'"}',"object"==typeof resources&&(r=null),e=e.replace(/\$/g,"$$$$").replace(/'/g,"&apos;"),f&&(m=q.match(/(<machine[^>]*\sclass=)(['"])(.*?)(\2[^>]*>)/))&&(q=q.replace(m[0],m[1]+m[2]+f+m[4]),f=""),(m=q.match(/(<machine[^>]*\sdebugger=)(['"])(available)(\2[^>]*>)/))&&
(q=q.replace(m[0],m[1]+m[2]+"optional"+m[4])),q=q.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(f?' class="'+f+'"':"")+(e?" parms='"+e+"'":"")+(r?' url="'+r+'"':"")));g||(q=q.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),q=q.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"),q=q.replace(/<xsl:variable name="APPVERSION"(\/>|>[^<]*<\/xsl:variable>)/,'<xsl:variable name="APPVERSION">2.00</xsl:variable>'));m=null;if("<"==q.charAt(0))try{g||
(q=q.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(m=new window.ActiveXObject("Microsoft.XMLDOM"),m.async=!1,m.loadXML(q)):m=(new window.DOMParser).parseFromString(q,"text/xml")}catch(p){m=null,q=p.message}else q="unrecognized XML: "+(255<q.length?q.substr(0,255)+"...":q);l(b,q,m)}}a?g?Rl(b,a,h,n):n(b,a,""):l(b,"no data",null)}
function Rl(a,b,c,d){var e;if(e=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(b)){var f=e[2];c("Loading "+f+"...");Ua(f,null,!0,function(g,h,l){if(l||!h)d(g,b,"unable to resolve XML reference: "+e[0]+" ("+l+")");else{if(l=e[3]){var n=h.match(new RegExp("<"+e[1]+"[^>]*>"));if(n){for(var m=n[0],q,r=/( [a-z]+=)(['"])(.*?)\2/gi;q=r.exec(l);)m=0>m.toLowerCase().indexOf(q[1].toLowerCase())?m.replace(">",q[0]+">"):m.replace(new RegExp(q[1]+"(['\"])(.*?)\\1"),q[0]);n[0]!=m&&(h=h.replace(n[0],m))}else{d(g,b,"missing <"+
e[1]+"> in "+f);return}}h=h.replace(/<\?xml[^>]*>[\r\n]*/,"");b=b.replace(e[0],h);Rl(g,b,c,d)}})}else d(a,b,"")}
function Sl(a,b,c,d,e,f){function g(y){if(void 0===m){var w=n&&Fb(n,"machine-warning");m=w&&w[0]||n}m&&(m.innerHTML=Fa(y))}function h(y,w){if("string"==typeof w&&0<=w.indexOf("<!DOCTYPE html>")){var D=w.match(/<title>(?:PCjs: |)(.*?)<\/title>/);D&&(w=D[1])}g("Error: "+w+(y?" ("+y+")":""));q&&l();q=!1}function l(){--Ol||rb(!0)}var n,m,q=!0;Ol++;Ab[b]={};if(!c)return e&&zb(b,"parms",e),l(),q;"true"==hb("debugger")&&0>c.indexOf("/debugger")&&(c=c.replace("/machine.xml","/debugger/machine.xml"));try{if(n=
document.getElementById(b)){var r;if("object"==typeof resources&&(r=resources.css)){var p=document.head||document.getElementsByTagName("head")[0],v=document.createElement("style");v.type="text/css";v.styleSheet?v.styleSheet.cssText=r:v.appendChild(document.createTextNode(r));p.appendChild(v)}d||(d="/machines/"+a+"/xsl/components.xsl");a=a.split("/").pop();r=function(y,w,D){D?Pl(d||"","",a,"","",!1,g,function(pa,fa,I){if(I)if(zb(b,d||"",fa),g("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in
window)(I=D.transformNode(I))?(n.outerHTML=I,l()):h(pa,"transformNodeToObject failed");else if(document.implementation&&document.implementation.createDocument)if(fa=new XSLTProcessor,fa.importStylesheet(I),I=fa.transformToFragment(D,document))if(fa=n.parentNode){var Gb=pa=0,Oa=n.getBoundingClientRect();0>Oa.bottom&&(pa=window.scrollX,Gb=window.scrollY);fa.replaceChild(I,n);(n=document.getElementById(b))&&0>Oa.bottom&&(I=n.getBoundingClientRect(),Gb=window.performance&&window.performance.navigation.type==
window.performance.navigation.TYPE_RELOAD?0:Gb+Math.ceil(I.height-Oa.height),window.scrollTo(pa,Gb));l()}else h(pa,"invalid machine element: "+b);else h(pa,"transformToFragment failed");else h(pa,"unable to transform XML: unsupported browser");else h(pa,fa)}):h(y,w)};"<"!=c.charAt(0)?Pl(c,b,a,e||"",f||"",!0,g,r):Ql(c,"",b,a,e||"",f||"",!1,g,r)}else h(c,"missing machine element: "+b)}catch(y){h(c,y.message)}return q}window.embedPDP10=function(a,b,c,d,e){rb(!1);return Sl("dec/pdp10",a,b,c,d,e)};
window.embedPDP11=function(a,b,c,d,e){rb(!1);return Sl("dec/pdp11",a,b,c,d,e)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete Rb[c],d=!0;else if("string"==typeof f&&!Rb[c]){d=!0;e=Rb;for(var g=c,h=f.length,l=[],n=[],m="",q=null,r=0;r<h;r++){var p=f[r];if('"'==p||"'"==p)q&&p!=q?m+=p:(q?q=null:q=p,m&&(n.push(m),m=""));else{if(!q){if("\r"==p||"\n"==p)p=";";if(" "==p||"\t"==p||";"==p){m&&(n.push(m),m="");";"==p&&n.length&&(l.push(n),n=[]);continue}}m+=p}}m&&n.push(m);n.length&&l.push(n);e[g]=l;Qb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=Pb(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=rb;window.sendEvent=wb;})()

//# sourceMappingURL=pdp11.js.map
